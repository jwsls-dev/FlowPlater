var FlowPlater=function(){"use strict";function getInstance(e){return _state.instances[e]}function getInstances(){return _state.instances}function memoize(r){const n=new Map;var e=(...e)=>{var t=JSON.stringify(e);return n.has(t)?n.get(t):(e=r(...e),n.set(t,e),e)};return e.original=r,e.cache=n,e}function setCustomTags(e){currentCustomTags=e}function replaceCustomTags(e){let t=!1;for(const a of currentCustomTags){var r=e.getElementsByTagName(a.tag);if(0<r.length){t=!0;for(const o of Array.from(r)){var n=document.createElement(a.replaceWith);n.innerHTML=o.innerHTML;for(const i of o.attributes)n.setAttribute(i.name,i.value);o.parentNode?.replaceChild(n,o)}}}return t&&Debug.info("replaced custom tags",e),e}function createDeepProxy(e,n){return"object"!=typeof e||null===e?e:new Proxy(e,{get(e,t){e=e[t];return e&&"object"==typeof e?createDeepProxy(e,n):e},set(e,t,r){return e[t]=r,Promise.resolve().then(()=>n(e)),!0},deleteProperty(e,t){return delete e[t],Promise.resolve().then(()=>n(e)),!0}})}function deepMerge(e,t){if(t){if(!e)return t;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(Array.isArray(e[r])&&Array.isArray(t[r])||!(r in e)||"object"!=typeof e[r]||"object"!=typeof t[r]||null===e[r]||null===t[r]?e[r]=t[r]:deepMerge(e[r],t[r]))}return e}function withDefault(e,t){return e??t}function normalizeStorageConfig(e,t){return"boolean"==typeof e?{enabled:e,ttl:t.ttl}:"number"==typeof e?-1===e?{enabled:!0,ttl:-1}:{enabled:0<e,ttl:0<e?e:t.ttl}:"object"==typeof e&&null!==e?{enabled:!!e.enabled,ttl:("number"==typeof e.ttl?e:t).ttl}:t}function applyConfigInternal(e){"storage"in e&&(e.storage=normalizeStorageConfig(e.storage,defaultConfig.storage)),_state.config=deepMerge(JSON.parse(JSON.stringify(_state.config)),e),Debug.level=_state.config.debug.level,"undefined"!=typeof htmx&&(htmx.config.timeout=_state.config.htmx.timeout,htmx.config.defaultSwapStyle=_state.config.htmx.swapStyle,htmx.config.selfRequestsOnly=_state.config.htmx.selfRequestsOnly,htmx.config.ignoreTitle=_state.config.htmx.ignoreTitle),e.customTags&&setCustomTags(e.customTags)}function compileTemplate(e,t=!1){if(!t)return memoizedCompile(e);TemplateCache.clear(e);t=memoizedCompile.original(e);return memoizedCompile.cache.set(JSON.stringify([e]),t),t}function replacer(e,t){return t instanceof Map?{_dataType:"Map",value:Array.from(t.entries())}:t}function reviver(e,t){return"object"==typeof t&&null!==t&&"Map"===t._dataType?new Map(t.value):t}function saveToLocalStorage(t,r,n=""){var a=ConfigManager.getConfig().storage;if(a?.enabled)try{var o=n?`fp_${n}_`+t:"fp_"+t;let e;try{e=JSON.stringify(r,replacer)}catch(e){return Debug.error(`[LocalStorage] Failed to serialize data for key ${o}: `+e.message)}var i={data:e,expiry:-1===a.ttl?null:Date.now()+1e3*a.ttl};Debug.debug("[LocalStorage] Saving to localStorage:",{key:o,item:i}),localStorage.setItem(o,JSON.stringify(i))}catch(e){Debug.error(`[LocalStorage] Failed to save to localStorage for key ${t}: `+e.message)}else Debug.debug("[LocalStorage] Storage is disabled, skipping save for key: "+t)}function loadFromLocalStorage(t,e=""){try{var r,n,a=e?`fp_${e}_`+t:"fp_"+t,o=localStorage.getItem(a);return o?(r=JSON.parse(o)).expiry&&r.expiry<Date.now()?(Debug.debug("[LocalStorage] Stored item has expired for key: "+a),localStorage.removeItem(a),null):(n=JSON.parse(r.data,reviver),Debug.debug("[LocalStorage] Loaded from localStorage:",{key:a,data:n}),n):(Debug.debug("[LocalStorage] No stored item found for key: "+a),null)}catch(e){return Debug.error(`[LocalStorage] Failed to load or parse from localStorage for key ${t}: `+e.message),null}}function collectDebugInfo(e,t,r={}){return{formId:e.id,type:t,persistenceEnabled:isPersistenceEnabledForElement(e),restoredElements:r.restoredElements||[],customVisualUpdates:r.customVisualUpdates||[],skippedElements:r.skippedElements||[],storageType:r.storageType}}function handleFormStorage(e,t={},r="save"){var n=shouldUseLocalStorage(e),a="fp_form_"+e.id;if("save"===r)n?saveToLocalStorage(e.id,t,"form"):sessionStorage.setItem(a,JSON.stringify(t));else{if("load"===r)return n?loadFromLocalStorage(e.id,"form"):JSON.parse(sessionStorage.getItem(a)||"{}");"clear"===r&&(n&&localStorage.removeItem(a),sessionStorage.removeItem(a))}}function processFormElements(e,t){Array.from(e.elements).forEach(e=>{(e instanceof HTMLInputElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement)&&e.name&&"file"!==e.type&&isPersistenceEnabledForElement(e)&&t(e)})}function manageEventListener(t,e,r,n="add"){("change"===e?["change","checkbox"!==t.type&&"radio"!==t.type?"input":null]:[e]).filter(Boolean).forEach(e=>{t["add"===n?"addEventListener":"removeEventListener"](e,r)})}function restoreElementValue(e,t){e instanceof HTMLInputElement&&("checkbox"===e.type||"radio"===e.type)?(e.checked="true"===t,updateCustomVisualState(e)):e instanceof HTMLSelectElement&&e.multiple?Array.from(e.options).forEach(e=>{e.selected=t.includes(e.value)}):e.value=t}function updateCustomVisualState(e){var t=e.closest("checkbox"===e.type?".w-checkbox":".w-radio");t&&(t=t.querySelector(`.w-${e.type}-input`))&&t.classList.toggle("w--redirected-checked",e.checked)}function getPersistenceSettings(e){let t=!1,r=!1;var n;return r=AttributeMatcher._hasAttribute(e,"persist")?(t="false"!==AttributeMatcher._getRawAttribute(e,"persist"),"true"===AttributeMatcher._getRawAttribute(e,"persist")):(n=e.closest("form"))&&AttributeMatcher._hasAttribute(n,"persist")?(t="false"!==AttributeMatcher._getRawAttribute(n,"persist"),"true"===AttributeMatcher._getRawAttribute(n,"persist")):ConfigManager.getConfig().storage?.enabled&&!ConfigManager.getConfig().persistForm?t=!1:(t=ConfigManager.getConfig().persistForm,ConfigManager.getConfig().storage?.enabled&&ConfigManager.getConfig().persistForm),e instanceof HTMLFormElement&&Array.from(e.elements).some(e=>"true"===AttributeMatcher._getRawAttribute(e,"persist"))&&(r=ConfigManager.getConfig().storage?.enabled),{shouldPersist:t,useLocalStorage:r&&ConfigManager.getConfig().storage?.enabled}}function isPersistenceEnabledForElement(e){return getPersistenceSettings(e).shouldPersist}function shouldUseLocalStorage(e){return getPersistenceSettings(e).useLocalStorage}function captureFormStates(e){try{var t=e.getElementsByTagName("form");const r={};return Array.from(t).forEach(e=>{if(e.id){const t={};Array.from(e.elements).forEach(e=>{e.name&&"file"!==e.type&&isPersistenceEnabledForElement(e)&&("checkbox"===e.type||"radio"===e.type?t[e.name]=e.checked:e instanceof HTMLSelectElement?t[e.name]=e.multiple?Array.from(e.selectedOptions).map(e=>e.value):e.value:t[e.name]=e.value)}),0<Object.keys(t).length&&(EventSystem.publish("formState:beforeCapture",{formId:e.id,formElement:e,state:t}),r[e.id]=t,shouldUseLocalStorage(e)?saveToLocalStorage(e.id,t,"form"):sessionStorage.setItem("fp_form_"+e.id,JSON.stringify(t)))}}),r}catch(e){return Debug.error("Error capturing form states: "+e.message),{}}}function restoreSingleFormState(e,t){if(e.id){const r=handleFormStorage(e,{},"load");if(r){const n=collectDebugInfo(e,"restore",{restoredElements:[],customVisualUpdates:[],skippedElements:[],storageType:shouldUseLocalStorage(e)?"localStorage":"sessionStorage"});processFormElements(e,e=>{e.name in r&&(n.restoredElements.push({name:e.name,value:r[e.name]}),restoreElementValue(e,r[e.name]))}),Debug.debug("Form state restoration summary for "+e.id,{storageType:n.storageType,source:t||"unknown",restoredElements:n.restoredElements.map(e=>({name:e.name,value:e.value})),updatedCustomVisualStates:n.customVisualUpdates,skippedElements:n.skippedElements}),EventSystem.publish("formState:afterRestore",{formId:e.id,formElement:e,state:r,source:t||"unknown"})}else Debug.debug("No stored state found for form: "+e.id)}}function restoreFormStates(e,t){}function clearFormState(e){}function setupFormChangeListeners(r){try{if(r.id){const n=collectDebugInfo(r,"setup",{formElements:r.elements.length,checkboxWrappers:r.querySelectorAll(".w-checkbox").length,listenersAdded:[],skippedElements:[]});r._fpChangeListeners||(r._fpChangeListeners=[]),processFormElements(r,t=>{var e;r._fpChangeListeners.some(({element:e})=>e===t)||(manageEventListener(t,"change",e=e=>handleFormElementChange(e)),r._fpChangeListeners.push({element:t,handler:e}),n.listenersAdded?.push(t.name))}),Debug.debug("Form setup summary for "+r.id,{totalFormElements:n.formElements,checkboxWrappers:n.checkboxWrappers,formPersistence:n.persistenceEnabled?"enabled":"disabled",listenersAdded:n.listenersAdded?.join(", "),skippedElements:n.skippedElements.join(", ")})}else Debug.debug("Skipping form without ID")}catch(e){Debug.error("Error setting up form change listeners: "+e.message)}}function cleanupFormChangeListeners(e){try{e._fpChangeListeners&&(e._fpChangeListeners.forEach(({element:e,handler:t})=>{e.removeEventListener("change",t),e.removeEventListener("input",t)}),e._fpChangeListeners=[])}catch(e){Debug.error("Error cleaning up form change listeners: "+e.message)}}function handleFormElementChange(e){try{var t=e.target;const a=t.closest("form");if(a&&a.id){const o=collectDebugInfo(a,"change",{changedValues:{},skippedElements:[]}),i={};if(processFormElements(a,e=>{var t;isTemplateValue((t=e).name)||isTemplateValue(t.value)||AttributeMatcher._hasAttribute(t,"bind")?o.skippedElements.push({name:e.name,reason:"Template binding detected",value:e.value}):(t="checkbox"===e.type||"radio"===e.type?e.checked:e instanceof HTMLSelectElement&&e.multiple?Array.from(e.selectedOptions).map(e=>e.value):e.value,i[e.name]=t,o.changedValues||(o.changedValues={}),o.changedValues[e.name]=t)}),0<Object.keys(i).length){handleFormStorage(a,i,"save"),Debug.debug("Form state update for "+a.id+":",{"Changed element":t.name,"Storage type":shouldUseLocalStorage(a)?"localStorage":"sessionStorage","Updated values":o.changedValues,"Skipped elements":o.skippedElements});let e=null;for(var[r,n]of Object.entries(_state.instances))if(Array.from(n.elements).some(e=>e.contains(a)||a.contains(e)||e===a)){e=n;break}PluginManager.executeHook("updateForm",e,{element:a,id:a.id,data:i,changedElement:t}),EventSystem.publish("formState:changed",{formId:a.id,formElement:a,state:i,changedElement:t})}function isTemplateValue(e){return"string"==typeof e&&(e.includes("{{")||e.includes("}}")||e.includes("[[")||e.includes("]]")||e.includes("this."))}}else Debug.debug("Skipping change handler - no form or form ID")}catch(e){Debug.error("Error handling form element change: "+e.message)}}function getAllRelevantForms(e){const t=new Set;e instanceof HTMLFormElement&&t.add(e);var r=e.closest("form"),r=(r&&t.add(r),e.getElementsByTagName("form"));return Array.from(r).forEach(e=>t.add(e)),t}function setupFormSubmitHandlers(e,t){try{Debug.debug("Setting up form submit handlers for element:",e);var r=getAllRelevantForms(e);Debug.debug(`Found ${r.size} forms`),r.forEach(e=>{setupSingleFormHandlers(e,t||"setupFormSubmitHandlers")})}catch(e){Debug.error("Error setting up form submit handlers: "+e.message)}}function setupSingleFormHandlers(e,t){e.id?(Debug.debug("Setting up handlers for form: "+e.id),e.removeEventListener("submit",handleFormSubmit),e.addEventListener("submit",handleFormSubmit),setupFormChangeListeners(e),e._fpHandlersSetup=!0,shouldRestoreForm(e)?(Debug.debug("Restoring state for form: "+e.id),restoreSingleFormState(e,t||"setupSingleFormHandlers")):Debug.debug("Skipping form restoration - no persistent elements: "+e.id)):Debug.debug("Skipping form without ID")}function handleFormSubmit(e){try{var t=e.target.closest("form");t&&t.id&&clearFormState(t.id)}catch(e){Debug.error("Error handling form submit: "+e.message)}}function setupDynamicFormObserver(e){try{var t=new MutationObserver(e=>{e.forEach(e=>{e.addedNodes.forEach(e=>{e instanceof HTMLFormElement&&setupFormSubmitHandlers(e,"setupDynamicFormObserver")})})});return t.observe(e,{childList:!0,subtree:!0}),t}catch(e){return Debug.error("Error setting up dynamic form observer: "+e.message),null}}function shouldRestoreForm(e){return!!isPersistenceEnabledForElement(e)||e instanceof HTMLFormElement&&0<e.querySelectorAll('[data-persist="true"]').length||0<e.querySelectorAll('[data-persist="true"]').length}function animate(e,t){AttributeMatcher._getRawAttribute(e,"animation")||_state.defaults.animation?document.startViewTransition(t):t()}async function performDomUpdate(t,e,r,n,a){if(r)await domBatcher.write(()=>{t.innerHTML=e,Debug.debug("performDomUpdate: Force full update completed for "+n)},`full-update-${n}-`+a);else{var r=document.createElement("div"),o=(r.innerHTML=e,0<r.children.length),r=r.textContent&&0<r.textContent.trim().length;if(o||r){Debug.debug(`performDomUpdate: Using Virtual DOM for element ${n} with ${t.childNodes.length} child nodes`),Debug.debug("performDomUpdate: Element innerHTML length: "+t.innerHTML.length),Debug.debug("performDomUpdate: Element innerHTML preview:",t.innerHTML.substring(0,200));const i=VirtualDOM.domToVNodes(t)||[],s=(Debug.debug(`performDomUpdate: Captured initial DOM state with ${i.length} nodes`),Debug.debug("performDomUpdate: Initial DOM nodes:",i.map((e,t)=>"string"==typeof e?t+`: "${e}"`:t+`: <${e.tag}${e.attrs.class?` class="${e.attrs.class}"`:""}>`)),VirtualDOM.parseHTML(e)||[]),l=(Debug.debug(`performDomUpdate: Parsed new HTML into ${s.length} nodes`),Debug.debug("performDomUpdate: New DOM nodes:",s.map((e,t)=>"string"==typeof e?t+`: "${e}"`:t+`: <${e.tag}${e.attrs.class?` class="${e.attrs.class}"`:""}>`)),await domBatcher.read(()=>captureFormStates(t),`capture-form-integrity-${n}-`+a));Debug.debug("performDomUpdate: Captured form states for integrity check:",l),await domBatcher.batch([{type:"write",operation:()=>{var e=VirtualDOM.diff(i,s);Debug.debug(`performDomUpdate: Generated ${e.length} patches`),0<e.length?VirtualDOM.patch(t,e,s,l):Debug.debug("performDomUpdate: No patches to apply - content is identical")},id:`vdom-patch-${n}-`+a}])}else Debug.debug("performDomUpdate: Empty newHTML detected, clearing container for element "+n),await domBatcher.write(()=>{t.innerHTML=""},`clear-empty-${n}-`+a)}}async function updateDOM(r,n,a=!1,o=null){const i=AttributeMatcher._hasAttribute(r,"force-full-update");var s=ConfigManager.getConfig();const l=r.id||"unknown",u=Date.now();if(Performance.start("updateDOM_"+o?.instanceName||r.id),Debug.debug(`UpdateDOM: ===== STARTING UPDATE for ${l} at ${u} =====`),r.hasAttribute("fp-restoring")&&!i)Debug.debug(`UpdateDOM: Already restoring element ${l}, skipping update`);else{var e=parseInt(r.getAttribute("fp-update-counter")||"0")+1;r.setAttribute("fp-update-counter",e.toString()),r.setAttribute("fp-restoring","true"),Debug.debug(`UpdateDOM: This is update #${e} for element `+l);try{if(!(r&&r instanceof HTMLElement))throw new Error("Invalid target element");if("string"!=typeof n)throw new Error("newHTML must be a string");Debug.debug(`UpdateDOM called for element ${l} with newHTML length: `+n.length),0===n.length?Debug.warn("UpdateDOM: Empty newHTML provided for element "+l):Debug.debug("UpdateDOM: newHTML preview (first 200 chars): "+n.substring(0,200));const c=s.persistForm&&shouldRestoreForm(r),p=c&&i;
// Virtual DOM already preserves form element state during normal updates
Debug.debug("Starting updateDOM with config:",s),Debug.debug(`Form persistence enabled: ${s.persistForm}, Should handle form state: ${c}, Needs manual preservation (force update): `+p);let t=null,e=null;p&&(Debug.debug("Capturing form states before update (manual preservation needed)"),t=await domBatcher.read(()=>captureFormStates(r),`capture-form-${l}-`+u),Debug.debug("Captured form states:",t)),c&&(Debug.debug("Setting up dynamic form observer"),e=setupDynamicFormObserver(r)),await new Promise(e=>{animate(r,async()=>{await new Promise(async e=>{EventSystem.publish("beforeDomUpdate",{element:r,newHTML:n,animate:a,formStates:t}),o&&PluginManager.executeHook("beforeDomUpdate",o,{element:r,newHTML:n,animate:a,formStates:t}),await performDomUpdate(r,n,i,l,u),c&&(p&&t&&(Debug.debug("Restoring form states after update (manual preservation)"),await domBatcher.write(()=>{restoreFormStates(r,"updateDOM - form state restoration - restoreFormStates")},`restore-form-${l}-`+u)),Debug.debug("Setting up form submit handlers"),await domBatcher.write(()=>{setupFormSubmitHandlers(r,"updateDOM - form state restoration - setupFormSubmitHandlers")},`setup-form-handlers-${l}-`+u)),o&&PluginManager.executeHook("afterDomUpdate",o,{element:r,newHTML:n,animate:a,formStates:t}),EventSystem.publish("afterDomUpdate",{element:r,newHTML:n,animate:a,formStates:t}),e()}),e()})}),e&&(Debug.debug("Disconnecting form observer"),e.disconnect())}catch(e){throw Debug.error("Error in updateDOM:",e),console.error("UpdateDOM error:",e),e}finally{r.removeAttribute("fp-restoring"),Performance.end("updateDOM_"+o?.instanceName||r.id),Debug.debug(`UpdateDOM: ===== COMPLETED UPDATE #${e} for ${l} =====`)}}}function isCssSelector(e){return e.startsWith("#")||e.startsWith(".")||/[[]>+~:()]/.test(e)||/^[a-z]+[a-z-]+$/i.test(e)}function extractLocalData(t,e=!0){if(!t)return null;try{if(isCssSelector(t)){var r=document.querySelector(t);if(r){var n=PluginManager.getPlugin("data-extractor");if(!n||"function"!=typeof n.globalMethods?.processHtml)return Debug.warn("DataExtractor plugin not available for element extraction"),null;try{var a=n.globalMethods?.processHtml?.(r.outerHTML);return Debug.debug(`Extracted data from element "${t}":`,a),a}catch(e){return Debug.error(`DataExtractor failed for "${t}": `+e.message),null}}}var o,i=window[t];return void 0!==i?e&&("object"!=typeof i||null===i||Array.isArray(i))?(o={[t]:i},Debug.info(`Wrapped primitive value "${t}":`,o),o):(Debug.info(`Extracted value "${t}":`,i),i):(Debug.warn(`Neither variable nor element found for "${t}"`),null)}catch(e){return Debug.info(`Error extracting local data "${t}": `+e.message),null}}function instanceMethods(u){return{instanceName:u,animate:_state.defaults.animation,_updateDOM:async function(){const r=_state.instances[u];var e;if(r)try{let t;if("self"===r.templateId||null===r.templateId){var n=Array.from(r.elements)[0];if(!n)return void Debug.error("No template element found for self template",r.instanceName);t=n.innerHTML}else{if(!r.template)return void Debug.error("No template found for instance",r.instanceName);var a,{valid:o,isHtml:i}="string"==typeof(e=r.data)&&e.trim().startsWith("<!DOCTYPE")?(Debug.debug("Data is HTML, skipping validation",u),{valid:!0,isHtml:!0}):"object"==typeof e&&null!==e||Array.isArray(e)||"number"==typeof e||"boolean"==typeof e?{valid:!0,isHtml:!1}:(Debug.error("Invalid data type: "+typeof e),{valid:!1,isHtml:!1});if(!o)return void Debug.error("Invalid data type for instance",r.instanceName);i?(Debug.debug("Data is HTML, using as is",r.instanceName),t=r.data):(Debug.debug("Before transformation - instance data:",{instanceName:r.instanceName,rawData:r.data,getData:r.getData()}),a=PluginManager.applyTransformations(r,r.getData(),"transformDataBeforeRender","json"),Debug.debug("After transformation - transformed data:",{instanceName:r.instanceName,transformedData:a,isNull:null===a,isUndefined:void 0===a,type:typeof a}),t=r.template(a),Debug.debug("[InstanceMethods] Template rendered result",{instanceName:r.instanceName,template:r.templateId,renderedLength:t?t.length:0,renderedPreview:t?t.substring(0,200)+"...":"null/undefined",hasContent:t&&0<t.trim().length}))}var s,l=Array.from(r.elements).filter(e=>document.body.contains(e));if(0!==l.length)return s=l.map(e=>domBatcher.write(()=>updateDOM(e,t,r.animate,r),`update-${r.instanceName}-`+Date.now())),await Promise.all(s);Debug.error("No active elements found for instance",r.instanceName)}catch(e){Debug.error("Error updating DOM for instance",r.instanceName,e)}else Debug.error("Instance not found: "+u)},setData:function(e){var t=_state.instances[u];if(t)if("string"!=typeof e&&"number"!=typeof e&&!Array.isArray(e)||(Debug.warn("[setData] Received raw value or unnamed root object, automatically wrapping in 'data' property"),e={data:e}),"object"!=typeof e||null===e||Array.isArray(e))Debug.error("Invalid newData type provided to setData: "+typeof e);else{var r=t.data,n=(Debug.debug(`[setData] Replacing data for ${u}. Current keys: ${Object.keys(r).join(", ")}, New keys: `+Object.keys(e).join(", ")),[]);for(const a in r)Object.hasOwnProperty.call(r,a)&&!Object.hasOwnProperty.call(e,a)&&(n.push(a),delete r[a]);0<n.length&&Debug.debug(`[setData] Deleted stale keys for ${u}: `+n.join(", ")),deepMerge(r,e),Debug.debug(`[setData] Data replacement complete for ${u}.`)}else Debug.error("Instance not found: "+u);return this},remove:function(){var e=_state.instances[u];if(!e)throw new Error("Instance not found: "+u);EventSystem.publish("beforeRemove",{instanceName:u,elements:e.elements});try{return ConfigManager.getConfig().storage?.enabled&&localStorage.removeItem("fp_"+u),e.elements.forEach(function(e){try{e.innerHTML=""}catch(e){Debug.error("Error removing instance: "+e.message)}}),e.elements=[],delete _state.instances[u],delete _state.templateCache[e.templateId],EventSystem.publish("afterRemove",{instanceName:u,elements:[]}),Debug.info("Removed instance: "+u),!0}catch(e){throw e}},refresh:async function(o={remote:!0,recompile:!1,ignoreLocalData:!1}){const i=_state.instances[u];if(!i)return Debug.error("Instance not found: "+u),Promise.reject(new Error("Instance not found: "+u));var e=PluginManager.applyTransformations(i,i.data,"transformDataBeforeRender","json"),t=i.template(e);(o.recompile||!t&&i.data)&&(i.template=compileTemplate(i.templateId,!0)),Debug.debug("Refresh - Template check:",{templateId:i.templateId,templateElement:document.querySelector(i.templateId),compiledTemplate:i.template(e)});let s=!1;i.localVarName&&!o.ignoreLocalData&&(t=extractLocalData(i.localVarName))&&(deepMerge(i.data,t),s=!0,Debug.debug(`Refreshed data from local variable "${i.localVarName}"`));const l=[];return i.elements.forEach(async function(t){try{var e,r,n,a;o.remote&&!s?(e=["get","post","put","patch","delete"]).some(e=>t.getAttribute("hx-"+e))&&(r=e.find(e=>t.getAttribute("hx-"+e)),n=t.getAttribute("hx-"+r),a=fetch(n,{method:r?.toUpperCase()}).then(e=>{if(e.ok)return e.json();throw new Error("HTTP error! status: "+e.status)}).then(e=>(deepMerge(i.data,e),ConfigManager.getConfig().storage?.enabled&&saveToLocalStorage(u,i.data,"instance"),e)),l.push(a)):(Debug.debug("Instance.refresh - Using _updateDOM for proper data flow",{instanceName:u,elementId:t.id||"no-id"}),l.push(i._updateDOM()))}catch(e){t.innerHTML=`<div class="fp-error">Error refreshing template: ${e.message}</div>`,Debug.error("Failed to refresh template: "+e.message),l.push(Promise.reject(e))}}),Promise.all(l)},getData:function(){var e=_state.instances[u].data;return JSON.parse(JSON.stringify(e))},getElements:function(){return _state.instances[u].elements},getTemplateElement:function(){return _state.instances[u].templateElement},get:function(e){return e?function(e){var r=_state.instances[u];if(r){var n=e.split(/[\.\[\]'"]/);let t=r.data;for(let e=0;e<n.length;e++){var a=n[e];if(""!==a){if(void 0===t||null===t||!t.hasOwnProperty(a))return;t=t[a]}}return t}Debug.error("Instance not found: "+u)}.call(this,e):this.getData?.()},refreshTemplate:function(e,t=!1){return Performance.start("refreshTemplate:"+e),!!compileTemplate(e,t)||(Debug.error("Failed to compile template: "+e),Performance.end("refreshTemplate:"+e),!1)}}}function render({template:a,data:o,target:e,returnHtml:i=!1,instanceName:s,animate:l=_state.defaults.animation,recompile:u=!1,skipLocalStorageLoad:c=!1,skipRender:p=!1,isStoredDataRender:h=!1}){Performance.start("render:"+withDefault(s,DEFAULTS.TEMPLATE.ANONYMOUS_INSTANCE_NAME)),_state._initTracking||(_state._initTracking={});let t;if(s?t=s:e instanceof Element&&AttributeMatcher._hasAttribute(e,"instance")?t=AttributeMatcher._getRawAttribute(e,"instance"):e instanceof Element&&e.id?t=e.id:"string"==typeof e&&e.startsWith("#")&&(t=e.substring(1)),t&&_state._initTracking[t]&&!h){h=Date.now()-_state._initTracking[t];if(h<DEFAULTS.INSTANCES.DUPLICATE_INIT_WINDOW)return Debug.warn(`[Template] Skipping redundant initialization for ${t}, last init was ${h}ms ago`),_state.instances[t]||null}t&&(_state._initTracking[t]=Date.now()),EventSystem.publish("beforeRender",{instanceName:s,template:a,data:o,target:e,returnHtml:i,recompile:u}),a&&a!==DEFAULTS.TEMPLATE.SELF_TEMPLATE_ID||(h="string"==typeof e?document.querySelector(e):e)&&(a="#"+h.id);let d=[];if(0===(d=e instanceof Element&&(h=AttributeMatcher._getRawAttribute(e,"target"))?"this"===h?[e]:Array.from(document.querySelectorAll(h)):d).length&&(e instanceof NodeList?d=Array.from(e):"string"==typeof e?d=Array.from(document.querySelectorAll(e)):e instanceof Element&&(d=[e])),0===d.length)Debug.error("No target elements found");else{s=s||(AttributeMatcher._hasAttribute(d[0],"instance")?AttributeMatcher._getRawAttribute(d[0],"instance")||void 0:d[0].id||_state.length.toString());var g=compileTemplate(a,u);if(_state.length++,g){if(0!==d.length){let t=o||{},r=null,n=null;const E=AttributeMatcher._getRawAttribute(d[0],"local");let e=null;if(E){if(!(e=extractLocalData(E)))try{var f=document.querySelector(E);f&&AttributeMatcher.findMatchingElements("data",null,!1,f)&&(m=PluginManager.getPlugin("data-extractor"))&&(e=m.instanceMethods?.extractData?.(f))}catch(e){Debug.warn("[Template] Invalid selector for fp-local: "+E)}e&&(t={...t,...e}),AttributeMatcher._hasAttribute(d[0],"local-observe")&&AttributeMatcher.findMatchingElements("data")?.forEach(e=>{PluginManager.getPlugin("data-extractor")?.instanceMethods?.observeDataElement?.(e,E,s?_state.instances[s]:void 0)})}if(s&&_state.instances[s]&&_state.instances[s].data)n=_state.instances[s].data;else{h=s?_state.instances[s]:null,u=h&&h.data&&0<Object.keys(h.data).length;if(!c&&ConfigManager.getConfig().storage?.enabled&&!u&&(r=loadFromLocalStorage(s||"","instance"))){if(!0===r.isHtml||"string"==typeof r&&"function"==typeof r.trim&&(r.trim().startsWith("<!DOCTYPE html")||r.trim().startsWith("<html"))){o=AttributeMatcher._getRawAttribute(d[0],"swap","innerHTML");const y={swapStyle:withDefault(o,DEFAULTS.HTMX.SWAP_STYLE),swapDelay:DEFAULTS.HTMX.SWAP_DELAY,settleDelay:DEFAULTS.HTMX.SETTLE_DELAY,transition:o?.includes("transition:true")||DEFAULTS.HTMX.TRANSITION};return i?r:(d.forEach(e=>{htmx.swap(e,r,y)}),s?_state.instances[s]:void 0)}var m=r?.data||r;t={...m,...t},Debug.debug(`[Template] Merged persisted data for ${s}:`,t)}f=d.find(e=>AttributeMatcher._hasAttribute(e,"template"));if(!f)return Debug.error("No template element found in target elements"),null;const v=InstanceManager.getOrCreateInstance(f,t);if(!v)return Debug.error("Failed to get or create instance: "+s),null;E&&(v.localVarName=E),v._updateTimer||(v._updateTimer=null),v._stateBeforeDebounce||(v._stateBeforeDebounce=null);h=AttributeMatcher._getRawAttribute(f,"group");if(h){let e=t;!c&&ConfigManager.getConfig().storage?.enabled&&(u=loadFromLocalStorage(h,"group"))&&(e=deepMerge(u,t),Debug.debug("Loaded persisted data for group "+h,e));o=GroupManager.getOrCreateGroup(h,e);n=o.data,GroupManager.addInstanceToGroup(v,h),Debug.info(`Instance ${s} is using group ${h} data`)}else{const S=DEFAULTS.PERFORMANCE.DEBOUNCE_DELAY;n=createDeepProxy(t,()=>{v&&!v._isEvaluating&&(v._updateTimer&&clearTimeout(v._updateTimer),v._updateTimer=setTimeout(()=>{try{v._isEvaluating=!0;var e,t=PluginManager.applyTransformations(v,v.getData(),"transformDataBeforeRender","json"),r=v.template(t);v._lastRenderedOutput!==r?(Debug.info(`[Debounced Update] Output changed for ${s}. Firing updateData hook.`),PluginManager.executeHook("updateData",v,{newData:n,source:"proxy"}),EventSystem.publish("updateData",{instanceName:s,newData:n,source:"proxy"}),Debug.debug("[Debounced Update] Triggering _updateDOM for "+s),v._updateDOM(),v._lastRenderedOutput=r,ConfigManager.getConfig().storage?.enabled&&(e=v.instanceName.replace("#",""),Debug.debug("[Debounced Update] Saving data for "+e),saveToLocalStorage(e,n,"instance"))):Debug.debug(`[Debounced Update] No output change for ${s}. Skipping update.`)}finally{v._isEvaluating=!1,v._updateTimer=null}},S))})}v.template=g,v.templateId=AttributeMatcher._getRawAttribute(f,"template")||a,v.data=n,Debug.debug(`[Initial Render] ${p?"Skipping":"Triggering"} _updateDOM for `+s),p||v._updateDOM(),!ConfigManager.getConfig().storage?.enabled||r||v.groupName||(m=s?.replace("#","")||"",Debug.debug("[Initial Save] Saving initial data for "+m),saveToLocalStorage(m,t,"instance"))}c=s?_state.instances[s]:void 0;if(c&&Debug.info("Final instance data: ",c.data),n){var b,u=d.find(e=>AttributeMatcher._hasAttribute(e,"template"));if(!u)return Debug.error("No template element found in target elements"),null;const w=InstanceManager.getOrCreateInstance(u,t);if(!w)return Debug.error("Failed to get or create instance: "+s),null;if(w.template=g,w.templateId=AttributeMatcher._getRawAttribute(u,"template")||a,w.data=n,p)Debug.debug(`[Render Template] Skipping render for ${s} as requested`);else{Debug.debug("[Render Template] Executing render for "+s);try{if(i)return b=PluginManager.applyTransformations(w,w.getData(),"transformDataBeforeRender","json"),g(b);Array.from(w.elements).forEach(e=>{var t=PluginManager.applyTransformations(w,w.getData(),"transformDataBeforeRender","json");updateDOM(e,g(t),l,w)})}catch(e){throw e instanceof TemplateError||Debug.error("Failed to render template: "+e.message),e}}}else p||Debug.debug(`[Template] Skipping render for ${s} because no data is available yet.`);return c||null}Debug.error("Target not found: "+e)}else Debug.error("Template not found: "+a)}}function compare(e,t,r){if(isNaN(e)||(e=Number(e)),isNaN(r)||(r=Number(r)),null==e||null==r)switch(t){case"==":return e==r;case"!=":return e!=r;case"&&":return Boolean(e)&&Boolean(r);case"||":return Boolean(e)||Boolean(r);default:return}if("string"==typeof e&&"string"==typeof r)switch(t){case"==":return 0===e.localeCompare(r);case"!=":return 0!==e.localeCompare(r);case"<":return e.localeCompare(r)<0;case">":return 0<e.localeCompare(r);case"<=":return e.localeCompare(r)<=0;case">=":return 0<=e.localeCompare(r);default:throw new TemplateError("Unsupported operator for strings: "+t)}switch(t){case"==":return e==r;case"!=":return e!=r;case"<":return e<r;case">":return r<e;case"<=":return e<=r;case">=":return r<=e;case"&&":return Boolean(e)&&Boolean(r);case"||":return Boolean(e)||Boolean(r);case"regex":return new RegExp(r).test(e);default:throw new TemplateError("Unsupported operator: "+t)}}function ifHelper(){var e=window.Handlebars;e.unregisterHelper("if"),e.registerHelper("if",function(e,t){function resolveValue(t,e,r){if(t.startsWith('"')&&t.endsWith('"')||t.startsWith("'")&&t.endsWith("'"))return t.slice(1,-1);if(!isNaN(Number(t)))return parseFloat(t);if("this"===t)return r;if(t.startsWith("this.")){const n=t.split(".").slice(1);let e=r;for(const o of n){if(!e||"object"!=typeof e)return;if(!Object.prototype.hasOwnProperty.call(e,o))return;e=e[o]}return e}const n=t.split(".");let a=e;for(const i of n){if(!a||"object"!=typeof a)return;if(!Object.prototype.hasOwnProperty.call(a,i))return;a=a[i]}return a}try{if(!e.match(/\s*(==|!=|<=|>=|<|>|\|\||&&)\s*/))return void 0!==resolveValue(e,t.data.root,this)?t.fn(this):t.inverse(this);var r=e.trim(),[n,a,o]=r.split(/\s*(==|!=|<=|>=|<|>|\|\||&&)\s*/);if(!n||a&&!o||!n&&a)throw new TemplateError("Invalid expression format: "+r);var i=resolveValue(n,t.data.root,this),s=!o||resolveValue(o,t.data.root,this),a=a||DEFAULTS.HELPERS.COMPARISON.DEFAULT_OPERATOR;return Debug.info("Evaluating expression:",{raw:r,leftValue:i,operator:a,rightValue:s}),"=="!==a||o?compare(i,a,s)?t.fn(this):t.inverse(this):void 0!==i?t.fn(this):t.inverse(this)}catch(e){throw e instanceof TemplateError||Debug.error("Error evaluating if condition:",e.stack),e}})}function sumHelper(){window.Handlebars.registerHelper("sum",function(...e){for(var t=0,r=0;r<e.length-1;r++){var n=e[r];Array.isArray(n)?n.forEach(function(e){t+=e}):t+=n}return t})}function sortFunction(r,n){return function(e,t){e=r?e[r]:e,t=r?t[r]:t;return null==e?n?-1:1:null==t?n?1:-1:"string"==typeof e&&"string"==typeof t?n?t.localeCompare(e):e.localeCompare(t):e<t?n?1:-1:t<e?n?-1:1:0}}function eachHelper(){const f=window.Handlebars;f.unregisterHelper("each"),f.registerHelper("each",function(e,t){var r,n,a="",o=t.hash.limit||void 0,i=t.hash.startAt||DEFAULTS.HELPERS.EACH.START_AT,s=t.hash.sortBy||DEFAULTS.HELPERS.EACH.SORT_KEY,l=t.hash.descending||DEFAULTS.HELPERS.EACH.DESCENDING,u=t.hash.sortBeforeLimit||DEFAULTS.HELPERS.EACH.SORT_BEFORE_LIMIT,c=t.inverse,p=t.fn;if(e instanceof Map&&(e=Array.from(e.values())),u="boolean"!=typeof u||u,t.data&&t.ids&&(n=(t.data.contextPath||"")+t.ids[0]+"."),f.Utils.isFunction(e)&&(e=e.call(this)),t.data&&(r=f.createFrame(t.data)),!Array.isArray(e)&&"object"!=typeof e)return c(this);var h=Array.isArray(e)?e.slice():Object.entries(e);void 0===o&&(o=h.length),u?(h.sort(sortFunction(s,l)),h=h.slice(i,o+i)):(h=h.slice(i,o+i)).sort(sortFunction(s,l));for(var d=0;d<h.length;d++){var g=Array.isArray(e)?h[d]:h[d][1];r.key=Array.isArray(e)?d:h[d][0],r.index=d,r.first=0===d,r.last=d===h.length-1,n&&(r.contextPath=n+r.key),a+=p(g,{data:r,blockParams:f.Utils.blockParams([g,r.key],[n+r.key,null])})}return 0===d?c(this):a})}function executeHelper(){window.Handlebars.registerHelper("execute",function(t,...e){if(ConfigManager.getConfig().allowExecute){e.pop();var t=String(t).trim(),r=ALLOWED_FUNCTIONS.get(t);if(r)try{return r.apply(this,e)}catch(e){return Debug.error("Error executing registered function "+t+": "+e.message),""}r=this[t];if("function"==typeof r)try{return r.apply(this,e)}catch(e){return Debug.error("Error executing context function "+t+": "+e.message),""}Debug.error("Function not found or not allowed: "+t+". Please register the function using registerExecutableFunction() before using it in a template.")}else Debug.error("execute is disabled. Cannot execute functions.");return""})}function setHelper(){window.Handlebars.registerHelper("set",function(e,t,r){return e&&t?/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(e)?void(r.data.root[e]=t):(Debug.error(`setHelper: varName ${e} is not a valid variable name`),""):(Debug.error("setHelper: varName and varValue are required"),"")})}function bunnyHelper(){const t=window.Handlebars;void 0===t?console.error("Handlebars is not loaded yet!"):t.helpers.bunny||(window._fp_bunnyStates={bunny:`
    &nbsp;&nbsp;&nbsp;&nbsp;/)  /)<br>
    ପ(˶•-•˶)ଓ ♡<br>
    &nbsp;&nbsp;&nbsp;/づ  づ
  `,bunnyFlipped:`
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(\\  (\\<br>
    &nbsp;&nbsp;ପ(˶•-•˶)ଓ<br>
    &nbsp;&nbsp;♡じ  じ\\
  `},window._fp_bunnyAnimation=function(){window._fp_bunnyAnimationIntervalId&&clearInterval(window._fp_bunnyAnimationIntervalId),window._fp_bunnyAnimationIntervalId=setInterval(function(){document.querySelectorAll(".fp-bunny").forEach(function(e){"normal"===e.getAttribute("data-bunny-state")?(e.innerHTML=window._fp_bunnyStates.bunnyFlipped,e.setAttribute("data-bunny-state","flipped")):(e.innerHTML=window._fp_bunnyStates.bunny,e.setAttribute("data-bunny-state","normal"))})},1e3)},t.registerHelper("bunny",function(){var e=`<span class="fp-bunny" data-bunny-state="normal">${window._fp_bunnyStates.bunny}</span>`;return setTimeout(window._fp_bunnyAnimation,0),new t.SafeString(e)}),0<document.querySelectorAll(".fp-bunny").length&&window._fp_bunnyAnimation())}function defaultHelper(){window.Handlebars.registerHelper("default",function(e,t){return e||t})}function registerHelpers(){ifHelper(),sumHelper(),eachHelper(),executeHelper(),setHelper(),bunnyHelper(),defaultHelper()}function parseXmlToJson(e){return function xmlToJson(e){var t={};if(e.attributes)for(var r=0;r<e.attributes.length;r++){var n=e.attributes.item(r);n&&(t["_"+n.nodeName]=n.nodeValue)}var a=e.childNodes;if(1===a.length&&3===a[0].nodeType)return a?.[0]?.nodeValue?.trim();for(var o=0;o<a.length;o++){var i,s=a[o];1===s.nodeType&&(i=xmlToJson(s),t[s.nodeName]?(Array.isArray(t[s.nodeName])||(t[s.nodeName]=[t[s.nodeName]]),t[s.nodeName].push(i)):t[s.nodeName]=i)}return 0<Object.keys(t).length?t:{}}((new DOMParser).parseFromString(e,"text/xml").documentElement)}function defineHtmxExtension(){htmx.defineExtension("flowplater",{transformResponse:async function(t,r,n){var a=r.getResponseHeader("Content-Type")||"",o=a.startsWith("text/xml"),e=a.startsWith("text/html");let i=t,s=!1;if(o)try{if(!t||"string"!=typeof t)throw new Error("Invalid XML content: empty or non-string response");var l=(new DOMParser).parseFromString(t,"text/xml"),u=l.querySelector("parsererror");if(u)throw new Error("XML parsing failed: "+(u.textContent||"Unknown parser error"));if(!l.documentElement)throw new Error("XML parsing failed: no document element found");var c=parseXmlToJson(t);i=JSON.stringify(c),s=!0,Debug.debug("[transformResponse] Successfully converted XML to JSON:",c)}catch(e){o=e instanceof Error?e.message:"Unknown XML parsing error";Debug.error("Failed to parse XML response:",o,{originalText:t.substring(0,200)+(200<t.length?"...":""),contentType:a}),i=t,s=!1}else e||(s=!0);u=InstanceManager.getOrCreateInstance(n),l=e?"html":"json",u?(i=PluginManager.applyTransformations(u,i,"transformResponse",l),s="object"==typeof i||"string"==typeof i&&(()=>{try{return JSON.parse(i),!0}catch{return!1}})(),Debug.debug("[transformResponse] isJson: "+s)):Debug.debug(`[transformResponse] No instance found for elt ${n.id}. Skipping transformations.`),Debug.debug("[transformResponse] Processed text: "+i),c=r.requestId,o=RequestHandler.processingElements.get(n);if(o&&o.requestId===c&&s){if(Debug.debug("[transformResponse] Processed text is JSON"),u){a=u.instanceName;Debug.debug("[transformResponse] Setting data for "+a);try{RequestHandler.handleRequest(n,c,"process"),u._htmxUpdateInProgress=!0;let e;if("string"==typeof i)try{e=JSON.parse(i)}catch(e){var p=e instanceof Error?e.message:"Unknown JSON parsing error";return Debug.error(`[transformResponse] Failed to parse JSON data for instance ${a}:`,p,{originalText:i.substring(0,200)+(200<i.length?"...":""),contentType:r.getResponseHeader("Content-Type")||"unknown"}),u._htmxUpdateInProgress=!1,""}else{if("object"!=typeof i)return Debug.error("[transformResponse] Invalid data type for JSON processing: "+typeof i,{processedText:i,instanceName:a}),u._htmxUpdateInProgress=!1,"";e=i}null===e||void 0===e?Debug.warn(`[transformResponse] Received null/undefined data for instance ${a}, skipping update`):u.setData(e),u._htmxUpdateInProgress=!1}catch(e){Debug.error(`[transformResponse] Error processing JSON data for instance ${a}:`,e.message,{stack:e.stack,processedText:"string"==typeof i?i.substring(0,200)+(200<i.length?"...":""):i}),u._htmxUpdateInProgress=!1}}return""}return i},handleSwap:function(e,t,r,n){Debug.debug("[handleSwap] Swap style: "+e);var e=""===r.textContent?.trim(),n=n.xhr?.getResponseHeader("Content-Type")||"";return n.startsWith("text/html")||n.startsWith("text/xml")?(n=null!==PluginManager.getPlugin("data-extractor"),r=r&&0<AttributeMatcher.findMatchingElements("data",null,!1,r,!0).length,n&&r?(Debug.debug("[handleSwap] Detected data-extractor plugin and fp-data attribute. Processing through data extractor."),!0):n?(Debug.info("[handleSwap] Detected data-extractor plugin but no fp-data attribute. Skipping data extraction."),!1):r?(Debug.warn("[handleSwap] Detected fp-data attribute but no data-extractor plugin. Skipping data extraction."),!1):e?(Debug.debug(`[handleSwap] Detected empty string signal for target ${t.id||"[no id]"}. Preventing htmx default swap.`),!0):(Debug.debug(`[handleSwap] Fragment is not empty signal for target ${t.id||"[no id]"}. Letting htmx swap.`),!1)):(Debug.debug(`[handleSwap] Detected JSON response for target ${t.id||"[no id]"}. Preventing htmx swap.`),!0)},onEvent:function(e,t){var r=t.detail.elt;if(r){var n=t.detail.requestId||RequestHandler.generateRequestId();switch(t.detail.requestId||(t.detail.requestId=n),e){case"htmx:confirm":AttributeMatcher._hasAttribute(r,"template")&&(a=InstanceManager.getOrCreateInstance(r),t=PluginManager.applyTransformations(a,t,"confirm","json"));break;case"htmx:configRequest":var a=InstanceManager.getOrCreateInstance(r);(t=PluginManager.applyTransformations(a,t,"transformRequest","json")).detail.headers["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8";break;case"htmx:beforeRequest":t.detail.xhr.requestId||(t.detail.xhr.requestId=n),RequestHandler.handleRequest(r,n,"start"),AttributeMatcher._hasAttribute(r,"template")&&(a=InstanceManager.getOrCreateInstance(r),PluginManager.executeHook("beforeRequest",a||null,t));break;case"htmx:beforeSwap":executeHtmxHook("beforeSwap",r,t),AttributeMatcher._hasAttribute(r,"template")&&(a=InstanceManager.getOrCreateInstance(r))&&EventSystem.publish("beforeSwap",{instanceName:a.instanceName,...t.detail});break;case"htmx:afterSwap":executeHtmxHook("afterSwap",r,t),AttributeMatcher._hasAttribute(r,"template")&&(a=InstanceManager.getOrCreateInstance(r))&&EventSystem.publish("afterSwap",{instanceName:a.instanceName,...t.detail}),getAllRelevantForms(r).forEach(cleanupFormChangeListeners);break;case"htmx:afterRequest":AttributeMatcher._hasAttribute(r,"template")&&(a=InstanceManager.getOrCreateInstance(r))&&(PluginManager.executeHook("afterRequest",a,t),EventSystem.publish("requestEnd",{instanceName:a.instanceName,...t.detail})),RequestHandler.handleRequest(r,n,"cleanup");break;case"htmx:afterSettle":executeHtmxHook("afterSettle",r,t),Debug.debug(`Setting up form handlers after DOM settle for target: ${r.id||"unknown"}, `+`has fp-template: ${AttributeMatcher._hasAttribute(r,"template")}, `+"parent form: "+(r.closest("form")?.id||"none")),setupFormSubmitHandlers(r)}}else Debug.warn(`[onEvent] Event ${e} has no triggering element (evt.detail.elt). Skipping.`)}})}function executeHtmxHook(e,t,r){(AttributeMatcher._hasAttribute(t,"instance")||t.hasAttribute("id"))&&(t=InstanceManager.getOrCreateInstance(t))&&PluginManager.executeHook(e,t,r?.detail)}function translateCustomHTMXAttributes(n){try{return Debug.debug("translateCustomHTMXAttributes",n),htmxAttributes.forEach(e=>{var t,r="fp-"+e;(n.hasAttribute(r)||n.hasAttribute("data-"+r))&&((t=n.getAttribute(r))&&n.setAttribute("hx-"+e,t),n.removeAttribute(r))}),n}catch(e){return Debug.error("Error in translateCustomHTMXAttributes: "+e.message),n}}function addHtmxExtensionAttribute(t){try{var e=t.getAttribute("hx-ext")||"";return e.includes("flowplater")||(t.setAttribute("hx-ext",e?e+", flowplater":"flowplater"),Debug.info("Added hx-ext attribute to "+t.id)),t}catch(e){return Debug.error("Error in addHtmxExtensionAttribute: "+e.message),t}}function processUrlAffixes(t){try{var e=["get","post","put","patch","delete"];return(AttributeMatcher._hasAttribute(t,"prepend")||AttributeMatcher._hasAttribute(t,"append"))&&e.some(e=>t.hasAttribute("hx-"+e))&&(o=t,e.forEach(function(e){var t,r,n,a="hx-"+e;o.hasAttribute(a)&&(t=o.getAttribute(a),Debug.info("Original URL: "+t),n=t,(r=AttributeMatcher.findAttribute(o,"prepend"))&&(n=r+n),(r=AttributeMatcher.findAttribute(o,"append"))&&(n+=r),n&&o.setAttribute(a,n),Debug.info("Modified URL: "+n),n!==t?Debug.info("Modification successful for",e,"on element",o):Debug.error("Modification failed for",e,"on element",o))})),t}catch(e){return Debug.error("Error in processUrlAffixes: "+e.message),t}var o}function preloadUrl(t){if(t){const r=document.createElement("link"),n=(r.rel="preload",r.href=t,r.as="fetch",r.crossOrigin="anonymous",()=>{r.parentNode&&r.remove()});r.onerror=e=>{Debug.error("Failed to preload URL: "+t,e),n()};var e=setTimeout(n,3e3);return document.head.appendChild(r),{cleanup:n,timeoutId:e}}Debug.error("No URL provided for preloading")}function addPreloadListener(n){const e=AttributeMatcher._getRawAttribute(n,"preload")||"mouseover";if("mouseover"===e){let t=!0,e,r;const a=()=>{t=!0,e=setTimeout(()=>{var e;t&&(e=n.getAttribute("href")||AttributeMatcher._getRawAttribute(n,"get"))&&(r=preloadUrl(e))},100)},o=()=>{t=!1,e&&clearTimeout(e),r&&(clearTimeout(r.timeoutId),r.cleanup())};n.addEventListener("mouseover",a),n.addEventListener("mouseout",o),n._preloadCleanup=()=>{n.removeEventListener("mouseover",a),n.removeEventListener("mouseout",o),o()}}else{const t=()=>{var e=n.getAttribute("href")||AttributeMatcher._getRawAttribute(n,"get");e&&preloadUrl(e)};n.addEventListener(e,t),n._preloadCleanup=()=>{n.removeEventListener(e,t)}}}function processPreload(t){try{return t.hasAttribute("data-fp-preload-processed")||AttributeMatcher._hasAttribute(t,"preload")&&(addPreloadListener(t),t.setAttribute("data-fp-preload-processed","true")),t}catch(e){return Debug.error("Error in processPreload: "+e.message),t}}function setupAnimation(t){try{var e;return"true"===(AttributeMatcher._getRawAttribute(t,"animation")||_state.defaults.animation)&&(e=t.getAttribute("hx-swap"),t.setAttribute("hx-swap",e?e+" transition:true":"innerHTML transition:true")),t}catch(e){return Debug.error("Error in setupAnimation: "+e.message),t}}function getDefaultExportFromCjs(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function requireUtils(){function escapeChar(e){return t[e]}function extend(e){for(var t=1;t<arguments.length;t++)for(var r in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],r)&&(e[r]=arguments[t][r]);return e}var t,r,n,a,e,o;return hasRequiredUtils||(hasRequiredUtils=1,utils.__esModule=!0,utils.extend=extend,utils.indexOf=function(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},utils.escapeExpression=function(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}return n.test(e)?e.replace(r,escapeChar):e},utils.isEmpty=function(e){return!e&&0!==e||!(!o(e)||0!==e.length)},utils.createFrame=function(e){var t=extend({},e);return t._parent=e,t},utils.blockParams=function(e,t){return e.path=t,e},utils.appendContextPath=function(e,t){return(e?e+".":"")+t},t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},r=/[&<>"'`=]/g,n=/[&<>"'`=]/,a=Object.prototype.toString,utils.toString=a,(e=function(e){return"function"==typeof e})(/x/)&&(utils.isFunction=e=function(e){return"function"==typeof e&&"[object Function]"===a.call(e)}),utils.isFunction=e,o=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===a.call(e)},utils.isArray=o),utils}function requireException(){function Exception(e,t){for(var t=t&&t.loc,r=void 0,n=void 0,a=void 0,o=void 0,i=(t&&(n=t.end.line,o=t.end.column,e+=" - "+(r=t.start.line)+":"+(a=t.start.column)),Error.prototype.constructor.call(this,e)),s=0;s<l.length;s++)this[l[s]]=i[l[s]];Error.captureStackTrace&&Error.captureStackTrace(this,Exception);try{t&&(this.lineNumber=r,this.endLineNumber=n,Object.defineProperty?(Object.defineProperty(this,"column",{value:a,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:o,enumerable:!0})):(this.column=a,this.endColumn=o))}catch(e){}}var e,t,l;return hasRequiredException||(hasRequiredException=1,(t=(e=exception).exports).__esModule=!0,l=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"],Exception.prototype=new Error,t.default=Exception,e.exports=t.default),exception.exports}function requireBlockHelperMissing(){var e,t,o;return hasRequiredBlockHelperMissing||(hasRequiredBlockHelperMissing=1,(t=(e=blockHelperMissing).exports).__esModule=!0,o=requireUtils(),t.default=function(a){a.registerHelper("blockHelperMissing",function(e,t){var r=t.inverse,n=t.fn;return!0===e?n(this):!1===e||null==e?r(this):o.isArray(e)?0<e.length?(t.ids&&(t.ids=[t.name]),a.helpers.each(e,t)):r(this):(t.data&&t.ids&&((r=o.createFrame(t.data)).contextPath=o.appendContextPath(t.data.contextPath,t.name),t={data:r}),n(e,t))})},e.exports=t.default),blockHelperMissing.exports}function requireEach(){var e,t,r,d,g;return hasRequiredEach||(hasRequiredEach=1,(t=(e=each).exports).__esModule=!0,d=requireUtils(),g=(r=requireException())&&r.__esModule?r:{default:r},t.default=function(e){e.registerHelper("each",function(n,e){function execIteration(e,t,r){s&&(s.key=e,s.index=t,s.first=0===t,s.last=!!r,l)&&(s.contextPath=l+e),i+=a(n[e],{data:s,blockParams:d.blockParams([n[e],e],[l+e,null])})}if(!e)throw new g.default("Must pass iterator to #each");var t,a=e.fn,r=e.inverse,o=0,i="",s=void 0,l=void 0;if(e.data&&e.ids&&(l=d.appendContextPath(e.data.contextPath,e.ids[0])+"."),d.isFunction(n)&&(n=n.call(this)),e.data&&(s=d.createFrame(e.data)),n&&"object"==typeof n)if(d.isArray(n))for(var u=n.length;o<u;o++)o in n&&execIteration(o,o,o===n.length-1);else if("function"==typeof Symbol&&n[Symbol.iterator]){for(var c=[],p=n[Symbol.iterator](),h=p.next();!h.done;h=p.next())c.push(h.value);for(u=(n=c).length;o<u;o++)execIteration(o,o,o===n.length-1)}else t=void 0,Object.keys(n).forEach(function(e){void 0!==t&&execIteration(t,o-1),t=e,o++}),void 0!==t&&execIteration(t,o-1,!0);return i=0===o?r(this):i})},e.exports=t.default),each.exports}function requireHelperMissing(){var e,t,r,n;return hasRequiredHelperMissing||(hasRequiredHelperMissing=1,(t=(e=helperMissing).exports).__esModule=!0,n=(r=requireException())&&r.__esModule?r:{default:r},t.default=function(e){e.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new n.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},e.exports=t.default),helperMissing.exports}function require_if(){var e,t,r,n,a;return hasRequired_if||(hasRequired_if=1,(t=(e=_if).exports).__esModule=!0,n=requireUtils(),a=(r=requireException())&&r.__esModule?r:{default:r},t.default=function(r){r.registerHelper("if",function(e,t){if(2!=arguments.length)throw new a.default("#if requires exactly one argument");return n.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||n.isEmpty(e)?t.inverse(this):t.fn(this)}),r.registerHelper("unless",function(e,t){if(2!=arguments.length)throw new a.default("#unless requires exactly one argument");return r.helpers.if.call(this,e,{fn:t.inverse,inverse:t.fn,hash:t.hash})})},e.exports=t.default),_if.exports}function requireLog(){var e,t;return hasRequiredLog||(hasRequiredLog=1,(t=(e=log).exports).__esModule=!0,t.default=function(a){a.registerHelper("log",function(){for(var e=[void 0],t=arguments[arguments.length-1],r=0;r<arguments.length-1;r++)e.push(arguments[r]);var n=1;null!=t.hash.level?n=t.hash.level:t.data&&null!=t.data.level&&(n=t.data.level),e[0]=n,a.log.apply(a,e)})},e.exports=t.default),log.exports}function requireLookup(){var e,t;return hasRequiredLookup||(hasRequiredLookup=1,(t=(e=lookup).exports).__esModule=!0,t.default=function(e){e.registerHelper("lookup",function(e,t,r){return e&&r.lookupProperty(e,t)})},e.exports=t.default),lookup.exports}function require_with(){var e,t,r,a,o;return hasRequired_with||(hasRequired_with=1,(t=(e=_with).exports).__esModule=!0,a=requireUtils(),o=(r=requireException())&&r.__esModule?r:{default:r},t.default=function(e){e.registerHelper("with",function(e,t){if(2!=arguments.length)throw new o.default("#with requires exactly one argument");a.isFunction(e)&&(e=e.call(this));var r,n=t.fn;return a.isEmpty(e)?t.inverse(this):((r=t.data)&&t.ids&&((r=a.createFrame(t.data)).contextPath=a.appendContextPath(t.data.contextPath,t.ids[0])),n(e,{data:r,blockParams:a.blockParams([e],[r&&r.contextPath])}))})},e.exports=t.default),_with.exports}function requireHelpers$1(){function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var t,r,n,a,o,i,s;return hasRequiredHelpers$1||(hasRequiredHelpers$1=1,helpers$1.__esModule=!0,helpers$1.registerDefaultHelpers=function(e){t.default(e),r.default(e),n.default(e),a.default(e),o.default(e),i.default(e),s.default(e)},helpers$1.moveHelperToHooks=function(e,t,r){e.helpers[t]&&(e.hooks[t]=e.helpers[t],r||delete e.helpers[t])},t=_interopRequireDefault(requireBlockHelperMissing()),r=_interopRequireDefault(requireEach()),n=_interopRequireDefault(requireHelperMissing()),a=_interopRequireDefault(require_if()),o=_interopRequireDefault(requireLog()),i=_interopRequireDefault(requireLookup()),s=_interopRequireDefault(require_with())),helpers$1}function requireInline(){var e,t,i;return hasRequiredInline||(hasRequiredInline=1,(t=(e=inline).exports).__esModule=!0,i=requireUtils(),t.default=function(e){e.registerDecorator("inline",function(n,a,o,e){var t=n;return a.partials||(a.partials={},t=function(e,t){var r=o.partials,e=(o.partials=i.extend({},r,a.partials),n(e,t));return o.partials=r,e}),a.partials[e.args[0]]=e.fn,t})},e.exports=t.default),inline.exports}function requireDecorators(){var t,e;return hasRequiredDecorators||(hasRequiredDecorators=1,decorators.__esModule=!0,decorators.registerDefaultDecorators=function(e){t.default(e)},t=(e=requireInline())&&e.__esModule?e:{default:e}),decorators}function requireLogger(){var e,t,r,a;return hasRequiredLogger||(hasRequiredLogger=1,(t=(e=logger).exports).__esModule=!0,r=requireUtils(),a={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){var t;return"string"==typeof e?0<=(t=r.indexOf(a.methodMap,e.toLowerCase()))?t:parseInt(e,10):e},log:function(e){if(e=a.lookupLevel(e),"undefined"!=typeof console&&a.lookupLevel(a.level)<=e){e=a.methodMap[e];console[e]||(e="log");for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];console[e].apply(console,r)}}},t.default=a,e.exports=t.default),logger.exports}function requireCreateNewLookupObject(){var n;return hasRequiredCreateNewLookupObject||(hasRequiredCreateNewLookupObject=1,createNewLookupObject.__esModule=!0,createNewLookupObject.createNewLookupObject=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.extend.apply(void 0,[Object.create(null)].concat(t))},n=requireUtils()),createNewLookupObject}function requireProtoAccess(){var n,a,e,o;return hasRequiredProtoAccess||(hasRequiredProtoAccess=1,protoAccess.__esModule=!0,protoAccess.createProtoAccessControl=function(e){var t=Object.create(null),r=(t.constructor=!1,t.__defineGetter__=!1,t.__defineSetter__=!1,t.__lookupGetter__=!1,Object.create(null));return r.__proto__=!1,{properties:{whitelist:n.createNewLookupObject(r,e.allowedProtoProperties),defaultValue:e.allowProtoPropertiesByDefault},methods:{whitelist:n.createNewLookupObject(t,e.allowedProtoMethods),defaultValue:e.allowProtoMethodsByDefault}}},protoAccess.resultIsAllowed=function(e,t,r){return void 0!==(e="function"==typeof e?t.methods:t.properties).whitelist[t=r]?!0===e.whitelist[t]:void 0!==e.defaultValue?e.defaultValue:(!0!==o[e=t]&&(o[e]=!0,a.default.log("error",'Handlebars: Access has been denied to resolve the property "'+e+'" because it is not an "own property" of its parent.\nYou can add a runtime option to disable the check or this warning:\nSee https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details')),!1)},protoAccess.resetLoggedProperties=function(){Object.keys(o).forEach(function(e){delete o[e]})},n=requireCreateNewLookupObject(),a=(e=requireLogger())&&e.__esModule?e:{default:e},o=Object.create(null)),protoAccess}function requireBase$1(){function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function HandlebarsEnvironment(e,t,r){this.helpers=e||{},this.partials=t||{},this.decorators=r||{},a.registerDefaultHelpers(this),o.registerDefaultDecorators(this)}var r,n,a,o,e,t,i;return hasRequiredBase$1||(hasRequiredBase$1=1,base$1.__esModule=!0,base$1.HandlebarsEnvironment=HandlebarsEnvironment,r=requireUtils(),n=_interopRequireDefault(requireException()),a=requireHelpers$1(),o=requireDecorators(),e=_interopRequireDefault(requireLogger()),t=requireProtoAccess(),base$1.VERSION="4.7.8",base$1.COMPILER_REVISION=8,base$1.LAST_COMPATIBLE_COMPILER_REVISION=7,base$1.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"},i="[object Object]",HandlebarsEnvironment.prototype={constructor:HandlebarsEnvironment,logger:e.default,log:e.default.log,registerHelper:function(e,t){if(r.toString.call(e)===i){if(t)throw new n.default("Arg not supported with multiple helpers");r.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(r.toString.call(e)===i)r.extend(this.partials,e);else{if(void 0===t)throw new n.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if(r.toString.call(e)===i){if(t)throw new n.default("Arg not supported with multiple decorators");r.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]},resetLoggedPropertyAccesses:function(){t.resetLoggedProperties()}},base$1.log=e.default.log,base$1.createFrame=r.createFrame,base$1.logger=e.default),base$1}function requireSafeString(){function SafeString(e){this.string=e}var e,t;return hasRequiredSafeString||(hasRequiredSafeString=1,(t=(e=safeString).exports).__esModule=!0,SafeString.prototype.toString=SafeString.prototype.toHTML=function(){return""+this.string},t.default=SafeString,e.exports=t.default),safeString.exports}function requireWrapHelper(){return hasRequiredWrapHelper||(hasRequiredWrapHelper=1,wrapHelper.__esModule=!0,wrapHelper.wrapHelper=function(t,r){return"function"!=typeof t?t:function(){var e=arguments[arguments.length-1];return arguments[arguments.length-1]=r(e),t.apply(this,arguments)}}),wrapHelper}function requireRuntime(){function wrapProgram(n,e,a,o,t,i,s){function prog(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=s;return!s||e==s[0]||e===n.nullContext&&null===s[0]||(r=[e].concat(s)),a(n,e,n.helpers,n.partials,t.data||o,i&&[t.blockParams].concat(i),r)}return(prog=executeDecorators(a,prog,n,s,o,i)).program=e,prog.depth=s?s.length:0,prog.blockParams=t||0,prog}function noop(){return""}function executeDecorators(e,t,r,n,a,o){return e.decorator&&(t=e.decorator(t,e={},r,n&&n[0],a,o,n),c.extend(t,e)),t}var c,p,e,h,o,i,d;return hasRequiredRuntime||(hasRequiredRuntime=1,runtime.__esModule=!0,runtime.checkRevision=function(e){var t=e&&e[0]||1,r=h.COMPILER_REVISION;if(!(h.LAST_COMPATIBLE_COMPILER_REVISION<=t&&t<=h.COMPILER_REVISION))throw new p.default(t<h.LAST_COMPATIBLE_COMPILER_REVISION?"Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+h.REVISION_CHANGES[r]+") or downgrade your runtime to an older version ("+h.REVISION_CHANGES[t]+").":"Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")},runtime.template=function(l,u){function ret(e){function main(e){return""+l.main(s,e,s.helpers,s.partials,a,i,o)}var t,r,n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=n.data,o=(ret._setup(n),void(!n.partial&&l.useData&&(t=e,(r=a)&&"root"in r||((r=r?h.createFrame(r):{}).root=t),a=r))),i=l.useBlockParams?[]:void 0;return l.useDepths&&(o=n.depths?e!=n.depths[0]?[e].concat(n.depths):n.depths:[e]),(main=executeDecorators(l.main,main,s,n.depths||[],a,i))(e,n)}if(!u)throw new p.default("No environment passed to template");if(!l||!l.main)throw new p.default("Unknown template object: "+typeof l);l.main.decorator=l.main_d,u.VM.checkRevision(l.compiler);var a=l.compiler&&7===l.compiler[0],s={strict:function(e,t,r){if(e&&t in e)return s.lookupProperty(e,t);throw new p.default('"'+t+'" not defined in '+e,{loc:r})},lookupProperty:function(e,t){var r=e[t];return null==r||Object.prototype.hasOwnProperty.call(e,t)||d.resultIsAllowed(r,s.protoAccessControl,t)?r:void 0},lookup:function(e,t){for(var r=e.length,n=0;n<r;n++)if(null!=(e[n]&&s.lookupProperty(e[n],t)))return e[n][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:c.escapeExpression,invokePartial:function(e,t,r){r.hash&&(t=c.extend({},t,r.hash),r.ids)&&(r.ids[0]=!0),e=u.VM.resolvePartial.call(this,e,t,r);var n=c.extend({},r,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),a=u.VM.invokePartial.call(this,e,t,n);if(null==a&&u.compile&&(r.partials[r.name]=u.compile(e,l.compilerOptions,u),a=r.partials[r.name](t,n)),null==a)throw new p.default("The partial "+r.name+" could not be compiled when running in runtime-only mode");if(r.indent){for(var o=a.split("\n"),i=0,s=o.length;i<s&&(o[i]||i+1!==s);i++)o[i]=r.indent+o[i];a=o.join("\n")}return a},fn:function(e){var t=l[e];return t.decorator=l[e+"_d"],t},programs:[],program:function(e,t,r,n,a){var o=this.programs[e],i=this.fn(e);return t||a||n||r?wrapProgram(this,e,i,t,r,n,a):o||(this.programs[e]=wrapProgram(this,e,i))},data:function(e,t){for(;e&&t--;)e=e._parent;return e},mergeIfNeeded:function(e,t){var r=e||t;return e&&t&&e!==t?c.extend({},t,e):r},nullContext:Object.seal({}),noop:u.VM.noop,compilerInfo:l.compiler};return ret.isTop=!0,ret._setup=function(e){var t,r,n;e.partial?(s.protoAccessControl=e.protoAccessControl,s.helpers=e.helpers,s.partials=e.partials,s.decorators=e.decorators,s.hooks=e.hooks):(t=c.extend({},u.helpers,e.helpers),r=t,n=s,Object.keys(r).forEach(function(e){var t;r[e]=(t=n.lookupProperty,i.wrapHelper(r[e],function(e){return c.extend({lookupProperty:t},e)}))}),s.helpers=t,l.usePartial&&(s.partials=s.mergeIfNeeded(e.partials,u.partials)),(l.usePartial||l.useDecorators)&&(s.decorators=c.extend({},u.decorators,e.decorators)),s.hooks={},s.protoAccessControl=d.createProtoAccessControl(e),o.moveHelperToHooks(s,"helperMissing",t=e.allowCallsToHelperMissing||a),o.moveHelperToHooks(s,"blockHelperMissing",t))},ret._child=function(e,t,r,n){if(l.useBlockParams&&!r)throw new p.default("must pass block params");if(l.useDepths&&!n)throw new p.default("must pass parent depths");return wrapProgram(s,e,l[e],t,0,r,n)},ret},runtime.wrapProgram=wrapProgram,runtime.resolvePartial=function(e,t,r){return e?e.call||r.name||(r.name=e,e=r.partials[e]):e="@partial-block"===r.name?r.data["partial-block"]:r.partials[r.name],e},runtime.invokePartial=function(e,t,r){var n,a=r.data&&r.data["partial-block"],o=(r.partial=!0,void(r.ids&&(r.data.contextPath=r.ids[0]||r.data.contextPath)));if(r.fn&&r.fn!==noop&&(r.data=h.createFrame(r.data),n=r.fn,o=r.data["partial-block"]=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return t.data=h.createFrame(t.data),t.data["partial-block"]=a,n(e,t)},n.partials)&&(r.partials=c.extend({},r.partials,n.partials)),void 0===(e=void 0===e&&o?o:e))throw new p.default("The partial "+r.name+" could not be found");if(e instanceof Function)return e(t,r)},runtime.noop=noop,c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(requireUtils()),p=(e=requireException())&&e.__esModule?e:{default:e},h=requireBase$1(),o=requireHelpers$1(),i=requireWrapHelper(),d=requireProtoAccess()),runtime}function requireNoConflict(){var e,t;return hasRequiredNoConflict||(hasRequiredNoConflict=1,(t=(e=noConflict).exports).__esModule=!0,t.default=function(e){"object"!=typeof globalThis&&(Object.prototype.__defineGetter__("__magic__",function(){return this}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__);var t=globalThis.Handlebars;e.noConflict=function(){return globalThis.Handlebars===e&&(globalThis.Handlebars=t),e}},e.exports=t.default),noConflict.exports}function requireHandlebars_runtime(){function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function create(){var t=new r.HandlebarsEnvironment;return o.extend(t,r),t.SafeString=n.default,t.Exception=a.default,t.Utils=o,t.escapeExpression=o.escapeExpression,t.VM=i,t.template=function(e){return i.template(e,t)},t}var e,t,r,n,a,o,i,s,l;return hasRequiredHandlebars_runtime||(hasRequiredHandlebars_runtime=1,(t=(e=handlebars_runtime).exports).__esModule=!0,r=_interopRequireWildcard(requireBase$1()),n=_interopRequireDefault(requireSafeString()),a=_interopRequireDefault(requireException()),o=_interopRequireWildcard(requireUtils()),i=_interopRequireWildcard(requireRuntime()),s=_interopRequireDefault(requireNoConflict()),(l=create()).create=create,s.default(l),t.default=l.default=l,e.exports=t.default),handlebars_runtime.exports}function requireAst(){var e,t,r;return hasRequiredAst||(hasRequiredAst=1,(t=(e=ast).exports).__esModule=!0,r={helpers:{helperExpression:function(e){return"SubExpression"===e.type||("MustacheStatement"===e.type||"BlockStatement"===e.type)&&!!(e.params&&e.params.length||e.hash)},scopedId:function(e){return/^\.|this\b/.test(e.original)},simpleId:function(e){return 1===e.parts.length&&!r.helpers.scopedId(e)&&!e.depth}}},t.default=r,e.exports=t.default),ast.exports}function requireParser(){function Parser(){this.yy={}}var e,t,r;return hasRequiredParser||((r={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:hasRequiredParser=1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,0],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(e,t,r,n,a,o,i){var s=o.length-1;switch(a){case 1:return o[s-1];case 2:this.$=n.prepareProgram(o[s]);break;case 3:case 4:case 5:case 6:case 7:case 8:this.$=o[s];break;case 9:this.$={type:"CommentStatement",value:n.stripComment(o[s]),strip:n.stripFlags(o[s],o[s]),loc:n.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:o[s],value:o[s],loc:n.locInfo(this._$)};break;case 11:this.$=n.prepareRawBlock(o[s-2],o[s-1],o[s],this._$);break;case 12:this.$={path:o[s-3],params:o[s-2],hash:o[s-1]};break;case 13:this.$=n.prepareBlock(o[s-3],o[s-2],o[s-1],o[s],!1,this._$);break;case 14:this.$=n.prepareBlock(o[s-3],o[s-2],o[s-1],o[s],!0,this._$);break;case 15:this.$={open:o[s-5],path:o[s-4],params:o[s-3],hash:o[s-2],blockParams:o[s-1],strip:n.stripFlags(o[s-5],o[s])};break;case 16:case 17:this.$={path:o[s-4],params:o[s-3],hash:o[s-2],blockParams:o[s-1],strip:n.stripFlags(o[s-5],o[s])};break;case 18:this.$={strip:n.stripFlags(o[s-1],o[s-1]),program:o[s]};break;case 19:var l=n.prepareBlock(o[s-2],o[s-1],o[s],o[s],!1,this._$),l=n.prepareProgram([l],o[s-1].loc);l.chained=!0,this.$={strip:o[s-2].strip,program:l,chain:!0};break;case 20:this.$=o[s];break;case 21:this.$={path:o[s-1],strip:n.stripFlags(o[s-2],o[s])};break;case 22:case 23:this.$=n.prepareMustache(o[s-3],o[s-2],o[s-1],o[s-4],n.stripFlags(o[s-4],o[s]),this._$);break;case 24:this.$={type:"PartialStatement",name:o[s-3],params:o[s-2],hash:o[s-1],indent:"",strip:n.stripFlags(o[s-4],o[s]),loc:n.locInfo(this._$)};break;case 25:this.$=n.preparePartialBlock(o[s-2],o[s-1],o[s],this._$);break;case 26:this.$={path:o[s-3],params:o[s-2],hash:o[s-1],strip:n.stripFlags(o[s-4],o[s])};break;case 27:case 28:this.$=o[s];break;case 29:this.$={type:"SubExpression",path:o[s-3],params:o[s-2],hash:o[s-1],loc:n.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:o[s],loc:n.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:n.id(o[s-2]),value:o[s],loc:n.locInfo(this._$)};break;case 32:this.$=n.id(o[s-1]);break;case 33:case 34:this.$=o[s];break;case 35:this.$={type:"StringLiteral",value:o[s],original:o[s],loc:n.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(o[s]),original:Number(o[s]),loc:n.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===o[s],original:"true"===o[s],loc:n.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:n.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:n.locInfo(this._$)};break;case 40:case 41:this.$=o[s];break;case 42:this.$=n.preparePath(!0,o[s],this._$);break;case 43:this.$=n.preparePath(!1,o[s],this._$);break;case 44:o[s-2].push({part:n.id(o[s]),original:o[s],separator:o[s-1]}),this.$=o[s-2];break;case 45:this.$=[{part:n.id(o[s]),original:o[s]}];break;case 46:this.$=[];break;case 47:o[s-1].push(o[s]);break;case 48:this.$=[];break;case 49:o[s-1].push(o[s]);break;case 50:this.$=[];break;case 51:o[s-1].push(o[s]);break;case 58:this.$=[];break;case 59:o[s-1].push(o[s]);break;case 64:this.$=[];break;case 65:o[s-1].push(o[s]);break;case 70:this.$=[];break;case 71:o[s-1].push(o[s]);break;case 78:this.$=[];break;case 79:o[s-1].push(o[s]);break;case 82:this.$=[];break;case 83:o[s-1].push(o[s]);break;case 86:this.$=[];break;case 87:o[s-1].push(o[s]);break;case 90:this.$=[];break;case 91:o[s-1].push(o[s]);break;case 94:this.$=[];break;case 95:o[s-1].push(o[s]);break;case 98:this.$=[o[s]];break;case 99:o[s-1].push(o[s]);break;case 100:this.$=[o[s]];break;case 101:o[s-1].push(o[s])}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{15:[2,48],17:39,18:[2,48]},{20:41,56:40,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:44,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:45,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:41,56:48,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:49,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,50]},{72:[1,35],86:51},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:52,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:53,38:55,39:[1,57],43:56,44:[1,58],45:54,47:[2,54]},{28:59,43:60,44:[1,58],47:[2,56]},{13:62,15:[1,20],18:[1,61]},{33:[2,86],57:63,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:64,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:65,47:[1,66]},{30:67,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:68,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:69,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:70,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:74,33:[2,80],50:71,63:72,64:75,65:[1,43],69:73,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,79]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,50]},{20:74,53:80,54:[2,84],63:81,64:75,65:[1,43],69:82,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:83,47:[1,66]},{47:[2,55]},{4:84,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:85,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:86,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:87,47:[1,66]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:74,33:[2,88],58:88,63:89,64:75,65:[1,43],69:90,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:91,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:92,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,31:93,33:[2,60],63:94,64:75,65:[1,43],69:95,70:76,71:77,72:[1,78],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,66],36:96,63:97,64:75,65:[1,43],69:98,70:76,71:77,72:[1,78],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,22:99,23:[2,52],63:100,64:75,65:[1,43],69:101,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,92],62:102,63:103,64:75,65:[1,43],69:104,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,105]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:106,72:[1,107],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,108],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,109]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:55,39:[1,57],43:56,44:[1,58],45:111,46:110,47:[2,76]},{33:[2,70],40:112,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,113]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:74,63:115,64:75,65:[1,43],67:114,68:[2,96],69:116,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,117]},{32:118,33:[2,62],74:119,75:[1,120]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:121,74:122,75:[1,120]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,123]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,124]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,108]},{20:74,63:125,64:75,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:74,33:[2,72],41:126,63:127,64:75,65:[1,43],69:128,70:76,71:77,72:[1,78],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,129]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,130]},{33:[2,63]},{72:[1,132],76:131},{33:[1,133]},{33:[2,69]},{15:[2,12],18:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:134,74:135,75:[1,120]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,137],77:[1,136]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,138]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],54:[2,55],56:[2,20],60:[2,57],73:[2,81],82:[2,85],86:[2,18],90:[2,89],101:[2,53],104:[2,93],110:[2,19],111:[2,77],116:[2,97],119:[2,63],122:[2,69],135:[2,75],136:[2,32]},parseError:function(e,t){throw new Error(e)},parse:function(e){var t=[0],r=[null],n=[],a=this.table,o="",i=0,s=0,l=(this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,void 0===(this.yy.parser=this).lexer.yylloc&&(this.lexer.yylloc={}),this.lexer.yylloc),u=(n.push(l),this.lexer.options&&this.lexer.options.ranges);"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var c,p,h,d,g,f,m={};;){if(void 0===(h=this.defaultActions[p=t[t.length-1]]||(null==c&&(c="number"!=typeof(b=this.lexer.lex()||1)&&this.symbols_[b]||b),a[p]&&a[p][c]))||!h.length||!h[0]){var b,E=[];for(g in a[p])this.terminals_[g]&&2<g&&E.push("'"+this.terminals_[g]+"'");b=this.lexer.showPosition?"Parse error on line "+(i+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+E.join(", ")+", got '"+(this.terminals_[c]||c)+"'":"Parse error on line "+(i+1)+": Unexpected "+(1==c?"end of input":"'"+(this.terminals_[c]||c)+"'"),this.parseError(b,{text:this.lexer.match,token:this.terminals_[c]||c,line:this.lexer.yylineno,loc:l,expected:E})}if(h[0]instanceof Array&&1<h.length)throw new Error("Parse Error: multiple actions possible at state: "+p+", token: "+c);switch(h[0]){case 1:t.push(c),r.push(this.lexer.yytext),n.push(this.lexer.yylloc),t.push(h[1]),c=null,s=this.lexer.yyleng,o=this.lexer.yytext,i=this.lexer.yylineno,l=this.lexer.yylloc;break;case 2:if(m.$=r[r.length-(f=this.productions_[h[1]][1])],m._$={first_line:n[n.length-(f||1)].first_line,last_line:n[n.length-1].last_line,first_column:n[n.length-(f||1)].first_column,last_column:n[n.length-1].last_column},u&&(m._$.range=[n[n.length-(f||1)].range[0],n[n.length-1].range[1]]),void 0!==(d=this.performAction.call(m,o,s,i,this.yy,h[1],r,n)))return d;f&&(t=t.slice(0,-1*f*2),r=r.slice(0,-1*f),n=n.slice(0,-1*f)),t.push(this.productions_[h[1]][0]),r.push(m.$),n.push(m._$),t.push(a[t[t.length-2]][t[t.length-1]]);break;case 3:return!0}}return!0}}).lexer={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,r=e.split(/(?:\r\n?|\n)/g),e=(this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t,this.match.split(/(?:\r\n?|\n)/g)),n=(this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1),this.yylloc.range);return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===e.length?this.yylloc.first_column:0)+e[e.length-r.length].length-r[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[n[0],n[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(20<e.length?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(20<e.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var e,t,r,n,a=this._currentRules(),o=0;o<a.length&&(!(t=this._input.match(this.rules[a[o]]))||e&&!(e[0].length<t[0].length)||(e=t,r=o,this.options.flex));o++);return e?((n=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],n=this.performAction.call(this,this.yy,this,a[r],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return void 0!==e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)},options:{},performAction:function(e,r,t,n){function strip(e,t){return r.yytext=r.yytext.substring(e,r.yyleng-t+e)}switch(t){case 0:if("\\\\"===r.yytext.slice(-2)?(strip(0,1),this.begin("mu")):"\\"===r.yytext.slice(-1)?(strip(0,1),this.begin("emu")):this.begin("mu"),r.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(strip(5,9),"END_RAW_BLOCK");case 5:return 15;case 6:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:return 48;case 21:this.unput(r.yytext),this.popState(),this.begin("com");break;case 22:return this.popState(),14;case 23:return 48;case 24:return 73;case 25:case 26:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return r.yytext=strip(1,2).replace(/\\"/g,'"'),80;case 32:return r.yytext=strip(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 41:return 72;case 42:return r.yytext=r.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]+?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!((t=(e=parser).exports).__esModule=!0)},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}}},r=new((Parser.prototype=r).Parser=Parser),t.default=r,e.exports=t.default),parser.exports}function requireVisitor(){function Visitor(){this.parents=[]}function visitSubExpression(e){this.acceptRequired(e,"path"),this.acceptArray(e.params),this.acceptKey(e,"hash")}function visitBlock(e){visitSubExpression.call(this,e),this.acceptKey(e,"program"),this.acceptKey(e,"inverse")}function visitPartial(e){this.acceptRequired(e,"name"),this.acceptArray(e.params),this.acceptKey(e,"hash")}var e,t,n;return hasRequiredVisitor||(hasRequiredVisitor=1,n=(t=requireException())&&t.__esModule?t:{default:t},Visitor.prototype={constructor:Visitor,mutating:!((e=(t=visitor).exports).__esModule=!0),acceptKey:function(e,t){var r=this.accept(e[t]);if(this.mutating){if(r&&!Visitor.prototype[r.type])throw new n.default('Unexpected node type "'+r.type+'" found when accepting '+t+" on "+e.type);e[t]=r}},acceptRequired:function(e,t){if(this.acceptKey(e,t),!e[t])throw new n.default(e.type+" requires "+t)},acceptArray:function(e){for(var t=0,r=e.length;t<r;t++)this.acceptKey(e,t),e[t]||(e.splice(t,1),t--,r--)},accept:function(e){if(e){if(!this[e.type])throw new n.default("Unknown type: "+e.type,e);this.current&&this.parents.unshift(this.current),this.current=e;var t=this[e.type](e);return this.current=this.parents.shift(),!this.mutating||t?t:!1!==t?e:void 0}},Program:function(e){this.acceptArray(e.body)},MustacheStatement:visitSubExpression,Decorator:visitSubExpression,BlockStatement:visitBlock,DecoratorBlock:visitBlock,PartialStatement:visitPartial,PartialBlockStatement:function(e){visitPartial.call(this,e),this.acceptKey(e,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:visitSubExpression,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(e){this.acceptArray(e.pairs)},HashPair:function(e){this.acceptRequired(e,"value")}},e.default=Visitor,t.exports=e.default),visitor.exports}function requireWhitespaceControl(){function WhitespaceControl(){this.options=arguments.length<=0||void 0===arguments[0]?{}:arguments[0]}function isPrevWhitespace(e,t,r){var n=e[(t=void 0===t?e.length:t)-1];return n?"ContentStatement"===n.type?(e[t-2]||!r?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(n.original):void 0:r}function isNextWhitespace(e,t,r){var n=e[(t=void 0===t?-1:t)+1];return n?"ContentStatement"===n.type?(e[t+2]||!r?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(n.original):void 0:r}function omitRight(e,t,r){e=e[null==t?0:t+1];!e||"ContentStatement"!==e.type||!r&&e.rightStripped||(e.value=(t=e.value).replace(r?/^\s+/:/^[ \t]*\r?\n?/,""),e.rightStripped=e.value!==t)}function omitLeft(e,t,r){e=e[null==t?e.length-1:t-1];return e&&"ContentStatement"===e.type&&(r||!e.leftStripped)&&(e.value=(t=e.value).replace(r?/\s+$/:/[ \t]+$/,""),e.leftStripped=e.value!==t,e.leftStripped)}var e,t,r;return hasRequiredWhitespaceControl||(hasRequiredWhitespaceControl=1,(t=(e=whitespaceControl).exports).__esModule=!0,r=(r=requireVisitor())&&r.__esModule?r:{default:r},(WhitespaceControl.prototype=new r.default).Program=function(e){for(var t=!this.options.ignoreStandalone,r=!this.isRootSeen,n=(this.isRootSeen=!0,e.body),a=0,o=n.length;a<o;a++){var i,s,l,u,c=n[a],p=this.accept(c);p&&(u=isPrevWhitespace(n,a,r),i=isNextWhitespace(n,a,r),s=p.openStandalone&&u,l=p.closeStandalone&&i,u=p.inlineStandalone&&u&&i,p.close&&omitRight(n,a,!0),p.open&&omitLeft(n,a,!0),t&&u&&(omitRight(n,a),omitLeft(n,a))&&"PartialStatement"===c.type&&(c.indent=/([ \t]+$)/.exec(n[a-1].original)[1]),t&&s&&(omitRight((c.program||c.inverse).body),omitLeft(n,a)),t)&&l&&(omitRight(n,a),omitLeft((c.inverse||c.program).body))}return e},WhitespaceControl.prototype.BlockStatement=WhitespaceControl.prototype.DecoratorBlock=WhitespaceControl.prototype.PartialBlockStatement=function(e){this.accept(e.program),this.accept(e.inverse);var t=e.program||e.inverse,r=e.program&&e.inverse,n=r,a=r;if(r&&r.chained)for(n=r.body[0].program;a.chained;)a=a.body[a.body.length-1].program;var o={open:e.openStrip.open,close:e.closeStrip.close,openStandalone:isNextWhitespace(t.body),closeStandalone:isPrevWhitespace((n||t).body)};return e.openStrip.close&&omitRight(t.body,null,!0),r?((r=e.inverseStrip).open&&omitLeft(t.body,null,!0),r.close&&omitRight(n.body,null,!0),e.closeStrip.open&&omitLeft(a.body,null,!0),!this.options.ignoreStandalone&&isPrevWhitespace(t.body)&&isNextWhitespace(n.body)&&(omitLeft(t.body),omitRight(n.body))):e.closeStrip.open&&omitLeft(t.body,null,!0),o},WhitespaceControl.prototype.Decorator=WhitespaceControl.prototype.MustacheStatement=function(e){return e.strip},WhitespaceControl.prototype.PartialStatement=WhitespaceControl.prototype.CommentStatement=function(e){e=e.strip||{};return{inlineStandalone:!0,open:e.open,close:e.close}},t.default=WhitespaceControl,e.exports=t.default),whitespaceControl.exports}function requireHelpers(){function validateClose(e,t){if(e.path.original!==(t=t.path?t.path.original:t))throw new u.default(e.path.original+" doesn't match "+t,{loc:e.path.loc})}var u,e;return hasRequiredHelpers||(hasRequiredHelpers=1,helpers.__esModule=!0,helpers.SourceLocation=function(e,t){this.source=e,this.start={line:t.first_line,column:t.first_column},this.end={line:t.last_line,column:t.last_column}},helpers.id=function(e){return/^\[.*\]$/.test(e)?e.substring(1,e.length-1):e},helpers.stripFlags=function(e,t){return{open:"~"===e.charAt(2),close:"~"===t.charAt(t.length-3)}},helpers.stripComment=function(e){return e.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")},helpers.preparePath=function(e,t,r){r=this.locInfo(r);for(var n=e?"@":"",a=[],o=0,i=0,s=t.length;i<s;i++){var l=t[i].part;if(n+=(t[i].separator||"")+l,t[i].original!==l||".."!==l&&"."!==l&&"this"!==l)a.push(l);else{if(0<a.length)throw new u.default("Invalid path: "+n,{loc:r});".."===l&&o++}}return{type:"PathExpression",data:e,depth:o,parts:a,original:n,loc:r}},helpers.prepareMustache=function(e,t,r,n,a,o){var i=n.charAt(3)||n.charAt(2),i="{"!==i&&"&"!==i;return{type:/\*/.test(n)?"Decorator":"MustacheStatement",path:e,params:t,hash:r,escaped:i,strip:a,loc:this.locInfo(o)}},helpers.prepareRawBlock=function(e,t,r,n){return validateClose(e,r),n=this.locInfo(n),{type:"BlockStatement",path:e.path,params:e.params,hash:e.hash,program:{type:"Program",body:t,strip:{},loc:n},openStrip:{},inverseStrip:{},closeStrip:{},loc:n}},helpers.prepareBlock=function(e,t,r,n,a,o){n&&n.path&&validateClose(e,n);var i=/\*/.test(e.open),s=void(t.blockParams=e.blockParams),l=void 0;if(r){if(i)throw new u.default("Unexpected inverse block on decorator",r);r.chain&&(r.program.body[0].closeStrip=n.strip),l=r.strip,s=r.program}return a&&(a=s,s=t,t=a),{type:i?"DecoratorBlock":"BlockStatement",path:e.path,params:e.params,hash:e.hash,program:t,inverse:s,openStrip:e.strip,inverseStrip:l,closeStrip:n&&n.strip,loc:this.locInfo(o)}},helpers.prepareProgram=function(e,t){var r;return{type:"Program",body:e,strip:{},loc:t=!t&&e.length&&(r=e[e.length-1].loc,e=e[0].loc)&&r?{source:e.source,start:{line:e.start.line,column:e.start.column},end:{line:r.end.line,column:r.end.column}}:t}},helpers.preparePartialBlock=function(e,t,r,n){return validateClose(e,r),{type:"PartialBlockStatement",name:e.path,params:e.params,hash:e.hash,program:t,openStrip:e.strip,closeStrip:r&&r.strip,loc:this.locInfo(n)}},u=(e=requireException())&&e.__esModule?e:{default:e}),helpers}function requireBase(){function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function parseWithoutProcessing(e,t){return"Program"===e.type?e:((r.default.yy=a).locInfo=function(e){return new a.SourceLocation(t&&t.srcName,e)},r.default.parse(e))}var r,n,e,t,a;return hasRequiredBase||(hasRequiredBase=1,base.__esModule=!0,base.parseWithoutProcessing=parseWithoutProcessing,base.parse=function(e,t){e=parseWithoutProcessing(e,t);return new n.default(t).accept(e)},r=_interopRequireDefault(requireParser()),n=_interopRequireDefault(requireWhitespaceControl()),e=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(requireHelpers()),t=requireUtils(),base.parser=r.default,a={},t.extend(a,e)),base}function requireCompiler(){function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function Compiler(){}function transformLiteralToPath(e){e.path.parts||(e.path={type:"PathExpression",data:!1,depth:0,parts:[(e=e.path).original+""],original:e.original+"",loc:e.loc})}var o,i,a,t;return hasRequiredCompiler||(hasRequiredCompiler=1,compiler.__esModule=!0,compiler.Compiler=Compiler,compiler.precompile=function(e,t,r){if(null==e||"string"!=typeof e&&"Program"!==e.type)throw new o.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);"data"in(t=t||{})||(t.data=!0),t.compat&&(t.useDepths=!0);e=r.parse(e,t),e=(new r.Compiler).compile(e,t);return(new r.JavaScriptCompiler).compile(e,t)},compiler.compile=function(t,r,n){function compileInput(){var e=n.parse(t,r),e=(new n.Compiler).compile(e,r),e=(new n.JavaScriptCompiler).compile(e,r,void 0,!0);return n.template(e)}function ret(e,t){return(a=a||compileInput()).call(this,e,t)}if(void 0===r&&(r={}),null==t||"string"!=typeof t&&"Program"!==t.type)throw new o.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);"data"in(r=i.extend({},r))||(r.data=!0),r.compat&&(r.useDepths=!0);var a=void 0;return ret._setup=function(e){return(a=a||compileInput())._setup(e)},ret._child=function(e,t,r,n){return(a=a||compileInput())._child(e,t,r,n)},ret},o=_interopRequireDefault(requireException()),i=requireUtils(),a=_interopRequireDefault(requireAst()),t=[].slice,Compiler.prototype={compiler:Compiler,equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var r=0;r<t;r++){var n=this.opcodes[r],a=e.opcodes[r];if(n.opcode!==a.opcode||!function argEquals(e,t){if(e===t)return 1;if(i.isArray(e)&&i.isArray(t)&&e.length===t.length){for(var r=0;r<e.length;r++)if(!argEquals(e[r],t[r]))return;return 1}}(n.args,a.args))return!1}for(t=this.children.length,r=0;r<t;r++)if(!this.children[r].equals(e.children[r]))return!1;return!0},guid:0,compile:function(e,t){return this.sourceNode=[],this.opcodes=[],this.children=[],this.options=t,this.stringParams=t.stringParams,this.trackIds=t.trackIds,t.blockParams=t.blockParams||[],t.knownHelpers=i.extend(Object.create(null),{helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},t.knownHelpers),this.accept(e)},compileProgram:function(e){var e=(new this.compiler).compile(e,this.options),t=this.guid++;return this.usePartial=this.usePartial||e.usePartial,this.children[t]=e,this.useDepths=this.useDepths||e.useDepths,t},accept:function(e){if(!this[e.type])throw new o.default("Unknown type: "+e.type,e);this.sourceNode.unshift(e);e=this[e.type](e);return this.sourceNode.shift(),e},Program:function(e){this.options.blockParams.unshift(e.blockParams);for(var t=e.body,r=t.length,n=0;n<r;n++)this.accept(t[n]);return this.options.blockParams.shift(),this.isSimple=1===r,this.blockParams=e.blockParams?e.blockParams.length:0,this},BlockStatement:function(e){transformLiteralToPath(e);var t=e.inverse,r=(r=e.program)&&this.compileProgram(r),t=t&&this.compileProgram(t),n=this.classifySexpr(e);"helper"===n?this.helperSexpr(e,r,t):"simple"===n?(this.simpleSexpr(e),this.opcode("pushProgram",r),this.opcode("pushProgram",t),this.opcode("emptyHash"),this.opcode("blockValue",e.path.original)):(this.ambiguousSexpr(e,r,t),this.opcode("pushProgram",r),this.opcode("pushProgram",t),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(e){var t=e.program&&this.compileProgram(e.program),t=this.setupFullMustacheParams(e,t,void 0),e=e.path;this.useDecorators=!0,this.opcode("registerDecorator",t.length,e.original)},PartialStatement:function(e){this.usePartial=!0;var t=e.program&&this.compileProgram(e.program),r=e.params;if(1<r.length)throw new o.default("Unsupported number of partial arguments: "+r.length,e);r.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):r.push({type:"PathExpression",parts:[],depth:0}));var r=e.name.original,n="SubExpression"===e.name.type,t=(n&&this.accept(e.name),this.setupFullMustacheParams(e,t,void 0,!0),e.indent||"");this.options.preventIndent&&t&&(this.opcode("appendContent",t),t=""),this.opcode("invokePartial",n,r,t),this.opcode("append")},PartialBlockStatement:function(e){this.PartialStatement(e)},MustacheStatement:function(e){this.SubExpression(e),this.opcode(e.escaped&&!this.options.noEscape?"appendEscaped":"append")},Decorator:function(e){this.DecoratorBlock(e)},ContentStatement:function(e){e.value&&this.opcode("appendContent",e.value)},CommentStatement:function(){},SubExpression:function(e){transformLiteralToPath(e);var t=this.classifySexpr(e);"simple"===t?this.simpleSexpr(e):"helper"===t?this.helperSexpr(e):this.ambiguousSexpr(e)},ambiguousSexpr:function(e,t,r){var e=e.path,n=e.parts[0],a=null!=t||null!=r;this.opcode("getContext",e.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",r),e.strict=!0,this.accept(e),this.opcode("invokeAmbiguous",n,a)},simpleSexpr:function(e){e=e.path;e.strict=!0,this.accept(e),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,r){var t=this.setupFullMustacheParams(e,t,r),r=e.path,n=r.parts[0];if(this.options.knownHelpers[n])this.opcode("invokeKnownHelper",t.length,n);else{if(this.options.knownHelpersOnly)throw new o.default("You specified knownHelpersOnly, but used the unknown helper "+n,e);r.strict=!0,r.falsy=!0,this.accept(r),this.opcode("invokeHelper",t.length,r.original,a.default.helpers.simpleId(r))}},PathExpression:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0],r=a.default.helpers.scopedId(e),n=!e.depth&&!r&&this.blockParamIndex(t);n?this.opcode("lookupBlockParam",n,e.parts):t?e.data?(this.options.data=!0,this.opcode("lookupData",e.depth,e.parts,e.strict)):this.opcode("lookupOnContext",e.parts,e.falsy,e.strict,r):this.opcode("pushContext")},StringLiteral:function(e){this.opcode("pushString",e.value)},NumberLiteral:function(e){this.opcode("pushLiteral",e.value)},BooleanLiteral:function(e){this.opcode("pushLiteral",e.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(e){var t=e.pairs,r=0,n=t.length;for(this.opcode("pushHash");r<n;r++)this.pushParam(t[r].value);for(;r--;)this.opcode("assignToHash",t[r].key);this.opcode("popHash")},opcode:function(e){this.opcodes.push({opcode:e,args:t.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(e){e&&(this.useDepths=!0)},classifySexpr:function(e){var t=a.default.helpers.simpleId(e.path),r=t&&!!this.blockParamIndex(e.path.parts[0]),n=!r&&a.default.helpers.helperExpression(e),r=!r&&(n||t);return r&&!n&&((t=this.options).knownHelpers[e.path.parts[0]]?n=!0:t.knownHelpersOnly&&(r=!1)),n?"helper":r?"ambiguous":"simple"},pushParams:function(e){for(var t=0,r=e.length;t<r;t++)this.pushParam(e[t])},pushParam:function(e){var t,r,n=null!=e.value?e.value:e.original||"";this.stringParams?(n.replace&&(n=n.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",n,e.type),"SubExpression"===e.type&&this.accept(e)):(this.trackIds&&((t=!e.parts||a.default.helpers.scopedId(e)||e.depth?void 0:this.blockParamIndex(e.parts[0]))?(r=e.parts.slice(1).join("."),this.opcode("pushId","BlockParam",t,r)):((n=e.original||n).replace&&(n=n.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",e.type,n))),this.accept(e))},setupFullMustacheParams:function(e,t,r,n){var a=e.params;return this.pushParams(a),this.opcode("pushProgram",t),this.opcode("pushProgram",r),e.hash?this.accept(e.hash):this.opcode("emptyHash",n),a},blockParamIndex:function(e){for(var t=0,r=this.options.blockParams.length;t<r;t++){var n=this.options.blockParams[t],a=n&&i.indexOf(n,e);if(n&&0<=a)return[t,a]}}}),compiler}function requireBase64(){var t;return hasRequiredBase64||(hasRequiredBase64=1,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),base64.encode=function(e){if(0<=e&&e<t.length)return t[e];throw new TypeError("Must be between 0 and 63: "+e)},base64.decode=function(e){return 65<=e&&e<=90?e-65:97<=e&&e<=122?e-97+26:48<=e&&e<=57?e-48+52:43==e?62:47==e?63:-1}),base64}function requireBase64Vlq(){var u;return hasRequiredBase64Vlq||(hasRequiredBase64Vlq=1,u=requireBase64(),base64Vlq.encode=function(e){for(var t,r="",n=e<0?1+(-e<<1):e<<1;t=31&n,0<(n>>>=5)&&(t|=32),r+=u.encode(t),0<n;);return r},base64Vlq.decode=function(e,t,r){var n,a,o,i=e.length,s=0,l=0;do{if(i<=t)throw new Error("Expected more digits in base 64 VLQ value.");if(-1===(a=u.decode(e.charCodeAt(t++))))throw new Error("Invalid base64 digit: "+e.charAt(t-1))}while(n=!!(32&a),s+=(a&=31)<<l,l+=5,n);r.value=(o=s>>1,1==(1&s)?-o:o),r.rest=t}),base64Vlq}function requireUtil(){function urlParse(e){e=e.match(t);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}function urlGenerate(e){var t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}function normalize(e){var t=e,r=urlParse(e);if(r){if(!r.path)return e;t=r.path}for(var n,e=s.isAbsolute(t),a=t.split(/\/+/),o=0,i=a.length-1;0<=i;i--)"."===(n=a[i])?a.splice(i,1):".."===n?o++:0<o&&(""===n?(a.splice(i+1,o),o=0):(a.splice(i,2),o--));return""===(t=a.join("/"))&&(t=e?"/":"."),r?(r.path=t,urlGenerate(r)):t}function join(e,t){""===e&&(e=".");var r=urlParse(t=""===t?".":t),n=urlParse(e);return n&&(e=n.path||"/"),r&&!r.scheme?(n&&(r.scheme=n.scheme),urlGenerate(r)):r||t.match(a)?t:!n||n.host||n.path?(r="/"===t.charAt(0)?t:normalize(e.replace(/\/+$/,"")+"/"+t),n?(n.path=r,urlGenerate(n)):r):(n.host=t,urlGenerate(n))}function identity(e){return e}function isProtoString(e){if(e){var t=e.length;if(!(t<9)&&95===e.charCodeAt(t-1)&&95===e.charCodeAt(t-2)&&111===e.charCodeAt(t-3)&&116===e.charCodeAt(t-4)&&111===e.charCodeAt(t-5)&&114===e.charCodeAt(t-6)&&112===e.charCodeAt(t-7)&&95===e.charCodeAt(t-8)&&95===e.charCodeAt(t-9)){for(var r=t-10;0<=r;r--)if(36!==e.charCodeAt(r))return;return 1}}}function strcmp(e,t){return e===t?0:null===e||null!==t&&t<e?1:-1}var s,t,a,e;return hasRequiredUtil||(hasRequiredUtil=1,(s=util).getArg=function(e,t,r){if(t in e)return e[t];if(3===arguments.length)return r;throw new Error('"'+t+'" is a required argument.')},t=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,a=/^data:.+\,.+$/,s.urlParse=urlParse,s.urlGenerate=urlGenerate,s.normalize=normalize,s.join=join,s.isAbsolute=function(e){return"/"===e.charAt(0)||t.test(e)},s.relative=function(e,t){e=(e=""===e?".":e).replace(/\/$/,"");for(var r=0;0!==t.indexOf(e+"/");){var n=e.lastIndexOf("/");if(n<0)return t;if((e=e.slice(0,n)).match(/^([^\/]+:\/)?\/*$/))return t;++r}return Array(r+1).join("../")+t.substr(e.length+1)},e=!("__proto__"in Object.create(null)),s.toSetString=e?identity:function(e){return isProtoString(e)?"$"+e:e},s.fromSetString=e?identity:function(e){return isProtoString(e)?e.slice(1):e},s.compareByOriginalPositions=function(e,t,r){var n=strcmp(e.source,t.source);return 0!==n||0!=(n=e.originalLine-t.originalLine)||0!=(n=e.originalColumn-t.originalColumn)||r||0!=(n=e.generatedColumn-t.generatedColumn)||0!=(n=e.generatedLine-t.generatedLine)?n:strcmp(e.name,t.name)},s.compareByGeneratedPositionsDeflated=function(e,t,r){var n=e.generatedLine-t.generatedLine;return 0!=n||0!=(n=e.generatedColumn-t.generatedColumn)||r||0!==(n=strcmp(e.source,t.source))||0!=(n=e.originalLine-t.originalLine)||0!=(n=e.originalColumn-t.originalColumn)?n:strcmp(e.name,t.name)},s.compareByGeneratedPositionsInflated=function(e,t){var r=e.generatedLine-t.generatedLine;return 0!=r||0!=(r=e.generatedColumn-t.generatedColumn)||0!==(r=strcmp(e.source,t.source))||0!=(r=e.originalLine-t.originalLine)||0!=(r=e.originalColumn-t.originalColumn)?r:strcmp(e.name,t.name)},s.parseSourceMapInput=function(e){return JSON.parse(e.replace(/^\)]}'[^\n]*\n/,""))},s.computeSourceURL=function(e,t,r){if(t=t||"",e&&("/"!==e[e.length-1]&&"/"!==t[0]&&(e+="/"),t=e+t),r){e=urlParse(r);if(!e)throw new Error("sourceMapURL could not be parsed");e.path&&0<=(r=e.path.lastIndexOf("/"))&&(e.path=e.path.substring(0,r+1)),t=join(urlGenerate(e),t)}return normalize(t)}),util}function requireArraySet(){function ArraySet(){this._array=[],this._set=s?new Map:Object.create(null)}var o,i,s;return hasRequiredArraySet||(hasRequiredArraySet=1,o=requireUtil(),i=Object.prototype.hasOwnProperty,s="undefined"!=typeof Map,ArraySet.fromArray=function(e,t){for(var r=new ArraySet,n=0,a=e.length;n<a;n++)r.add(e[n],t);return r},ArraySet.prototype.size=function(){return s?this._set.size:Object.getOwnPropertyNames(this._set).length},ArraySet.prototype.add=function(e,t){var r=s?e:o.toSetString(e),n=s?this.has(e):i.call(this._set,r),a=this._array.length;n&&!t||this._array.push(e),n||(s?this._set.set(e,a):this._set[r]=a)},ArraySet.prototype.has=function(e){return s?this._set.has(e):(e=o.toSetString(e),i.call(this._set,e))},ArraySet.prototype.indexOf=function(e){if(s){var t=this._set.get(e);if(0<=t)return t}else{t=o.toSetString(e);if(i.call(this._set,t))return this._set[t]}throw new Error('"'+e+'" is not in the set.')},ArraySet.prototype.at=function(e){if(0<=e&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},ArraySet.prototype.toArray=function(){return this._array.slice()},arraySet.ArraySet=ArraySet),arraySet}function requireMappingList(){function MappingList(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}var a;return hasRequiredMappingList||(hasRequiredMappingList=1,a=requireUtil(),MappingList.prototype.unsortedForEach=function(e,t){this._array.forEach(e,t)},MappingList.prototype.add=function(e){var t,r,n;(r=(t=this._last).generatedLine)<(n=e.generatedLine)||n==r&&t.generatedColumn<=e.generatedColumn||a.compareByGeneratedPositionsInflated(t,e)<=0?this._last=e:this._sorted=!1,this._array.push(e)},MappingList.prototype.toArray=function(){return this._sorted||(this._array.sort(a.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},mappingList.MappingList=MappingList),mappingList}function requireSourceMapGenerator(){function SourceMapGenerator(e){this._file=g.getArg(e=e||{},"file",null),this._sourceRoot=g.getArg(e,"sourceRoot",null),this._skipValidation=g.getArg(e,"skipValidation",!1),this._sources=new t,this._names=new t,this._mappings=new r,this._sourcesContents=null}var d,g,t,r;return hasRequiredSourceMapGenerator||(hasRequiredSourceMapGenerator=1,d=requireBase64Vlq(),g=requireUtil(),t=requireArraySet().ArraySet,r=requireMappingList().MappingList,SourceMapGenerator.prototype._version=3,SourceMapGenerator.fromSourceMap=function(r){var n=r.sourceRoot,a=new SourceMapGenerator({file:r.file,sourceRoot:n});return r.eachMapping(function(e){var t={generated:{line:e.generatedLine,column:e.generatedColumn}};null!=e.source&&(t.source=e.source,null!=n&&(t.source=g.relative(n,t.source)),t.original={line:e.originalLine,column:e.originalColumn},null!=e.name)&&(t.name=e.name),a.addMapping(t)}),r.sources.forEach(function(e){var t=e,t=(null!==n&&(t=g.relative(n,e)),a._sources.has(t)||a._sources.add(t),r.sourceContentFor(e));null!=t&&a.setSourceContent(e,t)}),a},SourceMapGenerator.prototype.addMapping=function(e){var t=g.getArg(e,"generated"),r=g.getArg(e,"original",null),n=g.getArg(e,"source",null),e=g.getArg(e,"name",null);this._skipValidation||this._validateMapping(t,r,n,e),null!=n&&(n=String(n),this._sources.has(n)||this._sources.add(n)),null!=e&&(e=String(e),this._names.has(e)||this._names.add(e)),this._mappings.add({generatedLine:t.line,generatedColumn:t.column,originalLine:null!=r&&r.line,originalColumn:null!=r&&r.column,source:n,name:e})},SourceMapGenerator.prototype.setSourceContent=function(e,t){null!=this._sourceRoot&&(e=g.relative(this._sourceRoot,e)),null!=t?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[g.toSetString(e)]=t):this._sourcesContents&&(delete this._sourcesContents[g.toSetString(e)],0===Object.keys(this._sourcesContents).length)&&(this._sourcesContents=null)},SourceMapGenerator.prototype.applySourceMap=function(r,e,n){var a=e;if(null==e){if(null==r.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');a=r.file}var o=this._sourceRoot,i=(null!=o&&(a=g.relative(o,a)),new t),s=new t;this._mappings.unsortedForEach(function(e){e.source===a&&null!=e.originalLine&&null!=(t=r.originalPositionFor({line:e.originalLine,column:e.originalColumn})).source&&(e.source=t.source,null!=n&&(e.source=g.join(n,e.source)),null!=o&&(e.source=g.relative(o,e.source)),e.originalLine=t.line,e.originalColumn=t.column,null!=t.name)&&(e.name=t.name);var t=e.source,t=(null==t||i.has(t)||i.add(t),e.name);null==t||s.has(t)||s.add(t)},this),this._sources=i,this._names=s,r.sources.forEach(function(e){var t=r.sourceContentFor(e);null!=t&&(null!=n&&(e=g.join(n,e)),null!=o&&(e=g.relative(o,e)),this.setSourceContent(e,t))},this)},SourceMapGenerator.prototype._validateMapping=function(e,t,r,n){if(t&&"number"!=typeof t.line&&"number"!=typeof t.column)throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if((!(e&&"line"in e&&"column"in e&&0<e.line&&0<=e.column)||t||r||n)&&!(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&0<e.line&&0<=e.column&&0<t.line&&0<=t.column&&r))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:r,original:t,name:n}))},SourceMapGenerator.prototype._serializeMappings=function(){for(var e,t,r,n=0,a=1,o=0,i=0,s=0,l=0,u="",c=this._mappings.toArray(),p=0,h=c.length;p<h;p++){if(e="",(t=c[p]).generatedLine!==a)for(n=0;t.generatedLine!==a;)e+=";",a++;else if(0<p){if(!g.compareByGeneratedPositionsInflated(t,c[p-1]))continue;e+=","}e+=d.encode(t.generatedColumn-n),n=t.generatedColumn,null!=t.source&&(r=this._sources.indexOf(t.source),e+=d.encode(r-l),l=r,e+=d.encode(t.originalLine-1-i),i=t.originalLine-1,e+=d.encode(t.originalColumn-o),o=t.originalColumn,null!=t.name)&&(r=this._names.indexOf(t.name),e+=d.encode(r-s),s=r),u+=e}return u},SourceMapGenerator.prototype._generateSourcesContent=function(e,t){return e.map(function(e){if(!this._sourcesContents)return null;null!=t&&(e=g.relative(t,e));e=g.toSetString(e);return Object.prototype.hasOwnProperty.call(this._sourcesContents,e)?this._sourcesContents[e]:null},this)},SourceMapGenerator.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return null!=this._file&&(e.file=this._file),null!=this._sourceRoot&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},SourceMapGenerator.prototype.toString=function(){return JSON.stringify(this.toJSON())},sourceMapGenerator.SourceMapGenerator=SourceMapGenerator),sourceMapGenerator}function requireBinarySearch(){var l;return hasRequiredBinarySearch||(hasRequiredBinarySearch=1,(l=binarySearch).GREATEST_LOWER_BOUND=1,l.LEAST_UPPER_BOUND=2,l.search=function(e,t,r,n){if(0===t.length)return-1;var a=function recursiveSearch(e,t,r,n,a,o){var i=Math.floor((t-e)/2)+e,s=a(r,n[i],!0);return 0===s?i:0<s?1<t-i?recursiveSearch(i,t,r,n,a,o):o==l.LEAST_UPPER_BOUND?t<n.length?t:-1:i:1<i-e?recursiveSearch(e,i,r,n,a,o):o==l.LEAST_UPPER_BOUND?i:e<0?-1:e}(-1,t.length,e,t,r,n||l.GREATEST_LOWER_BOUND);if(a<0)return-1;for(;0<=a-1&&0===r(t[a],t[a-1],!0);)--a;return a}),binarySearch}function requireQuickSort(){function swap(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}return hasRequiredQuickSort||(hasRequiredQuickSort=1,quickSort.quickSort=function(e,t){!function doQuickSort(e,t,r,n){if(r<n){for(var a=n,o=(l=r)-1,i=(swap(e,Math.round(l+Math.random()*(a-l)),n),e[n]),s=r;s<n;s++)t(e[s],i)<=0&&swap(e,o+=1,s);swap(e,o+1,s),doQuickSort(e,t,r,(a=o+1)-1),doQuickSort(e,t,a+1,n)}var l}(e,t,0,e.length-1)}),quickSort}function requireSourceMapConsumer(){function SourceMapConsumer(e,t){var r=e;return new(null!=(r="string"==typeof e?E.parseSourceMapInput(e):r).sections?IndexedSourceMapConsumer:BasicSourceMapConsumer)(r,t)}function BasicSourceMapConsumer(e,t){var r=e,e=("string"==typeof e&&(r=E.parseSourceMapInput(e)),E.getArg(r,"version")),n=E.getArg(r,"sources"),a=E.getArg(r,"names",[]),o=E.getArg(r,"sourceRoot",null),i=E.getArg(r,"sourcesContent",null),s=E.getArg(r,"mappings"),r=E.getArg(r,"file",null);if(e!=this._version)throw new Error("Unsupported version: "+e);o=o&&E.normalize(o),n=n.map(String).map(E.normalize).map(function(e){return o&&E.isAbsolute(o)&&E.isAbsolute(e)?E.relative(o,e):e}),this._names=h.fromArray(a.map(String),!0),this._sources=h.fromArray(n,!0),this._absoluteSources=this._sources.toArray().map(function(e){return E.computeSourceURL(o,e,t)}),this.sourceRoot=o,this.sourcesContent=i,this._mappings=s,this._sourceMapURL=t,this.file=r}function Mapping(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function IndexedSourceMapConsumer(e,a){var t=e,e=("string"==typeof e&&(t=E.parseSourceMapInput(e)),E.getArg(t,"version")),t=E.getArg(t,"sections");if(e!=this._version)throw new Error("Unsupported version: "+e);this._sources=new h,this._names=new h;var o={line:-1,column:0};this._sections=t.map(function(e){if(e.url)throw new Error("Support for url field in sections not implemented.");var t=E.getArg(e,"offset"),r=E.getArg(t,"line"),n=E.getArg(t,"column");if(r<o.line||r===o.line&&n<o.column)throw new Error("Section offsets must be ordered and non-overlapping.");return o=t,{generatedOffset:{generatedLine:r+1,generatedColumn:n+1},consumer:new SourceMapConsumer(E.getArg(e,"map"),a)}})}var E,l,h,v,y;return hasRequiredSourceMapConsumer||(hasRequiredSourceMapConsumer=1,E=requireUtil(),l=requireBinarySearch(),h=requireArraySet().ArraySet,v=requireBase64Vlq(),y=requireQuickSort().quickSort,SourceMapConsumer.fromSourceMap=function(e,t){return BasicSourceMapConsumer.fromSourceMap(e,t)},SourceMapConsumer.prototype._version=3,SourceMapConsumer.prototype.__generatedMappings=null,Object.defineProperty(SourceMapConsumer.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}}),SourceMapConsumer.prototype.__originalMappings=null,Object.defineProperty(SourceMapConsumer.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}}),SourceMapConsumer.prototype._charIsMappingSeparator=function(e,t){e=e.charAt(t);return";"===e||","===e},SourceMapConsumer.prototype._parseMappings=function(e,t){throw new Error("Subclasses must implement _parseMappings")},SourceMapConsumer.GENERATED_ORDER=1,SourceMapConsumer.ORIGINAL_ORDER=2,SourceMapConsumer.GREATEST_LOWER_BOUND=1,SourceMapConsumer.LEAST_UPPER_BOUND=2,SourceMapConsumer.prototype.eachMapping=function(e,t,r){var n,t=t||null;switch(r||SourceMapConsumer.GENERATED_ORDER){case SourceMapConsumer.GENERATED_ORDER:n=this._generatedMappings;break;case SourceMapConsumer.ORIGINAL_ORDER:n=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var a=this.sourceRoot;n.map(function(e){var t=null===e.source?null:this._sources.at(e.source);return{source:E.computeSourceURL(a,t,this._sourceMapURL),generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:null===e.name?null:this._names.at(e.name)}},this).forEach(e,t)},SourceMapConsumer.prototype.allGeneratedPositionsFor=function(e){var t=E.getArg(e,"line"),r={source:E.getArg(e,"source"),originalLine:t,originalColumn:E.getArg(e,"column",0)};if(r.source=this._findSourceIndex(r.source),r.source<0)return[];var n=[],a=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",E.compareByOriginalPositions,l.LEAST_UPPER_BOUND);if(0<=a){var o=this._originalMappings[a];if(void 0===e.column)for(var i=o.originalLine;o&&o.originalLine===i;)n.push({line:E.getArg(o,"generatedLine",null),column:E.getArg(o,"generatedColumn",null),lastColumn:E.getArg(o,"lastGeneratedColumn",null)}),o=this._originalMappings[++a];else for(var s=o.originalColumn;o&&o.originalLine===t&&o.originalColumn==s;)n.push({line:E.getArg(o,"generatedLine",null),column:E.getArg(o,"generatedColumn",null),lastColumn:E.getArg(o,"lastGeneratedColumn",null)}),o=this._originalMappings[++a]}return n},sourceMapConsumer.SourceMapConsumer=SourceMapConsumer,(BasicSourceMapConsumer.prototype=Object.create(SourceMapConsumer.prototype)).consumer=SourceMapConsumer,BasicSourceMapConsumer.prototype._findSourceIndex=function(e){var t,r=e;if(null!=this.sourceRoot&&(r=E.relative(this.sourceRoot,r)),this._sources.has(r))return this._sources.indexOf(r);for(t=0;t<this._absoluteSources.length;++t)if(this._absoluteSources[t]==e)return t;return-1},BasicSourceMapConsumer.fromSourceMap=function(e,t){for(var r=Object.create(BasicSourceMapConsumer.prototype),n=r._names=h.fromArray(e._names.toArray(),!0),a=r._sources=h.fromArray(e._sources.toArray(),!0),o=(r.sourceRoot=e._sourceRoot,r.sourcesContent=e._generateSourcesContent(r._sources.toArray(),r.sourceRoot),r.file=e._file,r._sourceMapURL=t,r._absoluteSources=r._sources.toArray().map(function(e){return E.computeSourceURL(r.sourceRoot,e,t)}),e._mappings.toArray().slice()),i=r.__generatedMappings=[],s=r.__originalMappings=[],l=0,u=o.length;l<u;l++){var c=o[l],p=new Mapping;p.generatedLine=c.generatedLine,p.generatedColumn=c.generatedColumn,c.source&&(p.source=a.indexOf(c.source),p.originalLine=c.originalLine,p.originalColumn=c.originalColumn,c.name&&(p.name=n.indexOf(c.name)),s.push(p)),i.push(p)}return y(r.__originalMappings,E.compareByOriginalPositions),r},BasicSourceMapConsumer.prototype._version=3,Object.defineProperty(BasicSourceMapConsumer.prototype,"sources",{get:function(){return this._absoluteSources.slice()}}),BasicSourceMapConsumer.prototype._parseMappings=function(e,t){for(var r,n,a,o,i=1,s=0,l=0,u=0,c=0,p=0,h=e.length,d=0,g={},f={},m=[],b=[];d<h;)if(";"===e.charAt(d))i++,d++,s=0;else if(","===e.charAt(d))d++;else{for((r=new Mapping).generatedLine=i,o=d;o<h&&!this._charIsMappingSeparator(e,o);o++);if(a=g[n=e.slice(d,o)])d+=n.length;else{for(a=[];d<o;)v.decode(e,d,f),d=f.rest,a.push(f.value);if(2===a.length)throw new Error("Found a source, but no line and column");if(3===a.length)throw new Error("Found a source and line, but no column");g[n]=a}r.generatedColumn=s+a[0],s=r.generatedColumn,1<a.length&&(r.source=c+a[1],c+=a[1],r.originalLine=l+a[2],l=r.originalLine,r.originalLine+=1,r.originalColumn=u+a[3],u=r.originalColumn,4<a.length)&&(r.name=p+a[4],p+=a[4]),b.push(r),"number"==typeof r.originalLine&&m.push(r)}y(b,E.compareByGeneratedPositionsDeflated),this.__generatedMappings=b,y(m,E.compareByOriginalPositions),this.__originalMappings=m},BasicSourceMapConsumer.prototype._findMapping=function(e,t,r,n,a,o){if(e[r]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[r]);if(e[n]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[n]);return l.search(e,t,a,o)},BasicSourceMapConsumer.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var t=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var r=this._generatedMappings[e+1];if(t.generatedLine===r.generatedLine){t.lastGeneratedColumn=r.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}},BasicSourceMapConsumer.prototype.originalPositionFor=function(e){var t={generatedLine:E.getArg(e,"line"),generatedColumn:E.getArg(e,"column")},e=this._findMapping(t,this._generatedMappings,"generatedLine","generatedColumn",E.compareByGeneratedPositionsDeflated,E.getArg(e,"bias",SourceMapConsumer.GREATEST_LOWER_BOUND));if(0<=e){var r,e=this._generatedMappings[e];if(e.generatedLine===t.generatedLine)return null!==(t=E.getArg(e,"source",null))&&(t=this._sources.at(t),t=E.computeSourceURL(this.sourceRoot,t,this._sourceMapURL)),null!==(r=E.getArg(e,"name",null))&&(r=this._names.at(r)),{source:t,line:E.getArg(e,"originalLine",null),column:E.getArg(e,"originalColumn",null),name:r}}return{source:null,line:null,column:null,name:null}},BasicSourceMapConsumer.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return null==e})},BasicSourceMapConsumer.prototype.sourceContentFor=function(e,t){if(!this.sourcesContent)return null;var r=this._findSourceIndex(e);if(0<=r)return this.sourcesContent[r];var n,r=e;if(null!=this.sourceRoot&&(r=E.relative(this.sourceRoot,r)),null!=this.sourceRoot&&(n=E.urlParse(this.sourceRoot))){e=r.replace(/^file:\/\//,"");if("file"==n.scheme&&this._sources.has(e))return this.sourcesContent[this._sources.indexOf(e)];if((!n.path||"/"==n.path)&&this._sources.has("/"+r))return this.sourcesContent[this._sources.indexOf("/"+r)]}if(t)return null;throw new Error('"'+r+'" is not in the SourceMap.')},BasicSourceMapConsumer.prototype.generatedPositionFor=function(e){var t=E.getArg(e,"source");if(!((t=this._findSourceIndex(t))<0)){t={source:t,originalLine:E.getArg(e,"line"),originalColumn:E.getArg(e,"column")},e=this._findMapping(t,this._originalMappings,"originalLine","originalColumn",E.compareByOriginalPositions,E.getArg(e,"bias",SourceMapConsumer.GREATEST_LOWER_BOUND));if(0<=e){e=this._originalMappings[e];if(e.source===t.source)return{line:E.getArg(e,"generatedLine",null),column:E.getArg(e,"generatedColumn",null),lastColumn:E.getArg(e,"lastGeneratedColumn",null)}}}return{line:null,column:null,lastColumn:null}},sourceMapConsumer.BasicSourceMapConsumer=BasicSourceMapConsumer,(IndexedSourceMapConsumer.prototype=Object.create(SourceMapConsumer.prototype)).constructor=SourceMapConsumer,IndexedSourceMapConsumer.prototype._version=3,Object.defineProperty(IndexedSourceMapConsumer.prototype,"sources",{get:function(){for(var e=[],t=0;t<this._sections.length;t++)for(var r=0;r<this._sections[t].consumer.sources.length;r++)e.push(this._sections[t].consumer.sources[r]);return e}}),IndexedSourceMapConsumer.prototype.originalPositionFor=function(e){var t={generatedLine:E.getArg(e,"line"),generatedColumn:E.getArg(e,"column")},r=l.search(t,this._sections,function(e,t){return e.generatedLine-t.generatedOffset.generatedLine||e.generatedColumn-t.generatedOffset.generatedColumn}),r=this._sections[r];return r?r.consumer.originalPositionFor({line:t.generatedLine-(r.generatedOffset.generatedLine-1),column:t.generatedColumn-(r.generatedOffset.generatedLine===t.generatedLine?r.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},IndexedSourceMapConsumer.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},IndexedSourceMapConsumer.prototype.sourceContentFor=function(e,t){for(var r=0;r<this._sections.length;r++){var n=this._sections[r].consumer.sourceContentFor(e,!0);if(n)return n}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},IndexedSourceMapConsumer.prototype.generatedPositionFor=function(e){for(var t=0;t<this._sections.length;t++){var r=this._sections[t];if(-1!==r.consumer._findSourceIndex(E.getArg(e,"source"))){var n=r.consumer.generatedPositionFor(e);if(n)return{line:n.line+(r.generatedOffset.generatedLine-1),column:n.column+(r.generatedOffset.generatedLine===n.line?r.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}},IndexedSourceMapConsumer.prototype._parseMappings=function(e,t){this.__generatedMappings=[],this.__originalMappings=[];for(var r=0;r<this._sections.length;r++)for(var n=this._sections[r],a=n.consumer._generatedMappings,o=0;o<a.length;o++){var i=a[o],s=n.consumer._sources.at(i.source),s=E.computeSourceURL(n.consumer.sourceRoot,s,this._sourceMapURL),l=(this._sources.add(s),s=this._sources.indexOf(s),null),s=(i.name&&(l=n.consumer._names.at(i.name),this._names.add(l),l=this._names.indexOf(l)),{source:s,generatedLine:i.generatedLine+(n.generatedOffset.generatedLine-1),generatedColumn:i.generatedColumn+(n.generatedOffset.generatedLine===i.generatedLine?n.generatedOffset.generatedColumn-1:0),originalLine:i.originalLine,originalColumn:i.originalColumn,name:l});this.__generatedMappings.push(s),"number"==typeof s.originalLine&&this.__originalMappings.push(s)}y(this.__generatedMappings,E.compareByGeneratedPositionsDeflated),y(this.__originalMappings,E.compareByOriginalPositions)},sourceMapConsumer.IndexedSourceMapConsumer=IndexedSourceMapConsumer),sourceMapConsumer}function requireSourceNode(){function SourceNode(e,t,r,n,a){this.children=[],this.sourceContents={},this.line=null==e?null:e,this.column=null==t?null:t,this.source=null==r?null:r,this.name=null==a?null:a,this[o]=!0,null!=n&&this.add(n)}var t,c,p,o;return hasRequiredSourceNode||(hasRequiredSourceNode=1,t=requireSourceMapGenerator().SourceMapGenerator,c=requireUtil(),p=/(\r?\n)/,o="$$$isSourceNode$$$",SourceNode.fromStringWithSourceMap=function(e,r,n){function addMappingWithCode(e,t){var r;null===e||void 0===e.source?a.add(t):(r=n?c.join(n,e.source):e.source,a.add(new SourceNode(e.originalLine,e.originalColumn,r,t,e.name)))}function WT(){function getNextLine(){return i<o.length?o[i++]:void 0}return getNextLine()+(getNextLine()||"")}var a=new SourceNode,o=e.split(p),i=0,s=1,l=0,u=null;return r.eachMapping(function(e){if(null!==u){var t;if(!(s<e.generatedLine))return t=(r=o[i]||"").substr(0,e.generatedColumn-l),o[i]=r.substr(e.generatedColumn-l),l=e.generatedColumn,addMappingWithCode(u,t),void(u=e);addMappingWithCode(u,WT()),s++,l=0}for(;s<e.generatedLine;)a.add(WT()),s++;var r;l<e.generatedColumn&&(r=o[i]||"",a.add(r.substr(0,e.generatedColumn)),o[i]=r.substr(e.generatedColumn),l=e.generatedColumn),u=e},this),i<o.length&&(u&&addMappingWithCode(u,WT()),a.add(o.splice(i).join(""))),r.sources.forEach(function(e){var t=r.sourceContentFor(e);null!=t&&(null!=n&&(e=c.join(n,e)),a.setSourceContent(e,t))}),a},SourceNode.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(e){this.add(e)},this);else{if(!e[o]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);e&&this.children.push(e)}return this},SourceNode.prototype.prepend=function(e){if(Array.isArray(e))for(var t=e.length-1;0<=t;t--)this.prepend(e[t]);else{if(!e[o]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);this.children.unshift(e)}return this},SourceNode.prototype.walk=function(e){for(var t,r=0,n=this.children.length;r<n;r++)(t=this.children[r])[o]?t.walk(e):""!==t&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})},SourceNode.prototype.join=function(e){var t,r,n=this.children.length;if(0<n){for(t=[],r=0;r<n-1;r++)t.push(this.children[r]),t.push(e);t.push(this.children[r]),this.children=t}return this},SourceNode.prototype.replaceRight=function(e,t){var r=this.children[this.children.length-1];return r[o]?r.replaceRight(e,t):"string"==typeof r?this.children[this.children.length-1]=r.replace(e,t):this.children.push("".replace(e,t)),this},SourceNode.prototype.setSourceContent=function(e,t){this.sourceContents[c.toSetString(e)]=t},SourceNode.prototype.walkSourceContents=function(e){for(var t=0,r=this.children.length;t<r;t++)this.children[t][o]&&this.children[t].walkSourceContents(e);for(var n=Object.keys(this.sourceContents),t=0,r=n.length;t<r;t++)e(c.fromSetString(n[t]),this.sourceContents[n[t]])},SourceNode.prototype.toString=function(){var t="";return this.walk(function(e){t+=e}),t},SourceNode.prototype.toStringWithSourceMap=function(e){var a={code:"",line:1,column:0},o=new t(e),i=!1,s=null,l=null,u=null,c=null;return this.walk(function(e,t){a.code+=e,null!==t.source&&null!==t.line&&null!==t.column?(s===t.source&&l===t.line&&u===t.column&&c===t.name||o.addMapping({source:t.source,original:{line:t.line,column:t.column},generated:{line:a.line,column:a.column},name:t.name}),s=t.source,l=t.line,u=t.column,c=t.name,i=!0):i&&(o.addMapping({generated:{line:a.line,column:a.column}}),s=null,i=!1);for(var r=0,n=e.length;r<n;r++)10===e.charCodeAt(r)?(a.line++,a.column=0,r+1===n?(s=null,i=!1):i&&o.addMapping({source:t.source,original:{line:t.line,column:t.column},generated:{line:a.line,column:a.column},name:t.name})):a.column++}),this.walkSourceContents(function(e,t){o.setSourceContent(e,t)}),{code:a.code,map:o}},sourceNode.SourceNode=SourceNode),sourceNode}function requireSourceMap(){return hasRequiredSourceMap||(hasRequiredSourceMap=1,sourceMap.SourceMapGenerator=requireSourceMapGenerator().SourceMapGenerator,sourceMap.SourceMapConsumer=requireSourceMapConsumer().SourceMapConsumer,sourceMap.SourceNode=requireSourceNode().SourceNode),sourceMap}function requireCodeGen(){if(!hasRequiredCodeGen){hasRequiredCodeGen=1;var e=codeGen,t=codeGen.exports;function castChunk(e,t,r){if(i.isArray(e)){for(var n=[],a=0,o=e.length;a<o;a++)n.push(t.wrap(e[a],r));return n}return"boolean"==typeof e||"number"==typeof e?e+"":e}function CodeGen(e){this.srcFile=e,this.source=[]}t.__esModule=!0;var i=requireUtils(),r=void 0;try{r=requireSourceMap().SourceNode}catch(e){}r||((r=function(e,t,r,n){this.src="",n&&this.add(n)}).prototype={add:function(e){i.isArray(e)&&(e=e.join("")),this.src+=e},prepend:function(e){i.isArray(e)&&(e=e.join("")),this.src=e+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),CodeGen.prototype={isEmpty:function(){return!this.source.length},prepend:function(e,t){this.source.unshift(this.wrap(e,t))},push:function(e,t){this.source.push(this.wrap(e,t))},merge:function(){var t=this.empty();return this.each(function(e){t.add(["  ",e,"\n"])}),t},each:function(e){for(var t=0,r=this.source.length;t<r;t++)e(this.source[t])},empty:function(){var e=this.currentLocation||{start:{}};return new r(e.start.line,e.start.column,this.srcFile)},wrap:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return e instanceof r?e:(e=castChunk(e,this,t),new r(t.start.line,t.start.column,this.srcFile,e))},functionCall:function(e,t,r){return r=this.generateList(r),this.wrap([e,t?"."+t+"(":"(",r,")"])},quotedString:function(e){return'"'+(e+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(r){var n=this,a=[],e=(Object.keys(r).forEach(function(e){var t=castChunk(r[e],n);"undefined"!==t&&a.push([n.quotedString(e),":",t])}),this.generateList(a));return e.prepend("{"),e.add("}"),e},generateList:function(e){for(var t=this.empty(),r=0,n=e.length;r<n;r++)r&&t.add(","),t.add(castChunk(e[r],this));return t},generateArray:function(e){e=this.generateList(e);return e.prepend("["),e.add("]"),e}},t.default=CodeGen,e.exports=t.default}return codeGen.exports}function requireJavascriptCompiler(){if(!hasRequiredJavascriptCompiler){hasRequiredJavascriptCompiler=1;var e=javascriptCompiler,t=javascriptCompiler.exports;function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function Literal(e){this.value=e}function JavaScriptCompiler(){}var r=requireBase$1(),h=_interopRequireDefault(requireException()),n=requireUtils(),a=_interopRequireDefault(requireCodeGen());JavaScriptCompiler.prototype={nameLookup:function(e,t){return this.internalNameLookup(e,t)},depthedLookup:function(e){return[this.aliasable("container.lookup"),"(depths, ",JSON.stringify(e),")"]},compilerInfo:function(){var e=r.COMPILER_REVISION;return[e,r.REVISION_CHANGES[e]]},appendToBuffer:function(e,t,r){return n.isArray(e)||(e=[e]),e=this.source.wrap(e,t),this.environment.isSimple?["return ",e,";"]:r?["buffer += ",e,";"]:(e.appendToBuffer=!0,e)},initializeBuffer:function(){return this.quotedString("")},internalNameLookup:function(e,t){return this.lookupPropertyFunctionIsUsed=!0,["lookupProperty(",e,",",JSON.stringify(t),")"]},lookupPropertyFunctionIsUsed:!(t.__esModule=!0),compile:function(e,t,r,n){this.environment=e,this.options=t,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!n,this.name=this.environment.name,this.isChild=!!r,this.context=r||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(e,t),this.useDepths=this.useDepths||e.useDepths||e.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||e.useBlockParams;var a,o=e.opcodes,i=void 0,s=void 0,l=void 0;for(s=0,l=o.length;s<l;s++)this.source.currentLocation=(a=o[s]).loc,i=i||a.loc,this[a.opcode].apply(this,a.args);if(this.source.currentLocation=i,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new h.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend(["var decorators = container.decorators, ",this.lookupPropertyFunctionVarDeclaration(),";\n"]),this.decorators.push("return fn;"),n?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));r=this.createFunctionContext(n);if(this.isChild)return r;for(var u={compiler:this.compilerInfo(),main:r},e=(this.decorators&&(u.main_d=this.decorators,u.useDecorators=!0),this.context),c=e.programs,p=e.decorators,s=0,l=c.length;s<l;s++)c[s]&&(u[s]=c[s],p[s])&&(u[s+"_d"]=p[s],u.useDecorators=!0);return this.environment.usePartial&&(u.usePartial=!0),this.options.data&&(u.useData=!0),this.useDepths&&(u.useDepths=!0),this.useBlockParams&&(u.useBlockParams=!0),this.options.compat&&(u.compat=!0),n?u.compilerOptions=this.options:(u.compiler=JSON.stringify(u.compiler),this.source.currentLocation={start:{line:1,column:0}},u=this.objectLiteral(u),t.srcName?(u=u.toStringWithSourceMap({file:t.destName})).map=u.map&&u.map.toString():u=u.toString()),u},preamble:function(){this.lastContext=0,this.source=new a.default(this.options.srcName),this.decorators=new a.default(this.options.srcName)},createFunctionContext:function(e){var r=this,n="",t=this.stackVars.concat(this.registers.list),a=(0<t.length&&(n+=", "+t.join(", ")),0),t=(Object.keys(this.aliases).forEach(function(e){var t=r.aliases[e];t.children&&1<t.referenceCount&&(n+=", alias"+ ++a+"="+e,t.children[0]="alias"+a)}),this.lookupPropertyFunctionIsUsed&&(n+=", "+this.lookupPropertyFunctionVarDeclaration()),["container","depth0","helpers","partials","data"]),o=((this.useBlockParams||this.useDepths)&&t.push("blockParams"),this.useDepths&&t.push("depths"),this.mergeSource(n));return e?(t.push(o),Function.apply(this,t)):this.source.wrap(["function(",t.join(","),") {\n  ",o,"}"])},mergeSource:function(e){var t=this.environment.isSimple,r=!this.forceBuffer,n=void 0,a=void 0,o=void 0,i=void 0;return this.source.each(function(e){e.appendToBuffer?(o?e.prepend("  + "):o=e,i=e):(o&&(a?o.prepend("buffer += "):n=!0,i.add(";"),o=i=void 0),a=!0,t||(r=!1))}),r?o?(o.prepend("return "),i.add(";")):a||this.source.push('return "";'):(e+=", buffer = "+(n?"":this.initializeBuffer()),o?(o.prepend("return buffer + "),i.add(";")):this.source.push("return buffer;")),e&&this.source.prepend("var "+e.substring(2)+(n?"":";\n")),this.source.merge()},lookupPropertyFunctionVarDeclaration:function(){return"\n      lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    }\n    ".trim()},blockValue:function(e){var t=this.aliasable("container.hooks.blockHelperMissing"),r=[this.contextName(0)],e=(this.setupHelperArgs(e,0,r),this.popStack());r.splice(1,0,e),this.push(this.source.functionCall(t,"call",r))},ambiguousBlockValue:function(){var e=this.aliasable("container.hooks.blockHelperMissing"),t=[this.contextName(0)],r=(this.setupHelperArgs("",0,t,!0),this.flushInline(),this.topStack());t.splice(1,0,r),this.pushSource(["if (!",this.lastHelper,") { ",r," = ",this.source.functionCall(e,"call",t),"}"])},appendContent:function(e){this.pendingContent?e=this.pendingContent+e:this.pendingLocation=this.source.currentLocation,this.pendingContent=e},append:function(){var e;this.isInline()?(this.replaceStack(function(e){return[" != null ? ",e,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()))):(e=this.popStack(),this.pushSource(["if (",e," != null) { ",this.appendToBuffer(e,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"]))},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(e){this.lastContext=e},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(e,t,r,n){var a=0;n||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(e[a++])),this.resolvePath("context",e,a,t,r)},lookupBlockParam:function(e,t){this.useBlockParams=!0,this.push(["blockParams[",e[0],"][",e[1],"]"]),this.resolvePath("context",t,1)},lookupData:function(e,t,r){this.pushStackLiteral(e?"container.data(data, "+e+")":"data"),this.resolvePath("data",t,0,!0,r)},resolvePath:function(r,n,a,o,e){var i=this;if(this.options.strict||this.options.assumeObjects)this.push(function(e,t,r,n,a){var o=t.popStack(),i=r.length;for(e&&i--;n<i;n++)o=t.nameLookup(o,r[n],a);return e?[t.aliasable("container.strict"),"(",o,", ",t.quotedString(r[n]),", ",JSON.stringify(t.source.currentLocation)," )"]:o}(this.options.strict&&e,this,n,a,r));else for(var t=n.length;a<t;a++)this.replaceStack(function(e){var t=i.nameLookup(e,n[a],r);return o?[" && ",t]:[" != null ? ",t," : ",e]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(e,t){this.pushContext(),this.pushString(t),"SubExpression"!==t&&("string"==typeof e?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(e){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(e?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:{},types:[],contexts:[],ids:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(e.ids)),this.stringParams&&(this.push(this.objectLiteral(e.contexts)),this.push(this.objectLiteral(e.types))),this.push(this.objectLiteral(e.values))},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){this.pushStackLiteral(null!=e?this.programExpression(e):null)},registerDecorator:function(e,t){var r=this.nameLookup("decorators",t,"decorator"),t=this.setupHelperArgs(t,e);this.decorators.push(["fn = ",this.decorators.functionCall(r,"",["fn","props","container",t])," || fn;"])},invokeHelper:function(e,t,r){var n=this.popStack(),e=this.setupHelper(e,t),t=[],r=(r&&t.push(e.name),t.push(n),this.options.strict||t.push(this.aliasable("container.hooks.helperMissing")),["(",this.itemsSeparatedBy(t,"||"),")"]),n=this.source.functionCall(r,"call",e.callParams);this.push(n)},itemsSeparatedBy:function(e,t){var r=[];r.push(e[0]);for(var n=1;n<e.length;n++)r.push(t,e[n]);return r},invokeKnownHelper:function(e,t){e=this.setupHelper(e,t);this.push(this.source.functionCall(e.name,"call",e.callParams))},invokeAmbiguous:function(e,t){this.useRegister("helper");var r=this.popStack(),t=(this.emptyHash(),this.setupHelper(0,e,t)),e=["(","(helper = ",this.lastHelper=this.nameLookup("helpers",e,"helper")," || ",r,")"];this.options.strict||(e[0]="(helper = ",e.push(" != null ? helper : ",this.aliasable("container.hooks.helperMissing"))),this.push(["(",e,t.paramsInit?["),(",t.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",t.callParams)," : helper))"])},invokePartial:function(e,t,r){var n=[],a=this.setupParams(t,1,n);e&&(t=this.popStack(),delete a.name),r&&(a.indent=JSON.stringify(r)),a.helpers="helpers",a.partials="partials",a.decorators="container.decorators",n.unshift(e?t:this.nameLookup("partials",t,"partial")),this.options.compat&&(a.depths="depths"),a=this.objectLiteral(a),n.push(a),this.push(this.source.functionCall("container.invokePartial","",n))},assignToHash:function(e){var t=this.popStack(),r=void 0,n=void 0,a=void 0,o=(this.trackIds&&(a=this.popStack()),this.stringParams&&(n=this.popStack(),r=this.popStack()),this.hash);r&&(o.contexts[e]=r),n&&(o.types[e]=n),a&&(o.ids[e]=a),o.values[e]=t},pushId:function(e,t,r){"BlockParam"===e?this.pushStackLiteral("blockParams["+t[0]+"].path["+t[1]+"]"+(r?" + "+JSON.stringify("."+r):"")):"PathExpression"===e?this.pushString(t):this.pushStackLiteral("SubExpression"===e?"true":"null")},compiler:JavaScriptCompiler,compileChildren:function(e,t){for(var r=e.children,n=void 0,a=void 0,o=0,i=r.length;o<i;o++){var s,n=r[o],a=new this.compiler,l=this.matchExistingProgram(n);null==l?(this.context.programs.push(""),n.index=s=this.context.programs.length,n.name="program"+s,this.context.programs[s]=a.compile(n,t,this.context,!this.precompile),this.context.decorators[s]=a.decorators,this.context.environments[s]=n,this.useDepths=this.useDepths||a.useDepths,this.useBlockParams=this.useBlockParams||a.useBlockParams,n.useDepths=this.useDepths,n.useBlockParams=this.useBlockParams):(n.index=l.index,n.name="program"+l.index,this.useDepths=this.useDepths||l.useDepths,this.useBlockParams=this.useBlockParams||l.useBlockParams)}},matchExistingProgram:function(e){for(var t=0,r=this.context.environments.length;t<r;t++){var n=this.context.environments[t];if(n&&n.equals(e))return n}},programExpression:function(e){e=this.environment.children[e],e=[e.index,"data",e.blockParams];return(this.useBlockParams||this.useDepths)&&e.push("blockParams"),this.useDepths&&e.push("depths"),"container.program("+e.join(", ")+")"},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},push:function(e){return e instanceof Literal||(e=this.source.wrap(e)),this.inlineStack.push(e),e},pushStackLiteral:function(e){this.push(new Literal(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),e&&this.source.push(e)},replaceStack:function(e){var t=["("],r=void 0,n=void 0,a=void 0;if(!this.isInline())throw new h.default("replaceStack on non-inline");var o=this.popStack(!0),i=(o instanceof Literal?(t=["(",r=[o.value]],a=!0):(n=!0,i=this.incrStack(),t=["((",this.push(i)," = ",o,")"],r=this.topStack()),e.call(this,r));a||this.popStack(),n&&this.stackSlot--,this.push(t.concat(i,")"))},incrStack:function(){return this.stackSlot++,this.stackVars.length<this.stackSlot&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;this.inlineStack=[];for(var t=0,r=e.length;t<r;t++){var n,a=e[t];a instanceof Literal?this.compileStack.push(a):(n=this.incrStack(),this.pushSource([n," = ",a,";"]),this.compileStack.push(n))}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),r=(t?this.inlineStack:this.compileStack).pop();if(!e&&r instanceof Literal)return r.value;if(!t){if(!this.stackSlot)throw new h.default("Invalid stack pop");this.stackSlot--}return r},topStack:function(){var e=this.isInline()?this.inlineStack:this.compileStack,e=e[e.length-1];return e instanceof Literal?e.value:e},contextName:function(e){return this.useDepths&&e?"depths["+e+"]":"depth"+e},quotedString:function(e){return this.source.quotedString(e)},objectLiteral:function(e){return this.source.objectLiteral(e)},aliasable:function(e){var t=this.aliases[e];return t?t.referenceCount++:((t=this.aliases[e]=this.source.wrap(e)).aliasable=!0,t.referenceCount=1),t},setupHelper:function(e,t,r){var n=[];return{params:n,paramsInit:this.setupHelperArgs(t,e,n,r),name:this.nameLookup("helpers",t,"helper"),callParams:[this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})")].concat(n)}},setupParams:function(e,t,r){for(var n,a={},o=[],i=[],s=[],l=!r,e=(l&&(r=[]),a.name=this.quotedString(e),a.hash=this.popStack(),this.trackIds&&(a.hashIds=this.popStack()),this.stringParams&&(a.hashTypes=this.popStack(),a.hashContexts=this.popStack()),this.popStack()),u=this.popStack(),c=((u||e)&&(a.fn=u||"container.noop",a.inverse=e||"container.noop"),t);c--;)n=this.popStack(),r[c]=n,this.trackIds&&(s[c]=this.popStack()),this.stringParams&&(i[c]=this.popStack(),o[c]=this.popStack());return l&&(a.args=this.source.generateArray(r)),this.trackIds&&(a.ids=this.source.generateArray(s)),this.stringParams&&(a.types=this.source.generateArray(i),a.contexts=this.source.generateArray(o)),this.options.data&&(a.data="data"),this.useBlockParams&&(a.blockParams="blockParams"),a},setupHelperArgs:function(e,t,r,n){e=this.setupParams(e,t,r);return e.loc=JSON.stringify(this.source.currentLocation),e=this.objectLiteral(e),n?(this.useRegister("options"),r.push("options"),["options=",e]):r?(r.push(e),""):e}};for(var o="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),i=JavaScriptCompiler.RESERVED_WORDS={},s=0,l=o.length;s<l;s++)i[o[s]]=!0;JavaScriptCompiler.isValidJavaScriptVariableName=function(e){return!JavaScriptCompiler.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)},t.default=JavaScriptCompiler,e.exports=t.default}return javascriptCompiler.exports}function requireHandlebars(){function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function create(){var r=l();return r.compile=function(e,t){return o.compile(e,t,r)},r.precompile=function(e,t){return o.precompile(e,t,r)},r.AST=n.default,r.Compiler=o.Compiler,r.JavaScriptCompiler=i.default,r.Parser=a.parser,r.parse=a.parse,r.parseWithoutProcessing=a.parseWithoutProcessing,r}var e,t,n,a,o,i,r,s,l,u;return hasRequiredHandlebars||(hasRequiredHandlebars=1,(t=(e=handlebars).exports).__esModule=!0,u=_interopRequireDefault(requireHandlebars_runtime()),n=_interopRequireDefault(requireAst()),a=requireBase(),o=requireCompiler(),i=_interopRequireDefault(requireJavascriptCompiler()),r=_interopRequireDefault(requireVisitor()),s=_interopRequireDefault(requireNoConflict()),l=u.default.create,(u=create()).create=create,s.default(u),u.Visitor=r.default,t.default=u.default=u,e.exports=t.default),handlebars.exports}function process(e=document){Debug.debug("Processing with FP_SELECTOR:",ProcessingChain.FP_SELECTOR),e!==document&&e.matches(ProcessingChain.FP_SELECTOR)?ProcessingChain.processElement(e):(e=e.querySelectorAll(ProcessingChain.FP_SELECTOR),Debug.debug("Found elements to process:",e.length),e.forEach(e=>ProcessingChain.processElement(e)))}const Debug={level:1,levels:{ERROR:0,WARN:1,INFO:2,DEBUG:3},log:function(e,...t){if(e<=this.level){var r=["ERROR","WARN","INFO","DEBUG"][e];switch(r){case"ERROR":console.error(`FlowPlater [${r}]:`,...t);break;case"WARN":console.warn(`FlowPlater [${r}]:`,...t);break;case"DEBUG":console.debug(`FlowPlater [${r}]:`,...t);break;default:console.log(`FlowPlater [${r}]:`,...t)}}},error:function(...e){this.log(this.levels.ERROR,...e)},warn:function(...e){this.log(this.levels.WARN,...e)},info:function(...e){this.log(this.levels.INFO,...e)},debug:function(...e){this.log(this.levels.DEBUG,...e)}};class FlowPlaterError extends Error{constructor(e,t){super(e),this.name="FlowPlaterError",void 0!==t&&(this.stack=t)}}class TemplateError extends FlowPlaterError{constructor(e,t){super(`Template Error${void 0!==t?" in "+t:""}: `+e),this.name="TemplateError"}}const EventSystem=function(){const o=new Map;return{subscribe(e,t,r=null){return e&&"string"==typeof e||new FlowPlaterError("Invalid event name. Event name must be a non-empty string.",(new Error).stack),t&&"function"==typeof t||new FlowPlaterError(`Invalid callback for event "${e}". Callback must be a function.`,(new Error).stack),o.has(e)||o.set(e,[]),o.get(e).push({callback:t,context:r}),Debug.debug("Subscribed to event: "+e),()=>this.unsubscribe(e,t)},unsubscribe(e,t){var r;e&&"string"==typeof e||new FlowPlaterError("Invalid event name. Event name must be a non-empty string. If you are trying to unsubscribe from all events, use unsubscribeAll() instead.",(new Error).stack),o.has(e)&&(r=o.get(e),o.set(e,r.filter(e=>e.callback!==t)))},unsubscribeAll(){o.clear(),Debug.info("Cleared all event subscribers")},publish(r,n=null){if(o.has(r)&&(o.get(r).forEach(({callback:e,context:t})=>{try{e.call(t,n)}catch(e){Debug.error(`Error in event subscriber for ${r}:`,e)}}),n)&&n.instanceName){const a=n.instanceName+":"+r;o.has(a)&&o.get(a).forEach(({callback:e,context:t})=>{try{e.call(t,n)}catch(e){Debug.error(`Error in instance event subscriber for ${a}:`,e)}})}}}}(),Performance={marks:{},start:function(e){this.marks[e]=performance.now()},end:function(e){var t;if(this.marks[e])return t=performance.now()-this.marks[e],delete this.marks[e],Debug.debug(`${e} took ${t.toFixed(2)}ms`),t},getDuration:function(e){return this.marks[e]?performance.now()-this.marks[e]:0}},_state={templateCache:{},instances:{},groups:{},length:0,initialized:!1,defaults:{animation:!1,debug:!1},config:{},_initTracking:{}},_readyState={isReady:!1,queue:[],plugins:new Set,hasPluginsRegistered:!1,processQueue(){for(Debug.debug(`Processing ${this.queue.length} queued operations`);0<this.queue.length;){var e=this.queue.shift();try{e()}catch(e){Debug.error("Error processing queued operation:",e)}}},enqueue(e){if(this.isReady)try{e()}catch(e){Debug.error("Error executing operation:",e)}else this.queue.push(e)},markReady(){0!==this.plugins.size||this.hasPluginsRegistered||Debug.info("No plugins registered, proceeding with initialization"),this.isReady=!0,this.processQueue()},registerPlugin(e){this.hasPluginsRegistered=!0,this.plugins.add(e),Debug.debug(`Plugin registered: ${e}, total plugins: `+this.plugins.size)},unregisterPlugin(e){var t=this.plugins.delete(e);return t?(Debug.debug(`Plugin unregistered: ${e}, remaining plugins: `+this.plugins.size),0===this.plugins.size&&(this.hasPluginsRegistered=!1,Debug.debug("All plugins unregistered, reset plugin registration state"))):Debug.warn("Attempted to unregister non-existent plugin: "+e),t},reset(e=!0){this.queue=[],this.plugins.clear(),this.hasPluginsRegistered=!1,e?Debug.info("ReadyState reset but maintains ready status for new plugins"):(this.isReady=!1,Debug.info("ReadyState completely reset, FlowPlater needs re-initialization"))},cleanup(){this.reset(!1),Debug.info("FlowPlater ReadyState cleaned up completely")}},AttributeMatcher={INHERITABLE_ATTRIBUTES:{"hx-":["boost","push-url","select","select-oob","swap","target","vals","confirm","disable","disabled-elt","encoding","ext","headers","include","indicator","params","prompt","replace-url","request","sync","vars"],"fp-":["prepend","append","persist","target"]},_prefixes(){return Object.keys(this.INHERITABLE_ATTRIBUTES)},_normalizeAttributeName(e){return e.replace(/^(hx-|fp-)/,"").replace(/^data-/,"")},_getAllAttributeNames(e){var t=this._normalizeAttributeName(e),r=[];for(const n of this._prefixes())r.push(""+n+t),r.push("data-"+n+t);return r},_getRawAttribute(e,t,r=null){for(const a of this._getAllAttributeNames(t)){var n=e.getAttribute(a);if(null!==n)return n}return r},_hasAttribute(t,e){return this._getAllAttributeNames(e).some(e=>t.hasAttribute(e))},findMatchingElements(e,t=null,r=!0,n=document,a=!0,o=!1){var i=this._getAllAttributeNames(e);let s=i.map(e=>`[${e}]`).join(",");if(null!=t){const l=r?`="${t}"`:`*="${t}"`;s=i.map(e=>`[${e}${l}]`).join(",")}i=Array.from(n.querySelectorAll(s));return a&&n instanceof Element&&(null===(a=this._getRawAttribute(n,e))||null!=t&&(r?a!==t:!a.includes(t))||i.unshift(n)),null!=t&&o?i[0]:i},findClosestParent(e,t,r=null,n=!0){if(!e)return Debug.error("Attribute name is required"),null;if(!t)return Debug.error("Element is required to find closest parent ("+e+")"),null;var e=this._normalizeAttributeName(e),a=this._getAllAttributeNames(e);let o=a.map(e=>`[${e}]`).join(",");if(null!=r){const i=n?`="${r}"`:`*="${r}"`;o=a.map(e=>`[${e}${i}]`).join(",")}n=t.closest(o);if(n&&this.isInheritable(e)){r=this._getRawAttribute(n,"disinherit");if(r&&("*"===r||r.split(" ").includes(e)))return null}return n},getElementWithAttribute(e,t=document,r=!0){return r&&t instanceof Element&&this._hasAttribute(t,e)?t:(r=this._getAllAttributeNames(e).map(e=>`[${e}]`).join(","),t.querySelector(r))},_parentElement(e){var t=e.parentElement;return!t&&e.parentNode instanceof ShadowRoot?e.parentNode:t},_getRootNode(e,t=!1){return e.getRootNode?e.getRootNode({composed:t}):document},_getClosestMatch(e,t){for(;e&&!t(e);)e=this._parentElement(e);return e||null},_attributeMatchesNormalizedName(e,t){return e.replace(/^data-/,"").replace(/^hx-/,"").replace(/^fp-/,"")===t},_getAttributeValueWithInheritance(e,t,r){var n=this._getRawAttribute(t,r),a=this._getRawAttribute(t,"disinherit"),o=this._getRawAttribute(t,"inherit");if(e!==t){if(htmx.config.disableInheritance)return o&&("*"===o||o.split(" ").includes(r))?n:null;if(a&&("*"===a||a.split(" ").includes(r)))return"unset"}return n},findInheritedAttribute(t,e){const r=this._normalizeAttributeName(e);let n=null;return this._getClosestMatch(t,e=>{e=this._getAttributeValueWithInheritance(t,e,r);return!!e&&(n=e,!0)}),"unset"===n?null:n},findAttribute(e,t){var r=this._normalizeAttributeName(t);for(const a of this._prefixes()){var n=this._getRawAttribute(e,""+a+r);if(n)return n}return this.findInheritedAttribute(e,r)||null},_validateAttributeName(e){return e?!!this.isInheritable(e)||(Debug.info(`Attribute ${e} is not inheritable`),!1):(Debug.error("Attribute name is required"),!1)},addInheritableAttribute(e,t){this.INHERITABLE_ATTRIBUTES[e]||(this.INHERITABLE_ATTRIBUTES[e]=[]),this.INHERITABLE_ATTRIBUTES[e].push(t)},removeInheritableAttribute(e,t){return!!this.INHERITABLE_ATTRIBUTES[e]&&-1!==(t=this.INHERITABLE_ATTRIBUTES[e].indexOf(t))&&(this.INHERITABLE_ATTRIBUTES[e].splice(t,1),!0)},isInheritable(e){e=this._normalizeAttributeName(e);return Object.values(this.INHERITABLE_ATTRIBUTES).flat().includes(e)},findTemplateElementByInstanceName(t){var e;return t.startsWith("#")?(e=t.slice(1),(e=document.getElementById(e))&&this._hasAttribute(e,"template")?e:null):(e=this.findMatchingElements("template"),Array.isArray(e)&&e.find(e=>this._getRawAttribute(e,"instance")===t)||null)},findElementByInstanceName(e){if(e.startsWith("#")){var t=e.slice(1);const r=document.getElementById(t);return r}const r=this.findMatchingElements("instance",e,!1,document,!1,!0);return r}},VersionManager={parseVersion(e){return e.split(".").map(Number)},compareVersions(e,t){var r=this.parseVersion(e),n=this.parseVersion(t);for(let e=0;e<3;e++){if(r[e]>n[e])return 1;if(r[e]<n[e])return-1}return 0},satisfiesVersion(e,t){var r;return!(!e||!t)&&([r,e]=e.split("@"),!e||0<=this.compareVersions(t,e))}},PluginManager={plugins:new Map,globalMethods:new Map,instanceMethods:new Map,customTransformers:new Map,_executeInitCompleteHook(t){if(t.hooks?.initComplete)try{t.hooks.initComplete(window.FlowPlater||void 0,Object.values(_state.instances))}catch(e){Debug.error(`Plugin ${t.config.name} failed executing initComplete:`,e)}},registerPlugin(e,t={}){var r,n,a;if(!(r="string"==typeof e?window[e]:e))throw new FlowPlaterError("Plugin not found: "+e);if("function"!=typeof r)throw new FlowPlaterError("Plugin must be a valid function");const o=r(t);for(const m of["name","enabled","priority","version"])if(!(m in o.config))throw new FlowPlaterError(`Plugin config must contain '${m}'`);if(!/^\d+\.\d+\.\d+$/.test(o.config.version))throw new FlowPlaterError(`Plugin version must be in format 'x.y.z' (got ${o.config.version})`);if(this.plugins.has(o.config.name))throw new FlowPlaterError(`Plugin ${o.config.name} already registered`);if(o.config.dependencies)for(const b of o.config.dependencies){var[i,s]=b.split("@"),l=this.getPlugin(i);if(!l)throw new FlowPlaterError(`Required dependency '${i}' not found for plugin `+o.config.name);if(!VersionManager.satisfiesVersion(b,l.config.version))throw new FlowPlaterError(`Plugin ${o.config.name} requires ${i} version ${s||"any"}, but found version `+l.config.version)}if(o.config.optionalDependencies)for(const E of o.config.optionalDependencies){var[u,c]=E.split("@"),p=this.getPlugin(u);p&&!VersionManager.satisfiesVersion(E,p.config.version)&&Debug.warn(`Optional dependency '${u}' version mismatch for plugin ${o.config.name}. Required: ${c||"any"}, Found: `+p.config.version)}if(o.inheritableAttributes&&Array.isArray(o.inheritableAttributes)&&o.inheritableAttributes.forEach(e=>{AttributeMatcher.addInheritableAttribute("fp-",e)}),_readyState.registerPlugin(o.config.name),o.globalMethods)for(const[v,y]of Object.entries(o.globalMethods)){if("function"!=typeof y)throw new FlowPlaterError(`Global method ${v} must be a function`);if(this.globalMethods.has(v))throw n=this.globalMethods.get(v),new FlowPlaterError(`Global method ${v} already registered by plugin `+n.plugin);this.globalMethods.set(v,{method:y,plugin:o.config.name}),window.FlowPlater&&(window.FlowPlater[v]=(...e)=>this.executeGlobalMethod(v,...e))}if(o.instanceMethods)for(var[h,d]of Object.entries(o.instanceMethods)){if("function"!=typeof d)throw new FlowPlaterError(`Instance method ${h} must be a function`);if(this.instanceMethods.has(h))throw a=this.instanceMethods.get(h),new FlowPlaterError(`Instance method ${h} already registered by plugin `+a.plugin);this.instanceMethods.set(h,{method:d,plugin:o.config.name})}if(o.helpers&&"object"==typeof o.helpers)for(var[g,f]of Object.entries(o.helpers))if("function"!=typeof f)Debug.warn(`Plugin ${o.config.name} contains invalid helper ${g}:`,f);else try{Handlebars.registerHelper(g.toLowerCase(),f)}catch(e){Debug.error(`Plugin ${o.config.name} failed registering helper ${g}:`,e)}return this.plugins.set(o.config.name,o),_readyState.isReady?(o.config?.enabled&&"function"==typeof o.init&&o.init(),this.updateExistingInstances(),this._executeInitCompleteHook(o)):_readyState.queue.push(()=>{o.config?.enabled&&"function"==typeof o.init&&o.init(),this.updateExistingInstances(),this._executeInitCompleteHook(o)}),o},updateExistingInstances(){Object.values(_state.instances).forEach(t=>{for(const[r,e]of this.instanceMethods.entries())t[r]||(t[r]=(...e)=>this.executeInstanceMethod(r,t,...e))})},getPlugin(e){return this.plugins.get(e)},getAllPlugins(){return Array.from(this.plugins.values())},getEnabledPlugins(){return this.getAllPlugins().filter(e=>e.config?.enabled)},removePlugin(e){var t,r,n,a,o,i,s=this.getPlugin(e);if(!s)return!1;s.inheritableAttributes&&Array.isArray(s.inheritableAttributes)&&s.inheritableAttributes.forEach(e=>{AttributeMatcher.removeInheritableAttribute("fp-",e)});const l=new Set;for([t,r]of this.instanceMethods.entries())r.plugin===e&&l.add(t);for([n,a]of this.globalMethods.entries())a.plugin===e&&(this.globalMethods.delete(n),window.FlowPlater)&&delete window.FlowPlater[n];for([o,i]of this.instanceMethods.entries())i.plugin===e&&this.instanceMethods.delete(o);return Object.values(_state.instances).forEach(t=>{l.forEach(e=>{delete t[e]})}),_readyState.unregisterPlugin(e),this.plugins.delete(e)},disablePlugin(e){e=this.getPlugin(e);return!!e&&!(e.config.enabled=!1)},enablePlugin(e){e=this.getPlugin(e);return!!e&&(e.config.enabled=!0,"function"!=typeof e.init||e.state?.initialized||(e.init(),e.state.initialized=!0),!0)},pluginConfig(e){e=this.getPlugin(e);return e?e.config:null},getSortedPlugins(){return this.getEnabledPlugins().sort((e,t)=>(t.config?.priority||0)-(e.config?.priority||0))},_determineDataType(e){if(("object"!=typeof e||null===e)&&"string"==typeof e)try{JSON.parse(e)}catch(e){return"html"}return"json"},applyTransformations(a,e,o,i="json"){if(!a||"object"!=typeof a)return Debug.error("Invalid instance provided to applyTransformations"),e;Debug.debug("[Transform] Starting "+o,{instance:a.instanceName,isEvent:e instanceof Event,dataType:typeof e,isProxy:e&&"object"==typeof e&&"toJSON"in e});e=this.getSortedPlugins().reduce((e,t)=>{if(t.transformers&&"function"==typeof t.transformers[o])try{Debug.debug(`[Transform] Applying ${t.config.name}'s `+o,{dataType:typeof e,isEvent:e instanceof Event});var r=(0,t.transformers[o])?.(a,e,i);return null==r?(Debug.warn(`Plugin ${t.config.name} returned undefined/null for ${o}, using original data`),e):
// For event transformations, ensure we preserve the event object structure
e instanceof Event&&r instanceof Event?(
// For events, we want to preserve the event object but update its properties
Object.assign(e.detail,r.detail),e):(Debug.debug(`[Transform] ${t.config.name}'s transform result:`,{resultType:typeof r,isEvent:r instanceof Event,isProxy:r&&"object"==typeof r&&"toJSON"in r}),r)}catch(e){Debug.error(`Plugin ${t.config.name} failed executing ${o} transformation:`,e)}return e},e);const s=this.customTransformers.get(o)||[];return 0<s.length&&Debug.debug(`[Transform] Applying ${s.length} custom transformers for `+o),e=s.reduce((t,r,e)=>{try{Debug.debug(`[Transform] Applying custom transformer '${r.name}' (${e+1}/${s.length})`,{dataType:typeof t,isEvent:t instanceof Event});var n=r.fn.call(null,a,t,i);return null==n?(Debug.warn(`Custom transformer '${r.name}' returned undefined/null for ${o}, using original data`),t):
// For event transformations, ensure we preserve the event object structure
t instanceof Event&&n instanceof Event?(
// For events, we want to preserve the event object but update its properties
Object.assign(t.detail,n.detail),t):(Debug.debug(`[Transform] Custom transformer '${r.name}' result:`,{resultType:typeof n,isEvent:n instanceof Event,isProxy:n&&"object"==typeof n&&"toJSON"in n}),n)}catch(e){return Debug.error(`Custom transformer '${r.name}' failed executing ${o} transformation:`,e),t}},e),Debug.debug("[Transform] Completed "+o,{finalDataType:typeof e,isEvent:e instanceof Event,isProxy:e&&"object"==typeof e&&"toJSON"in e}),e},addTransformer(e,t,r){if("function"!=typeof t)throw new FlowPlaterError("Transformer must be a function");if(!r){const a=this.customTransformers.get(e)||[];r=`${e}_${a.length+1}_`+Date.now()}var n=t.toString();"transformRequest"===e?n.includes("instance")&&n.includes("evt")||Debug.warn("Request transformer function should accept (instance, evt) parameters"):"transformResponse"===e?n.includes("instance")&&(n.includes("response")||n.includes("data"))||Debug.warn("Response transformer function should accept (instance, response, dataType) parameters"):n.includes("instance")&&n.includes("data")||Debug.warn("Transformer function should accept (instance, data, dataType) parameters"),this.customTransformers.has(e)||this.customTransformers.set(e,[]);const a=this.customTransformers.get(e);n=a.findIndex(e=>e.name===r);return-1!==n?(a[n]={name:r,fn:t},Debug.debug(`Replaced custom transformer '${r}' for `+e)):(a.push({name:r,fn:t}),Debug.debug(`Added custom transformer '${r}' for `+e)),this},removeTransformer(e,t){var r,n;return!!this.customTransformers.has(e)&&(-1===(n=(r=this.customTransformers.get(e)).findIndex(e=>e.name===t))?(Debug.warn(`Transformer '${t}' not found for type '${e}'`),!1):(r.splice(n,1),0===r.length&&this.customTransformers.delete(e),Debug.debug(`Removed custom transformer '${t}' for `+e),!0))},clearTransformers(e){return e?(this.customTransformers.delete(e),Debug.debug("Cleared custom transformers for "+e)):(this.customTransformers.clear(),Debug.debug("Cleared all custom transformers")),this},listTransformers(e){if(e)return this.customTransformers.get(e)||[];var t,r,n={};for([t,r]of this.customTransformers.entries())n[t]=r;return n},executeHook(t,...e){Debug.debug("[PLUGIN] Executing hook:",t,e);var r=this.getSortedPlugins();let n=e[0];for(const o of r)if(o.hooks?.[t])try{var a=(0,o.hooks?.[t])?.(...e);void 0!==a?(n=a,e[0]=n):(Debug.warn(`Plugin ${o.config.name} returned undefined for `+t,e[0]),n=e[0])}catch(e){Debug.error(`Plugin ${o.config.name} failed executing ${t}:`,e)}return n},executeGlobalMethod(e,...t){var r=this.globalMethods.get(e);if(!r)throw new FlowPlaterError(`Global method ${e} not found`);e=this.getPlugin(r.plugin);if(e&&e.config?.enabled)return r.method.call(e,...t);throw new FlowPlaterError(`Plugin ${r.plugin} is not enabled`)},executeInstanceMethod(e,t,...r){var n=this.instanceMethods.get(e);if(!n)throw new FlowPlaterError(`Instance method ${e} not found`);e=this.getPlugin(n.plugin);if(e&&e.config?.enabled)return n.method(t,...r);throw new FlowPlaterError(`Plugin ${n.plugin} is not enabled`)},async destroyPlugin(e){var t=this.getPlugin(e);return!!t&&("function"==typeof t.destroy&&await t.destroy(),this.removePlugin(e))},async destroyAll(){var e=this.getAllPlugins();await Promise.all(e.map(e=>"function"==typeof e.destroy?e.destroy():null)),e.forEach(e=>_readyState.unregisterPlugin(e.config.name)),this.plugins.clear(),this.globalMethods.clear(),this.instanceMethods.clear(),Debug.info("All plugins destroyed, FlowPlater remains ready for new plugins")}},customTagList=[{tag:"fpselect",replaceWith:"select"}];let currentCustomTags=customTagList;const DEFAULTS={TEMPLATE:{CACHE_SIZE:100,PRECOMPILE:!0,ANONYMOUS_INSTANCE_NAME:"anonymous",SELF_TEMPLATE_ID:"self"},ANIMATION:{ENABLED:!0,DURATION:300},DEBUG:{LEVEL:1,DEVELOPMENT_LEVEL:3},HTMX:{TIMEOUT:1e4,SWAP_STYLE:"innerHTML",SELF_REQUESTS_ONLY:!1,IGNORE_TITLE:!0,DEFAULT_TRIGGER:"mouseover",SWAP_DELAY:0,SETTLE_DELAY:0,TRANSITION:!1},STORAGE:{ENABLED:!1,TTL:2592e3,INFINITE_TTL:-1},PERFORMANCE:{BATCH_DOM_UPDATES:!0,BATCHING_DELAY:0,DEBOUNCE_DELAY:0},FORMS:{PERSIST_FORMS:!0,DEFAULT_SOURCE:"unknown",TRIGGER_EVENTS:"change",EXCLUDED_INPUT_TYPES:["file"],CHECKBOX_RADIO_TYPES:["checkbox","radio"],TEXT_INPUT_TYPES:["text"],FORM_INPUT_TYPES:["INPUT","SELECT","TEXTAREA"]},PLUGINS:{DEFAULT_PRIORITY:0,DEFAULT_VERSION:"1.0.0",DEBUG:!1},CART:{ENABLED:!0,PRIORITY:50,DATA_ATTRIBUTE:"product",GROUP_NAME:"cart",REQUIRED_KEYS:["id","name"],CURRENCY:{NAME:"USD",SYMBOL:"$",PRECISION:2,SEPARATOR:",",DECIMAL:"."},TAX_RATES:[{name:"VAT",value:1.21}],LOCALE:"en-US",STOCK:{INFINITE:1/0,MIN_AMOUNT:0}},FILTER:{ENABLED:!0,PRIORITY:0,DEFAULT_SELECT_OPTION:"Select tags...",PRESERVE_DEFAULT:!1},DATA_EXTRACTOR:{VALUE_SOURCES:{ATTRIBUTE:"attribute",TEXT:"text"}},PROXY:{DEFAULT_URL:""},MATH:{OPERATORS:{ADD:"+",SUBTRACT:"-",MULTIPLY:"*",DIVIDE:"/"}},DOM:{UPDATE_COUNTER_INITIAL:0,UNKNOWN_ELEMENT_ID:"unknown",INTEGRITY_CHECK_ENABLED:!0,VOID_ELEMENTS:["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"],SVG_NAMESPACE:"http://www.w3.org/2000/svg",SVG_ELEMENTS:["svg","circle","ellipse","line","polygon","polyline","rect","path","g","text","tspan","defs","use","symbol","marker","clipPath","mask","pattern","image","foreignObject"],WEBFLOW_CLASSES:["w-checkbox","w-radio","w-checkbox-input","w-radio-input","w-form","w-input","w-select","w-textarea"],SIMILARITY_THRESHOLD:.5,LENGTH_RATIO_THRESHOLD:.5},INSTANCES:{DUPLICATE_INIT_WINDOW:100},EVENTS:{HTTP_METHODS:["get","post","put","patch","delete"],HTTP_TRIGGER_ATTRIBUTES:["trigger","boost","ws","sse"]},HELPERS:{EACH:{START_AT:0,SORT_KEY:"",DESCENDING:!1,SORT_BEFORE_LIMIT:!0},COMPARISON:{DEFAULT_OPERATOR:"=="}},CONTENT_TYPES:{UNKNOWN:"unknown",JSON:"json",HTML:"html",XML:"xml"},ERRORS:{XML_PARSER_ERROR:"Unknown parser error"},URL:{WEBFLOW_DOMAINS:[".webflow.io",".canvas.webflow.com"],LOCALHOST:"localhost"},SELECTORS:{FP_ATTRIBUTES:["template","get","post","put","delete","patch","persist","instance","data","local","group","target","swap","trigger","dynamic"],TEMPLATE_ELEMENTS:["template","fptemplate"],EXTENSION_ATTRIBUTE:"hx-ext"},SECURITY:{ALLOW_EXECUTE:!0,FORBIDDEN_REGISTRATIONS:new Set(["if","unless","each","with","lookup","log","blockHelperMissing","helperMissing"])}},isDevEnvironment=DEFAULTS.URL.WEBFLOW_DOMAINS.some(e=>window.location.hostname.endsWith(e))||window.location.hostname.includes(DEFAULTS.URL.LOCALHOST),defaultConfig={debug:{level:isDevEnvironment?DEFAULTS.DEBUG.DEVELOPMENT_LEVEL:DEFAULTS.DEBUG.LEVEL},selectors:{fp:DEFAULTS.SELECTORS.FP_ATTRIBUTES},templates:{cacheSize:DEFAULTS.TEMPLATE.CACHE_SIZE,precompile:DEFAULTS.TEMPLATE.PRECOMPILE},animation:{enabled:DEFAULTS.ANIMATION.ENABLED,duration:DEFAULTS.ANIMATION.DURATION},htmx:{timeout:DEFAULTS.HTMX.TIMEOUT,swapStyle:DEFAULTS.HTMX.SWAP_STYLE,selfRequestsOnly:DEFAULTS.HTMX.SELF_REQUESTS_ONLY,ignoreTitle:DEFAULTS.HTMX.IGNORE_TITLE},customTags:customTagList,storage:{enabled:DEFAULTS.STORAGE.ENABLED,ttl:DEFAULTS.STORAGE.TTL},performance:{batchDomUpdates:DEFAULTS.PERFORMANCE.BATCH_DOM_UPDATES,batchingDelay:DEFAULTS.PERFORMANCE.BATCHING_DELAY},persistForm:DEFAULTS.FORMS.PERSIST_FORMS,allowExecute:DEFAULTS.SECURITY.ALLOW_EXECUTE};_state.config=JSON.parse(JSON.stringify(defaultConfig));let configQueue=[],isInitialized=!1;const ConfigManager={setDefaultConfig(e){applyConfigInternal(e)},setConfig(e={}){isInitialized?(applyConfigInternal(e),Debug.info("FlowPlater configuration updated:",this.getConfig())):configQueue.push(e)},submitQueuedConfig(){0<configQueue.length&&(applyConfigInternal(configQueue.reduce((e,t)=>deepMerge(e,t),{})),Debug.info("FlowPlater configuration updated:",this.getConfig()),configQueue=[]),isInitialized=!0},getConfig(){return JSON.parse(JSON.stringify(_state.config))},getDefaultConfig(){return JSON.parse(JSON.stringify(defaultConfig))}};Debug.level=_state.config.debug.level;class TemplateCache{static set(e,t){var r=ConfigManager.getConfig().templates?.cacheSize||DEFAULTS.TEMPLATE.CACHE_SIZE,n=_state.templateCache;return Object.keys(n).length>=r&&(delete n[r=Object.keys(n)[0]],Debug.info("Cache limit reached. Removed template: "+r)),n[e]=t}static get(e){return e?_state.templateCache[e]:_state.templateCache}static isCached(e){return!!_state.templateCache[e]}static clear(e){e?(delete _state.templateCache[e],Debug.info("Cleared template cache for: "+e)):(_state.templateCache={},Debug.info("Cleared entire template cache"))}static size(){return Object.keys(_state.templateCache).length}static isAtCapacity(){var e=ConfigManager.getConfig().templates?.cacheSize||DEFAULTS.TEMPLATE.CACHE_SIZE;return Object.keys(_state.templateCache).length>=e}}const memoizedCompile=memoize(function(t){Performance.start("compile:"+t);const u=Handlebars.helpers;var r=t.startsWith("#")?t:"#"+t,r=document.querySelector(r);if(Debug.debug("Trying to compile template: "+t),!r)return Debug.error("Template not found: "+t),Performance.end("compile:"+t),null;if(!TemplateCache.isCached(t)||AttributeMatcher._hasAttribute(r,"dynamic")&&"false"!==AttributeMatcher._getRawAttribute(r,"dynamic")){Debug.debug("compiling template: "+t);r=function processNode(e){let l="";return e.childNodes.forEach(n=>{if(n.nodeType===Node.TEXT_NODE)l+=n.textContent;else if(n.nodeType===Node.ELEMENT_NODE){let r=n.tagName.toLowerCase();var a=AttributeMatcher._getRawAttribute(n,"tag");if(a&&(r=a),n.hasAttribute("fp")||r in u){var e=r,a=n.getAttribute("fp"),t=a?a.split(" ").map(e=>e.replace(/&quot;/g,'"')).join(" "):"",o=processNode(n);switch(e){case"log":case"lookup":case"execute":l+=o?`{{${e} ${o} ${t}}}`:`{{${e} ${t}}}`;break;case"comment":l+=`{{!-- ${t} --}}`;break;case"if":var i=t.replace(/"/g,'\\"');l+=`{{#${e} "${i}"}}${o}{{/${e}}}`;break;case"else":l+=`{{${e}}}`+o;break;case"math":o&&Debug.warn(`FlowPlater: The <${e}> helper does not accept inner content.`),l+=`{{#${e} "${t}"}}`;break;default:l+=`{{#${e} ${t}}}${o}{{/${e}}}`}}else if("else"===n.tagName){a=processNode(n);l+=`{{${n.tagName.toLowerCase()}}}`+a}else if("template"===n.tagName||"fptemplate"===n.tagName||AttributeMatcher._hasAttribute(n,"template"))l+=n.outerHTML;else{var a=processNode(n),s=function(e){let t=e.tagName.toLowerCase();var r,n=AttributeMatcher._getRawAttribute(e,"tag");n&&(t=n),currentCustomTags.forEach(e=>{t===e.tag&&(t=e.replaceWith)});let a="";for(r of e.attributes)a+=` ${r.name}="${r.value}"`;return`<${t}${a}>`}(n),n=AttributeMatcher._getRawAttribute(n,"val");let e=a,t=(n&&(e=`{{{default ${n} "${a.replace(/"/g,'\\"')}"}}}`),r);currentCustomTags.forEach(e=>{t===e.tag&&(t=e.replaceWith)});n=`</${t}>`;l+=""+s+e+n}}}),l}(r);Debug.debug("Compiling Handlebars template: "+r);try{var e=Handlebars.compile(r);return TemplateCache.set(t,e),Performance.end("compile:"+t),e}catch(e){return Debug.error("Template not valid: "+r+" | Error: "+e.message),Performance.end("compile:"+t),null}}return Performance.end("compile:"+t),TemplateCache.get(t)});class DomBatcher{constructor(){Object.defineProperty(this,"readQueue",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"writeQueue",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"isScheduled",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"frameId",{enumerable:!0,configurable:!0,writable:!0,value:null})}read(r,n){return ConfigManager.getConfig().performance?.batchDomUpdates?new Promise((e,t)=>{this.readQueue.push({id:n||`read-${Date.now()}-`+Math.random(),type:"read",operation:r,resolve:e,reject:t}),this.scheduleFlush()}):Promise.resolve(r())}write(r,n){return ConfigManager.getConfig().performance?.batchDomUpdates?new Promise((e,t)=>{this.writeQueue.push({id:n||`write-${Date.now()}-`+Math.random(),type:"write",operation:r,resolve:e,reject:t}),this.scheduleFlush()}):Promise.resolve(r())}batch(e){e=e.map(e=>"read"===e.type?this.read(e.operation,e.id):this.write(e.operation,e.id));return Promise.all(e)}flush(){this.conditionalFrameCancel(),this.isScheduled=!1,this.executeOperations()}clear(){this.conditionalFrameCancel(),this.isScheduled=!1,[...this.readQueue,...this.writeQueue].forEach(e=>{e.reject(new Error("DOM operation cancelled"))}),this.readQueue=[],this.writeQueue=[]}conditionalFrameSchedule(e){var t=ConfigManager.getConfig().performance?.batchingDelay??0;this.frameId=0<t?setTimeout(e,t):requestAnimationFrame(e)}conditionalFrameCancel(){this.frameId&&((0<(ConfigManager.getConfig().performance?.batchingDelay??0)?clearTimeout:cancelAnimationFrame)(this.frameId),this.frameId=null)}scheduleFlush(){this.isScheduled||(this.isScheduled=!0,this.conditionalFrameSchedule(()=>{this.isScheduled=!1,this.frameId=null,this.executeOperations()}))}executeOperations(){Performance.start("DomBatcher.executeOperations");try{for(var e=[];0<this.readQueue.length;){var t=this.readQueue.shift();try{var r=t.operation();t.resolve(r),e.push(r)}catch(e){t.reject(e),Debug.error("DOM read operation failed:",e)}}for(var n=[];0<this.writeQueue.length;){var a=this.writeQueue.shift();try{var o=a.operation();a.resolve(o),n.push(o)}catch(e){a.reject(e),Debug.error("DOM write operation failed:",e)}}Debug.debug(`DOM Batcher executed ${e.length} reads and ${n.length} writes`)}catch(e){Debug.error("Error in DOM batcher execution:",e)}finally{Performance.end("DomBatcher.executeOperations")}}}const domBatcher=new DomBatcher;class VirtualDOM{static parseHTML(e){Performance.start("VirtualDOM.parseHTML");var t=document.createElement("div"),e=(
// Don't trim the HTML - preserve original spacing
t.innerHTML=e,Array.from(t.childNodes).map(e=>this.nodeToVNode(e)).filter(Boolean));return Performance.end("VirtualDOM.parseHTML"),e}static nodeToVNode(t){var e;if(t.nodeType===Node.TEXT_NODE)return null!=(e=t.textContent)&&""!==e&&(""!==e.trim()||(n=t.parentElement,a=!!t.previousSibling,o=!!t.nextSibling,r=new Set(["p","div","li","td","th","h1","h2","h3","h4","h5","h6","span","label","a","strong","em","b","i","small","mark"]),n&&r.has(n.tagName.toLowerCase())&&a&&o))?e:null;if(t.nodeType===Node.COMMENT_NODE)return null;if(t.nodeType!==Node.ELEMENT_NODE)return null;{var r=t,n=r.tagName.toLowerCase(),a=this.SVG_ELEMENTS.has(n)||r.namespaceURI===this.SVG_NAMESPACE;const i={},s={};var o=["INPUT","SELECT","TEXTAREA","BUTTON"].includes(n.toUpperCase());Array.from(r.attributes).forEach(e=>{e.name.startsWith("on")?s[e.name]=e.value:i[e.name]=e.value});let e=[];return this.VOID_ELEMENTS.has(n)||(e=Array.from(r.childNodes).map(e=>this.nodeToVNode(e)).filter(Boolean)),{tag:n,attrs:i,children:e,events:0<Object.keys(s).length?s:void 0,key:i["data-key"],element:r,isSVG:a,isFormElement:o}}}static domToVNodes(e){Performance.start("VirtualDOM.domToVNodes");e=Array.from(e.childNodes).map(e=>this.nodeToVNode(e)).filter(Boolean);return Performance.end("VirtualDOM.domToVNodes"),e}static areVNodeTreesEqual(t,r){if(t.length!==r.length)return!1;for(let e=0;e<t.length;e++)if(!this.areVNodesEqual(t[e],r[e]))return!1;return!0}static areVNodesEqual(e,t){var r,n;if("string"==typeof e&&"string"==typeof t)return r=""===e.trim(),n=""===t.trim(),r&&n||e===t;if(typeof e!=typeof t)return!1;if("object"!=typeof e||"object"!=typeof t)return!1;if(e.tag!==t.tag)return!1;var a=e.attrs||{},o=t.attrs||{},i=Object.keys(a).sort(),s=Object.keys(o).sort();if(i.length!==s.length)return!1;for(let e=0;e<i.length;e++)if(i[e]!==s[e]||a[i[e]]!==o[s[e]])return!1;var l=e.events||{},u=t.events||{},c=Object.keys(l).sort(),p=Object.keys(u).sort();if(c.length!==p.length)return!1;for(let e=0;e<c.length;e++)if(c[e]!==p[e]||l[c[e]]!==u[p[e]])return!1;return this.areVNodeTreesEqual(e.children,t.children)}static diff(i,t){if(Performance.start("VirtualDOM.diff"),!i||!Array.isArray(i))return Performance.end("VirtualDOM.diff"),[];if(!t||!Array.isArray(t))return Performance.end("VirtualDOM.diff"),[];if(this.areVNodeTreesEqual(i,t))return Performance.end("VirtualDOM.diff"),[];const s=[],a=new Map,r=new Map,l=(i.forEach((e,t)=>{"object"==typeof e&&e.key&&a.set(e.key,{vnode:e,index:t})}),t.forEach((e,t)=>{"object"==typeof e&&e.key&&r.set(e.key,{vnode:e,index:t})}),new Set),o=new Set,u=(r.forEach(({vnode:e,index:t},r)=>{var n,r=a.get(r);r&&({vnode:r,index:n}=r,l.add(n),o.add(t),n!==t&&s.push({type:"MOVE",target:r.element,oldIndex:n,newIndex:t}),n=this.diffVNode(r,e),s.push(...n))}),i.filter((e,t)=>!l.has(t)));var e=t.filter((e,t)=>!o.has(t));const c=new Set;return e.forEach(n=>{var e=t.findIndex(e=>e===n),a=this.findBestMatch(n,u,c);if(-1!==a){var o=u[a];c.add(a);let t=-1,r=0;for(let e=0;e<i.length;e++)if(!l.has(e)){if(r===a){t=e;break}r++}t!==e&&s.push({type:"MOVE",target:"object"==typeof o?o.element:void 0,oldIndex:t,newIndex:e});o=this.diffVNode(o,n);s.push(...o)}else s.push({type:"CREATE",vnode:n,newIndex:e})}),u.forEach((e,n)=>{if(!c.has(n)){let t=-1,r=0;for(let e=0;e<i.length;e++)if(!l.has(e)){if(r===n){t=e;break}r++}var a="object"==typeof e?e.element:void 0;s.push({type:"REMOVE",target:a,textNodeIndex:"string"==typeof e?t:void 0,oldIndex:"object"!=typeof e||e.element?void 0:t})}}),Performance.end("VirtualDOM.diff"),s}static diffVNode(e,t){var r,n;return"string"==typeof e||"string"==typeof t?[]:e.tag!==t.tag?[{type:"REPLACE",target:e.element,vnode:t}]:
// Skip comparison for Webflow-specific elements to preserve their state
this.isWebflowElement(e)||this.isWebflowElement(t)?[]:
// Special handling for form elements - preserve their state
e.isFormElement||t.isFormElement?this.diffFormElement(e,t):(r=[],this.hasSignificantContentChange(e,t)?[{type:"REPLACE",target:e.element,vnode:t}]:((n=this.diffAttributes(e.attrs,t.attrs))&&r.push({type:"UPDATE_ATTRS",target:e.element,attrs:n}),(n=this.diffEvents(e.events||{},t.events||{}))&&r.push({type:"UPDATE_EVENTS",target:e.element,events:n}),n=this.diff(e.children,t.children),r.push(...n),r))}static hasSignificantContentChange(e,t){return!(!e.attrs.class||!e.attrs.class.includes("course-card"))||1<Math.abs(e.children.length-t.children.length)||(e=this.extractTextContent(e),t=this.extractTextContent(t),0<e.length&&0<t.length&&this.calculateTextSimilarity(e,t)<.5)||0<e.length&&0<t.length&&Math.min(e.length,t.length)/Math.max(e.length,t.length)<.5}static extractTextContent(e){let t="";for(const r of e.children)"string"==typeof r?t+=r:t+=this.extractTextContent(r);
// Only trim for comparison purposes, but preserve original spacing in actual content
return t.trim()}static calculateTextSimilarity(e,t){e=e.toLowerCase().split(/\s+/);const r=t.toLowerCase().split(/\s+/);t=e.filter(e=>r.includes(e)),e=Math.max(e.length,r.length);return 0<e?t.length/e:0}static isWebflowElement(e){var t=e.attrs.class||e.attrs.className||"";if("string"==typeof t&&t.includes("w-"))return!0;if(Object.keys(e.attrs).some(e=>e.startsWith("w-")))return!0;const r=["w-checkbox","w-radio","w-checkbox-input","w-radio-input","w-form","w-input","w-select","w-textarea"];return!("string"!=typeof t||!t.split(" ").some(e=>r.includes(e)))}
/**
         * Special diffing for form elements to preserve their state and handle Webflow patterns
         */static diffFormElement(e,t){var r=[];const n=new Set(["value","checked","selected"]),a={};Object.entries(t.attrs).forEach(([e,t])=>{n.has(e)||e.startsWith("w-")||(a[e]=t)});var o=this.diffAttributes(e.attrs,a),o=(o&&r.push({type:"UPDATE_ATTRS",target:e.element,attrs:o}),this.diffEvents(e.events||{},t.events||{}));return o&&r.push({type:"UPDATE_EVENTS",target:e.element,events:o}),!e.element||"input"!==e.tag&&"select"!==e.tag&&"textarea"!==e.tag||r.push({type:"UPDATE_WEBFLOW_STATE",target:e.element}),"input"!==e.tag&&"textarea"!==e.tag&&(o=this.diff(e.children,t.children),r.push(...o)),r}static findBestMatch(r,n,a){if("string"==typeof r){for(let e=0;e<n.length;e++)if(!a.has(e)&&"string"==typeof n[e]&&n[e]===r)return e;return-1}let o=-1,i=0;for(let t=0;t<n.length;t++)if(!a.has(t)){var s=n[t];if("string"!=typeof s){let e=0;s.tag===r.tag&&(e+=10),s.attrs.id&&r.attrs.id&&s.attrs.id===r.attrs.id&&(e+=8);s=(s.attrs.class||"").split(" ");const l=(r.attrs.class||"").split(" ");s=s.filter(e=>l.includes(e));(e+=2*s.length)>i&&(i=e,o=t)}}return 10<i?o:-1}static diffAttributes(e,t){var r,n,a,o,i={};let s=!1;for([r,n]of Object.entries(t))e[r]!==n&&(i[r]=n,s=!0);
// Check for removed attributes, but preserve Webflow-specific attributes
for(const l of Object.keys(e))l in t||(l.startsWith("w-")||"class"===l?"class"===l&&(a=(e[l]||"").split(" ").filter(Boolean),o=(t[l]||"").split(" ").filter(Boolean),a=a.filter(e=>e.startsWith("w-")),(o=[...new Set([...o,...a])]).join(" ")!==e[l])&&(i[l]=o.join(" "),s=!0):(i[l]="",s=!0));return s?i:null}static diffEvents(e,t){var r,n,a={},o=[];let i=!1;for([r,n]of Object.entries(t))e[r]!==n&&(a[r]=n,i=!0);for(const s of Object.keys(e))s in t||(o.push(s),i=!0);return i?{...0<Object.keys(a).length&&{add:a},...0<o.length&&{remove:o}}:null}static patch(e,t,r,n){Performance.start("VirtualDOM.patch");const a={replaces:[],moves:[],removes:[],creates:[],updates:[]};if(t.forEach(e=>{switch(e.type){case"REPLACE":a.replaces.push(e);break;case"MOVE":a.moves.push(e);break;case"REMOVE":a.removes.push(e);break;case"CREATE":a.creates.push(e);break;default:a.updates.push(e)}}),this.applyReplaces(a.replaces),this.applyRemoves(e,a.removes),this.applyCreates(e,a.creates),this.applyMoves(e,a.moves),this.applyUpdates(a.updates),r&&0<r.length)try{this.verifyDOMIntegrity(e,r,n)}catch(e){Debug.error("VirtualDOM: Error during integrity check:",e)}Performance.end("VirtualDOM.patch")}static verifyDOMIntegrity(e,t,r){Performance.start("VirtualDOM.verifyDOMIntegrity");var t=this.vNodesToHTML(t),n=e.innerHTML,a=e=>e.replace(/\s+/g," ").trim();a(t)!==a(n)?(Debug.warn("VirtualDOM: DOM integrity check failed - forcing innerHTML update"),e.innerHTML=t,r&&0<Object.keys(r).length&&Debug.debug("VirtualDOM: Restoring form states after integrity fix"),Debug.debug("VirtualDOM: DOM integrity restored via innerHTML")):Debug.debug("VirtualDOM: DOM integrity check passed"),Performance.end("VirtualDOM.verifyDOMIntegrity")}static vNodesToHTML(e){return e.map(e=>{var t,r;return"string"==typeof e?e:(t=(t=Object.entries(e.attrs||{}).map(([e,t])=>e+`="${t}"`).join(" "))?" "+t:"",r=this.vNodesToHTML(e.children),this.VOID_ELEMENTS.has(e.tag)?`<${e.tag}${t}>`:`<${e.tag}${t}>${r}</${e.tag}>`)}).join("")}static applyReplaces(e){e.forEach(e=>{var t;e.target&&e.vnode&&e.target.parentNode&&(t=this.createElementFromVNode(e.vnode),this.cleanupElement(e.target),e.target.parentNode.replaceChild(t,e.target))})}static applyMoves(r,e){e.forEach(e=>{var t;e.target&&void 0!==e.newIndex&&(t=Array.from(r.childNodes),r.insertBefore(e.target,t[e.newIndex]||null))})}static applyUpdates(e){e.forEach(e=>{switch(e.type){case"UPDATE_ATTRS":e.target&&e.attrs&&this.updateElementAttributes(e.target,e.attrs);break;case"UPDATE_EVENTS":e.target&&e.events&&this.updateElementEvents(e.target,e.events);break;case"UPDATE_WEBFLOW_STATE":e.target&&this.updateWebflowFormVisualState(e.target)}})}static applyCreates(n,e){e.sort((e,t)=>(e.newIndex??0)-(t.newIndex??0)).forEach(e=>{var t,r;e.vnode&&(t=this.createElementFromVNode(e.vnode),void 0!==e.newIndex?(r=Array.from(n.childNodes),n.insertBefore(t,r[e.newIndex]||null)):n.appendChild(t))})}static applyRemoves(r,e){var t=e.filter(e=>e.target&&e.target.parentNode),n=e.filter(e=>void 0!==e.textNodeIndex),e=e.filter(e=>!e.target&&void 0!==e.oldIndex),n=[...n.map(e=>({...e,isTextNode:!0})),...e.map(e=>({...e,isTextNode:!1}))].sort((e,t)=>(t.textNodeIndex??t.oldIndex??-1)-(e.textNodeIndex??e.oldIndex??-1));t.forEach(e=>{e.target&&e.target.parentNode&&(this.cleanupElement(e.target),e.target.parentNode.removeChild(e.target))}),n.forEach(e=>{var t=Array.from(r.childNodes)[e.textNodeIndex??e.oldIndex];t&&(e.isTextNode&&t.nodeType===Node.TEXT_NODE?r.removeChild(t):e.isTextNode||t.nodeType!==Node.ELEMENT_NODE||(this.cleanupElement(t),r.removeChild(t)))})}static createElementFromVNode(e){if("string"==typeof e)return document.createTextNode(e);const t=e.isSVG?document.createElementNS(this.SVG_NAMESPACE,e.tag):document.createElement(e.tag);return this.updateElementAttributes(t,e.attrs),e.events&&this.updateElementEvents(t,{add:e.events}),e.children.forEach(e=>{e=this.createElementFromVNode(e);t.appendChild(e)}),e.isFormElement&&this.updateWebflowFormVisualState(t),e.element=t}static updateElementAttributes(r,e){const n=r.namespaceURI===this.SVG_NAMESPACE;let a=!1;Object.entries(e).forEach(([e,t])=>{""===t?r.removeAttribute(e):n?r.setAttributeNS(null,e,t):r.setAttribute(e,t),"checked"===e&&r instanceof HTMLInputElement&&(a=!0)}),a&&this.updateWebflowFormVisualState(r)}static updateElementEvents(r,e){let n=this.elementEventMap.get(r);n||(n=new Set,this.elementEventMap.set(r,n)),e.remove&&e.remove.forEach(e=>{n.has(e)&&(r.removeAttribute(e),n.delete(e))}),e.add&&Object.entries(e.add).forEach(([e,t])=>{r.setAttribute(e,t),n.add(e)})}static updateWebflowFormVisualState(e){var t,r;e instanceof HTMLInputElement&&("checkbox"!==e.type&&"radio"!==e.type||(t=e.closest("checkbox"===e.type?".w-checkbox":".w-radio"))&&(t=t.querySelector(`.w-${e.type}-input`))&&(r=e.checked,Debug.debug(`VirtualDOM: Syncing Webflow visual state for ${e.type} - checked: `+r),r?t.classList.add("w--redirected-checked"):t.classList.remove("w--redirected-checked")))}static cleanupElement(t){var e=this.elementEventMap.get(t);e&&(e.forEach(e=>{t.removeAttribute(e)}),this.elementEventMap.delete(t)),t.querySelectorAll("*").forEach(t=>{var e=this.elementEventMap.get(t);e&&(e.forEach(e=>{t.removeAttribute(e)}),this.elementEventMap.delete(t))})}}Object.defineProperty(VirtualDOM,"VOID_ELEMENTS",{enumerable:!0,configurable:!0,writable:!0,value:new Set(["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"])}),Object.defineProperty(VirtualDOM,"SVG_NAMESPACE",{enumerable:!0,configurable:!0,writable:!0,value:"http://www.w3.org/2000/svg"}),Object.defineProperty(VirtualDOM,"SVG_ELEMENTS",{enumerable:!0,configurable:!0,writable:!0,value:new Set(["svg","circle","ellipse","line","polygon","polyline","rect","path","g","text","tspan","defs","use","symbol","marker","clipPath","mask","pattern","image","foreignObject"])}),Object.defineProperty(VirtualDOM,"elementEventMap",{enumerable:!0,configurable:!0,writable:!0,value:new WeakMap});const GroupManager={getOrCreateGroup(n,e={}){var t=_state.groups[n];if(t)return 0<Object.keys(e).length&&(deepMerge(t.data,e),Debug.debug("[GroupManager] Merged initialData into existing group: "+n,e)),t;let r={};if(ConfigManager.getConfig().storage?.enabled)try{var a=loadFromLocalStorage(n,"group");a?(Debug.info("[GroupManager] Loaded group data from storage for: "+n),r=a):Debug.debug("[GroupManager] No group data found in storage for: "+n)}catch(e){Debug.error(`[GroupManager] Error loading group ${n} from storage: `+e.message)}else Debug.debug("[GroupManager] Storage is disabled, skipping loadFromLocalStorage for: "+n);0<Object.keys(e).length&&(r=deepMerge(r,e),Debug.debug("[GroupManager] Merged initialData onto base for new group: "+n,e)),Debug.info(`[GroupManager] Creating new group: ${n} with base data`,r);const o={name:n,elements:[],addElement:e=>{o.elements.push(e)},removeElement:t=>{o.elements=o.elements.filter(e=>e!==t)},instances:new Set,_isEvaluating:!1,_lastRenderedOutputs:new Map,data:{},getData:()=>JSON.parse(JSON.stringify(_state.groups[n].data)),update:e=>{deepMerge(o.data,e)},refresh:()=>{o.update(o.data)},destroy:()=>{delete _state.groups[n]}};return o.data=createDeepProxy(r,async()=>{if(!o._isEvaluating)try{o._isEvaluating=!0,Debug.info("[Group Update] Updating all instances in group: "+n);var e=Array.from(o.instances).filter(e=>e.template&&"function"==typeof e.template&&!e._htmxUpdateInProgress).map(async t=>{try{var e=PluginManager.applyTransformations(t,o.getData(),"transformDataBeforeRender","json");const r=t.template(e);if(o._lastRenderedOutputs.get(t.instanceName)!==r)return PluginManager.executeHook("updateData",t,{newData:o.data,source:"group"}),EventSystem.publish("updateData",{instanceName:t.instanceName,groupName:n,newData:o.data,source:"group"}),Debug.debug("[Group Update] Updating DOM for "+t.instanceName),t._updateDOM().then(()=>{o._lastRenderedOutputs.set(t.instanceName,r)})}catch(e){Debug.error(`Error updating ${t.instanceName}:`,e)}});await Promise.all(e),ConfigManager.getConfig().storage?.enabled&&(Debug.debug("[Group Update] Saving group data for "+n),saveToLocalStorage(n,o.data,"group"))}finally{o._isEvaluating=!1}}),_state.groups[n]=o,Debug.info("[GroupManager] Created and stored new group: "+n),o},getGroup(e){return _state.groups[e]||null},getAllGroups(){return _state.groups},updateGroup(e,t){e=this.getGroup(e);return e&&e.data&&"object"==typeof t?(deepMerge(e.data,t),e):null},removeGroup(e){this.getGroup(e)&&(delete _state.groups[e],Debug.info("Removed group: "+e))},removeAllGroups(){_state.groups={},Debug.info("Removed all groups")},addInstanceToGroup(e,t){var r=this.getOrCreateGroup(t);if(r){if(e.groupName=t,r.instances.add(e),e.template&&"function"==typeof e.template){var n=PluginManager.applyTransformations(e,r.getData(),"transformDataBeforeRender","json");try{var a=e.template(n);r._lastRenderedOutputs.set(e.instanceName,a)}catch(e){Debug.error("Error rendering template for group member: "+e.message)}}else Debug.debug("Skipping initial render for group member: template not ready for "+e.instanceName);Debug.debug(`Added instance ${e.instanceName} to group `+t)}},removeInstanceFromGroup(e){var t;e.groupName&&((t=_state.groups[e.groupName])&&(t.instances.delete(e),t._lastRenderedOutputs.delete(e.instanceName),Debug.debug(`Removed instance ${e.instanceName} from group `+e.groupName),0===t.instances.size)&&(delete _state.groups[e.groupName],Debug.info("Removed empty group: "+e.groupName)),delete e.groupName)}},InstanceManager={getOrCreateInstance(e,t={}){if(AttributeMatcher._hasAttribute(e,"indexed"))return Debug.debug("Element already indexed: "+(e.id||AttributeMatcher._getRawAttribute(e,"instance"))),_state.instances[AttributeMatcher._getRawAttribute(e,"instance")||e.id];const r=AttributeMatcher._getRawAttribute(e,"instance")||e.id;if(!r)return Debug.error("No instance name found for element"),null;let n={...t};ConfigManager.getConfig().storage?.enabled&&(a=loadFromLocalStorage(r,"instance"))&&(Debug.info(`Found stored data for instance: ${r}, merging with initial data`),n={...a,...t});var a=AttributeMatcher._getRawAttribute(e,"group");let l=_state.instances[r];if(l)l.elements.includes(e)||l.elements.push(e),e.setAttribute("fp-indexed","true"),Debug.debug("Added element to existing instance: "+r),a&&!l.groupName&&(l.groupName=a,Debug.info(`Added existing instance ${r} to group `+a));else{if(!AttributeMatcher._hasAttribute(e,"template"))return(t=AttributeMatcher.findMatchingElements("template")?.find(e=>AttributeMatcher._getRawAttribute(e,"instance")===r))?(Debug.debug("Found parent template element for instance "+r),this.getOrCreateInstance(t,n)):(Debug.error("No template element found for instance "+r),null);var t={instanceName:r,elements:[e],template:null,templateId:AttributeMatcher._getRawAttribute(e,"template")||"",templateElement:e,data:n,cleanup:()=>{l.groupName&&GroupManager.removeInstanceFromGroup(l),l.elements=[]}},o=instanceMethods(r);l=Object.assign(t,o);for(const[i]of PluginManager.instanceMethods.entries())l[i]=(...e)=>PluginManager.executeInstanceMethod(i,l,...e);_state.instances[r]=l,PluginManager.executeHook("newInstance",l),Debug.info("Created new instance: "+r),AttributeMatcher.findMatchingElements("instance",r).forEach(n=>{if(n!==e){var a=AttributeMatcher.findInheritedAttribute(n,"target");if(a){let r=[];switch(!0){case"this"===a:r=[n];break;case a.startsWith("closest "):var o=a.substring(8),o=n.closest(o);o&&(r=[o]);break;case a.startsWith("find "):o=a.substring(5),o=n.querySelector(o);o&&(r=[o]);break;case"next"===a:o=n.nextElementSibling;o&&(r=[o]);break;case a.startsWith("next "):var i=a.substring(5);let e=n.nextElementSibling;for(;e;){if(e.matches(i)){r=[e];break}e=e.nextElementSibling}break;case"previous"===a:o=n.previousElementSibling;o&&(r=[o]);break;case a.startsWith("previous "):var s=a.substring(9);let t=n.previousElementSibling;for(;t;){if(t.matches(s)){r=[t];break}t=t.previousElementSibling}break;default:r=Array.from(document.querySelectorAll(a))}r.forEach(e=>{l.elements.includes(e)||l.elements.push(e),e.setAttribute("fp-indexed","true")})}else l.elements.includes(n)||l.elements.push(n);n.setAttribute("fp-indexed","true")}}),e.setAttribute("fp-indexed","true"),a&&(l.groupName=a,Debug.info(`Instance ${r} will be added to group `+a))}return l},updateInstanceData(e,t){e&&e.data?deepMerge(e.data,t):Debug.error("Cannot update data: Instance or instance.data is invalid.")}},ALLOWED_FUNCTIONS=new Map,RequestHandler={processingElements:new Map,currentRequestId:0,generateRequestId(){return`fp-${Date.now()}-`+this.currentRequestId++},handleRequest(e,t,r){if(e&&AttributeMatcher._hasAttribute(e,"template")){var n=this.processingElements.get(e);switch(t=t||this.generateRequestId(),r){case"start":n&&n.requestId===t||(this.processingElements.set(e,{requestId:t,timestamp:Date.now(),processed:!1}),Debug.debug("Added element to processing set",e,t));break;case"process":return!(!n||n.requestId!==t||(n.processed=!0,this.processingElements.set(e,n),Debug.debug(`Marked request ${t} as processed for `+(e.id||"unknown")),0));case"cleanup":n&&n.requestId===t?(this.processingElements.delete(e),Debug.debug("Cleaned up after request",e,t)):Debug.debug("Skipping cleanup - request mismatch",{current:n?.requestId,received:t})}}},cleanupStale(){var e,t,r=Date.now();for([e,t]of this.processingElements.entries())1e4<r-t.timestamp&&(this.processingElements.delete(e),Debug.debug("Cleaned up stale processing entry",e,t.requestId))},setupEventListeners(){document.body.addEventListener("htmx:beforeRequest",e=>{const t=e.detail.elt;var r,n,a=e.detail.requestId||this.generateRequestId();this.handleRequest(t,e.detail.requestId=a,"start");let o=null,i=null;for([r,n]of Object.entries(_state.instances))if(Array.from(n.elements).some(e=>e.contains(t))){o=n,i=r;break}o&&EventSystem.publish("requestStart",{instanceName:i,...e.detail})}),document.body.addEventListener("htmx:beforeSwap",e=>{var t=e.detail.requestId,r=this.processingElements.get(e.detail.elt);r&&r.requestId!==t&&(e.preventDefault(),Debug.debug("Prevented swap - request ID mismatch"))}),document.body.addEventListener("htmx:responseError",e=>{e.detail.failed&&this.handleRequest(e.detail.elt,e.detail.requestId,"cleanup")}),setInterval(()=>this.cleanupStale(),1e4),window.addEventListener("unload",()=>{this.processingElements.clear()})}},htmxAttributes=["boost","get","post","on","push-url","select","select-oob","swap","swap-oob","target","trigger","vals","confirm","delete","disable","disabled-elt","disinherit","encoding","ext","headers","history","history-elt","include","indicator","params","patch","preserve","prompt","put","replace-url","request","sync","validate","vars"];var htmx$2=function(){function parseInterval(e){var t;if(null!=e)return t=NaN,t="ms"==e.slice(-2)?parseFloat(e.slice(0,-2)):"s"==e.slice(-1)?1e3*parseFloat(e.slice(0,-1)):"m"==e.slice(-1)?1e3*parseFloat(e.slice(0,-1))*60:parseFloat(e),isNaN(t)?void 0:t}function getRawAttribute(e,t){return e instanceof Element&&e.getAttribute(t)}function hasAttribute(e,t){return!!e.hasAttribute&&(e.hasAttribute(t)||e.hasAttribute("data-"+t))}function getAttributeValue(e,t){return getRawAttribute(e,t)||getRawAttribute(e,"data-"+t)}function parentElt(e){var t=e.parentElement;return!t&&e.parentNode instanceof ShadowRoot?e.parentNode:t}function getDocument(){return document}function getRootNode(e,t){return e.getRootNode?e.getRootNode({composed:t}):getDocument()}function getClosestMatch(e,t){for(;e&&!t(e);)e=parentElt(e);return e||null}function getAttributeValueWithDisinheritance(e,t,r){var n=getAttributeValue(t,r),a=getAttributeValue(t,"hx-disinherit"),o=getAttributeValue(t,"hx-inherit");if(e!==t){if(htmx.config.disableInheritance)return o&&("*"===o||0<=o.split(" ").indexOf(r))?n:null;if(a&&("*"===a||0<=a.split(" ").indexOf(r)))return"unset"}return n}function getClosestAttributeValue(t,r){let n=null;if(getClosestMatch(t,function(e){return!!(n=getAttributeValueWithDisinheritance(t,asElement(e),r))}),"unset"!==n)return n}function matches(e,t){var r=e instanceof Element&&(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector);return r&&r.call(e,t)}function getStartTag(e){e=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i.exec(e);return e?e[1].toLowerCase():""}function parseHTML(e){return(new DOMParser).parseFromString(e,"text/html")}function takeChildrenFor(e,t){for(;0<t.childNodes.length;)e.append(t.childNodes[0])}function duplicateScript(e){const t=getDocument().createElement("script");return forEach(e.attributes,function(e){t.setAttribute(e.name,e.value)}),t.textContent=e.textContent,t.async=!1,htmx.config.inlineScriptNonce&&(t.nonce=htmx.config.inlineScriptNonce),t}function isJavaScriptScriptNode(e){return e.matches("script")&&("text/javascript"===e.type||"module"===e.type||""===e.type)}function normalizeScriptTags(e){Array.from(e.querySelectorAll("script")).forEach(e=>{if(isJavaScriptScriptNode(e)){var t=duplicateScript(e),r=e.parentNode;try{r.insertBefore(t,e)}catch(e){logError(e)}finally{e.remove()}}})}function makeFragment(e){var t=(e=e.toString()).replace(/<head(\s[^>]*)?>[\s\S]*?<\/head>/i,""),r=getStartTag(t);let n;return"html"===r?(n=new DocumentFragment,e=parseHTML(e),takeChildrenFor(n,e.body),n.title=e.title):"body"===r?(n=new DocumentFragment,e=parseHTML(t),takeChildrenFor(n,e.body),n.title=e.title):(r=parseHTML('<body><template class="internal-htmx-wrapper">'+t+"</template></body>"),(n=r.querySelector("template").content).title=r.title,(e=n.querySelector("title"))&&e.parentNode===n&&(e.remove(),n.title=e.innerText)),n&&(htmx.config.allowScriptTags?normalizeScriptTags(n):n.querySelectorAll("script").forEach(e=>e.remove())),n}function maybeCall(e){e&&e()}function isType(e,t){return Object.prototype.toString.call(e)==="[object "+t+"]"}function isFunction(e){return"function"==typeof e}function isRawObject(e){return isType(e,"Object")}function getInternalData(e){var t="htmx-internal-data",r=e[t];return r||(e[t]={})}function toArray(t){var r=[];if(t)for(let e=0;e<t.length;e++)r.push(t[e]);return r}function forEach(t,r){if(t)for(let e=0;e<t.length;e++)r(t[e])}function isScrolledIntoView(e){e=e.getBoundingClientRect();return e.top<window.innerHeight&&0<=e.bottom}function bodyContains(e){return e.getRootNode({composed:!0})===document}function splitOnWhitespace(e){return e.trim().split(/\s+/)}function mergeObjects(e,t){for(const r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}function parseJSON(e){try{return JSON.parse(e)}catch(e){return logError(e),null}}function canAccessLocalStorage(){var e="htmx:localStorageTest";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}}function normalizePath(t){try{var e=new URL(t);return/^\/$/.test(t=e?e.pathname+e.search:t)?t:t.replace(/\/+$/,"")}catch(e){return t}}function internalEval(str){return maybeEval(getDocument().body,function(){return eval(str)})}function onLoadHelper(t){return htmx.on("htmx:load",function(e){t(e.detail.elt)})}function logAll(){htmx.logger=function(e,t,r){console&&console.log(t,e,r)}}function logNone(){htmx.logger=null}function find(e,t){return"string"!=typeof e?e.querySelector(t):find(getDocument(),e)}function findAll(e,t){return"string"!=typeof e?e.querySelectorAll(t):findAll(getDocument(),e)}function getWindow(){return window}function removeElement(e,t){e=resolveTarget(e),t?getWindow().setTimeout(function(){removeElement(e),e=null},t):parentElt(e).removeChild(e)}function asElement(e){return e instanceof Element?e:null}function asHtmlElement(e){return e instanceof HTMLElement?e:null}function asString(e){return"string"==typeof e?e:null}function asParentNode(e){return e instanceof Element||e instanceof Document||e instanceof DocumentFragment?e:null}function addClassToElement(e,t,r){(e=asElement(resolveTarget(e)))&&(r?getWindow().setTimeout(function(){addClassToElement(e,t),e=null},r):e.classList&&e.classList.add(t))}function removeClassFromElement(e,t,r){let n=asElement(resolveTarget(e));n&&(r?getWindow().setTimeout(function(){removeClassFromElement(n,t),n=null},r):n.classList&&(n.classList.remove(t),0===n.classList.length)&&n.removeAttribute("class"))}function toggleClassOnElement(e,t){(e=resolveTarget(e)).classList.toggle(t)}function takeClassForElement(e,t){forEach((e=resolveTarget(e)).parentElement.children,function(e){removeClassFromElement(e,t)}),addClassToElement(asElement(e),t)}function closest(e,t){if((e=asElement(resolveTarget(e)))&&e.closest)return e.closest(t);do{if(null==e||matches(e,t))return e}while(e=e&&asElement(parentElt(e)));return null}function startsWith(e,t){return e.substring(0,t.length)===t}function endsWith(e,t){return e.substring(e.length-t.length)===t}function normalizeSelector(e){e=e.trim();return startsWith(e,"<")&&endsWith(e,"/>")?e.substring(1,e.length-2):e}function querySelectorAllExt(t,n,r){if(0===n.indexOf("global "))return querySelectorAllExt(t,n.slice(7),!0);t=resolveTarget(t);var a=[];{let t=0,r=0;for(let e=0;e<n.length;e++){var o=n[e];","===o&&0===t?(a.push(n.substring(r,e)),r=e+1):"<"===o?t++:"/"===o&&e<n.length-1&&">"===n[e+1]&&t--}r<n.length&&a.push(n.substring(r))}for(var e,i,s=[],l=[];0<a.length;){const n=normalizeSelector(a.shift());let e;0===n.indexOf("closest ")?e=closest(asElement(t),normalizeSelector(n.substr(8))):0===n.indexOf("find ")?e=find(asParentNode(t),normalizeSelector(n.substr(5))):"next"===n||"nextElementSibling"===n?e=asElement(t).nextElementSibling:0===n.indexOf("next ")?e=scanForwardQuery(t,normalizeSelector(n.substr(5)),!!r):"previous"===n||"previousElementSibling"===n?e=asElement(t).previousElementSibling:0===n.indexOf("previous ")?e=scanBackwardsQuery(t,normalizeSelector(n.substr(9)),!!r):"document"===n?e=document:"window"===n?e=window:"body"===n?e=document.body:"root"===n?e=getRootNode(t,!!r):"host"===n?e=t.getRootNode().host:l.push(n),e&&s.push(e)}return 0<l.length&&(e=l.join(","),i=asParentNode(getRootNode(t,!!r)),s.push(...toArray(i.querySelectorAll(e)))),s}function querySelectorExt(e,t){return("string"!=typeof e?querySelectorAllExt(e,t):querySelectorAllExt(getDocument().body,e))[0]}function resolveTarget(e,t){return"string"==typeof e?find(asParentNode(t)||document,e):e}function processEventArgs(e,t,r,n){return isFunction(t)?{target:getDocument().body,event:asString(e),listener:t,options:r}:{target:resolveTarget(e),event:asString(t),listener:r,options:n}}function addEventListenerImpl(t,r,n,a){return ready(function(){var e=processEventArgs(t,r,n,a);e.target.addEventListener(e.event,e.listener,e.options)}),isFunction(r)?r:n}function removeEventListenerImpl(t,r,n){return ready(function(){var e=processEventArgs(t,r,n);e.target.removeEventListener(e.event,e.listener)}),isFunction(r)?r:n}function findAttributeTargets(e,t){var r=getClosestAttributeValue(e,t);if(r)return"this"===r?[findThisElement(e,t)]:0===(e=querySelectorAllExt(e,r)).length?(logError('The selector "'+r+'" on '+t+" returned no matches!"),[DUMMY_ELT]):e}function findThisElement(e,t){return asElement(getClosestMatch(e,function(e){return null!=getAttributeValue(asElement(e),t)}))}function getTarget(e){var t=getClosestAttributeValue(e,"hx-target");return t?"this"===t?findThisElement(e,"hx-target"):querySelectorExt(e,t):getInternalData(e).boosted?getDocument().body:e}function shouldSettleAttribute(t){var r=htmx.config.attributesToSettle;for(let e=0;e<r.length;e++)if(t===r[e])return 1}function cloneAttributes(t,r){forEach(t.attributes,function(e){!r.hasAttribute(e.name)&&shouldSettleAttribute(e.name)&&t.removeAttribute(e.name)}),forEach(r.attributes,function(e){shouldSettleAttribute(e.name)&&t.setAttribute(e.name,e.value)})}function isInlineSwap(t,e){var r=getExtensions(e);for(let e=0;e<r.length;e++){var n=r[e];try{if(n.isInlineSwap(t))return 1}catch(e){logError(e)}}return"outerHTML"===t}function oobSwap(e,a,o,t){t=t||getDocument();let r="#"+getRawAttribute(a,"id"),i="outerHTML";"true"!==e&&(0<e.indexOf(":")?(i=e.substring(0,e.indexOf(":")),r=e.substring(e.indexOf(":")+1)):i=e),a.removeAttribute("hx-swap-oob"),a.removeAttribute("data-hx-swap-oob");t=querySelectorAllExt(t,r,!1);return t?(forEach(t,function(e){let t;var r=a.cloneNode(!0);(t=getDocument().createDocumentFragment()).appendChild(r);const n={shouldSwap:!0,target:e,fragment:t=isInlineSwap(i,e)?t:asParentNode(r)};triggerEvent(e,"htmx:oobBeforeSwap",n)&&(e=n.target,n.shouldSwap&&(handlePreservedElements(t),swapWithStyle(i,e,e,t,o),restorePreservedElements()),forEach(o.elts,function(e){triggerEvent(e,"htmx:oobAfterSwap",n)}))}),a.parentNode.removeChild(a)):(a.parentNode.removeChild(a),triggerErrorEvent(getDocument().body,"htmx:oobErrorNoTarget",{content:a})),e}function restorePreservedElements(){var e=find("#--htmx-preserve-pantry--");if(e){for(const r of[...e.children]){var t=find("#"+r.id);t.parentNode.moveBefore(r,t),t.remove()}e.remove()}}function handlePreservedElements(e){forEach(findAll(e,"[hx-preserve], [data-hx-preserve]"),function(e){var t=getAttributeValue(e,"id"),t=getDocument().getElementById(t);if(null!=t)if(e.moveBefore){let e=find("#--htmx-preserve-pantry--");null==e&&(getDocument().body.insertAdjacentHTML("afterend","<div id='--htmx-preserve-pantry--'></div>"),e=find("#--htmx-preserve-pantry--")),e.moveBefore(t,null)}else e.parentNode.replaceChild(t,e)})}function handleAttributes(o,e,i){forEach(e.querySelectorAll("[id]"),function(e){var t=getRawAttribute(e,"id");if(t&&0<t.length){var t=t.replace("'","\\'"),r=e.tagName.replace(":","\\:"),n=asParentNode(o),r=n&&n.querySelector(r+"[id='"+t+"']");if(r&&r!==n){const a=e.cloneNode();cloneAttributes(e,r),i.tasks.push(function(){cloneAttributes(e,a)})}}})}function makeAjaxLoadTask(e){return function(){removeClassFromElement(e,htmx.config.addedClass),processNode(asElement(e)),processFocus(asParentNode(e)),triggerEvent(e,"htmx:load")}}function processFocus(e){var t="[autofocus]",e=asHtmlElement(matches(e,t)?e:e.querySelector(t));null!=e&&e.focus()}function insertNodesBefore(e,t,r,n){for(handleAttributes(e,r,n);0<r.childNodes.length;){var a=r.firstChild;addClassToElement(asElement(a),htmx.config.addedClass),e.insertBefore(a,t),a.nodeType!==Node.TEXT_NODE&&a.nodeType!==Node.COMMENT_NODE&&n.tasks.push(makeAjaxLoadTask(a))}}function stringHash(e,t){let r=0;for(;r<e.length;)t=(t<<5)-t+e.charCodeAt(r++)|0;return t}function attributeHash(t){let r=0;if(t.attributes)for(let e=0;e<t.attributes.length;e++){var n=t.attributes[e];n.value&&(r=stringHash(n.name,r),r=stringHash(n.value,r))}return r}function deInitOnHandlers(t){var r=getInternalData(t);if(r.onHandlers){for(let e=0;e<r.onHandlers.length;e++){var n=r.onHandlers[e];removeEventListenerImpl(t,n.event,n.listener)}delete r.onHandlers}}function deInitNode(e){const t=getInternalData(e);t.timeout&&clearTimeout(t.timeout),t.listenerInfos&&forEach(t.listenerInfos,function(e){e.on&&removeEventListenerImpl(e.on,e.trigger,e.listener)}),deInitOnHandlers(e),forEach(Object.keys(t),function(e){"firstInitCompleted"!==e&&delete t[e]})}function cleanUpElement(e){triggerEvent(e,"htmx:beforeCleanupElement"),deInitNode(e),e.children&&forEach(e.children,function(e){cleanUpElement(e)})}function swapOuterHTML(t,e,r){if(t instanceof Element&&"BODY"===t.tagName)return swapInnerHTML(t,e,r);let n;var a=t.previousSibling,o=parentElt(t);if(o){for(insertNodesBefore(o,t,e,r),n=null==a?o.firstChild:a.nextSibling,r.elts=r.elts.filter(function(e){return e!==t});n&&n!==t;)n instanceof Element&&r.elts.push(n),n=n.nextSibling;cleanUpElement(t),t instanceof Element?t.remove():t.parentNode.removeChild(t)}}function swapAfterBegin(e,t,r){insertNodesBefore(e,e.firstChild,t,r)}function swapBeforeBegin(e,t,r){insertNodesBefore(parentElt(e),e,t,r)}function swapBeforeEnd(e,t,r){insertNodesBefore(e,null,t,r)}function swapAfterEnd(e,t,r){insertNodesBefore(parentElt(e),e.nextSibling,t,r)}function swapDelete(e){cleanUpElement(e);var t=parentElt(e);t&&t.removeChild(e)}function swapInnerHTML(e,t,r){var n=e.firstChild;if(insertNodesBefore(e,n,t,r),n){for(;n.nextSibling;)cleanUpElement(n.nextSibling),e.removeChild(n.nextSibling);cleanUpElement(n),e.removeChild(n)}}function swapWithStyle(t,e,r,n,a){switch(t){case"none":return;case"outerHTML":return swapOuterHTML(r,n,a);case"afterbegin":return swapAfterBegin(r,n,a);case"beforebegin":return swapBeforeBegin(r,n,a);case"beforeend":return swapBeforeEnd(r,n,a);case"afterend":return swapAfterEnd(r,n,a);case"delete":return swapDelete(r);default:var o=getExtensions(e);for(let e=0;e<o.length;e++){var i=o[e];try{var s=i.handleSwap(t,r,n,a);if(s){if(Array.isArray(s))for(let e=0;e<s.length;e++){var l=s[e];l.nodeType!==Node.TEXT_NODE&&l.nodeType!==Node.COMMENT_NODE&&a.tasks.push(makeAjaxLoadTask(l))}return}}catch(e){logError(e)}}"innerHTML"===t?swapInnerHTML(r,n,a):swapWithStyle(htmx.config.defaultSwapStyle,e,r,n,a)}}function findAndSwapOobElements(e,r,n){e=findAll(e,"[hx-swap-oob], [data-hx-swap-oob]");return forEach(e,function(e){var t;htmx.config.allowNestedOobSwaps||null===e.parentElement?null!=(t=getAttributeValue(e,"hx-swap-oob"))&&oobSwap(t,e,r,n):(e.removeAttribute("hx-swap-oob"),e.removeAttribute("data-hx-swap-oob"))}),0<e.length}function swap(e,t,n,a){function Jp(){var e;forEach(s.tasks,function(e){e.call()}),forEach(s.elts,function(e){e.classList&&e.classList.remove(htmx.config.settlingClass),triggerEvent(e,"htmx:afterSettle",a.eventInfo)}),a.anchor&&(e=asElement(resolveTarget("#"+a.anchor)))&&e.scrollIntoView({block:"start",behavior:"auto"}),updateScrollState(s.elts,n),a.afterSettleCallback&&a.afterSettleCallback()}a=a||{},e=resolveTarget(e);const o=a.contextElement?getRootNode(a.contextElement,!1):getDocument();
// preserve focus and selection
var r=document.activeElement;let i={};try{i={elt:r,start:r?r.selectionStart:null,end:r?r.selectionEnd:null}}catch(e){}const s=makeSettleInfo(e);if("textContent"===n.swapStyle)e.textContent=t;else{let r=makeFragment(t);if(s.title=r.title,a.selectOOB){var l=a.selectOOB.split(",");for(let t=0;t<l.length;t++){var u=l[t].split(":",2);let e=u[0].trim();0===e.indexOf("#")&&(e=e.substring(1));var u=u[1]||"true",c=r.querySelector("#"+e);c&&oobSwap(u,c,s,o)}}if(findAndSwapOobElements(r,s,o),forEach(findAll(r,"template"),function(e){e.content&&findAndSwapOobElements(e.content,s,o)&&e.remove()}),a.select){const p=getDocument().createDocumentFragment();forEach(r.querySelectorAll(a.select),function(e){p.appendChild(e)}),r=p}handlePreservedElements(r),swapWithStyle(n.swapStyle,a.contextElement,e,r,s),restorePreservedElements()}if(i.elt&&!bodyContains(i.elt)&&getRawAttribute(i.elt,"id")){r=document.getElementById(getRawAttribute(i.elt,"id")),t={preventScroll:void 0!==n.focusScroll?!n.focusScroll:!htmx.config.defaultFocusScroll};if(r){if(i.start&&r.setSelectionRange)try{r.setSelectionRange(i.start,i.end)}catch(e){}r.focus(t)}}e.classList.remove(htmx.config.swappingClass),forEach(s.elts,function(e){e.classList&&e.classList.add(htmx.config.settlingClass),triggerEvent(e,"htmx:afterSwap",a.eventInfo)}),a.afterSwapCallback&&a.afterSwapCallback(),n.ignoreTitle||handleTitle(s.title),0<n.settleDelay?getWindow().setTimeout(Jp,n.settleDelay):Jp()}function handleTriggerHeader(e,t,r){e=e.getResponseHeader(t);if(0===e.indexOf("{")){var n=parseJSON(e);for(const o in n)if(n.hasOwnProperty(o)){let e=n[o];isRawObject(e)?r=void 0!==e.target?e.target:r:e={value:e},triggerEvent(r,o,e)}}else{var a=e.split(",");for(let e=0;e<a.length;e++)triggerEvent(r,a[e].trim(),[])}}function tokenizeString(e){var t=[];let r=0;for(;r<e.length;){if(SYMBOL_START.exec(e.charAt(r))){for(var n=r;SYMBOL_CONT.exec(e.charAt(r+1));)r++;t.push(e.substring(n,r+1))}else if(-1!==STRINGISH_START.indexOf(e.charAt(r))){var a=e.charAt(r),n=r;for(r++;r<e.length&&e.charAt(r)!==a;)"\\"===e.charAt(r)&&r++,r++;t.push(e.substring(n,r+1))}else{var o=e.charAt(r);t.push(o)}r++}return t}function isPossibleRelativeReference(e,t,r){return SYMBOL_START.exec(e.charAt(0))&&"true"!==e&&"false"!==e&&"this"!==e&&e!==r&&"."!==t}function maybeGenerateConditional(n,a,o){if("["===a[0]){a.shift();let e=1,t=" return (function("+o+"){ return (",r=null;for(;0<a.length;){var i=a[0];if("]"===i){if(0==--e){null===r&&(t+="true"),a.shift(),t+=")})";try{var s=maybeEval(n,function(){return Function(t)()},function(){return!0});return s.source=t,s}catch(e){return triggerErrorEvent(getDocument().body,"htmx:syntax:error",{error:e,source:t}),null}}}else"["===i&&e++;isPossibleRelativeReference(i,r,o)?t+="(("+o+"."+i+") ? ("+o+"."+i+") : (window."+i+"))":t+=i,r=a.shift()}}}function consumeUntil(e,t){let r="";for(;0<e.length&&!t.test(e[0]);)r+=e.shift();return r}function consumeCSSSelector(e){let t;return 0<e.length&&COMBINED_SELECTOR_START.test(e[0])?(e.shift(),t=consumeUntil(e,COMBINED_SELECTOR_END).trim(),e.shift()):t=consumeUntil(e,WHITESPACE_OR_COMMA),t}function parseAndCacheTrigger(e,t,r){var n=[],a=tokenizeString(t);do{consumeUntil(a,NOT_WHITESPACE);var o=a.length,i=consumeUntil(a,/[,\[\s]/);if(""!==i)if("every"===i){var s={trigger:"every"};consumeUntil(a,NOT_WHITESPACE),s.pollInterval=parseInterval(consumeUntil(a,/[,\[\s]/)),consumeUntil(a,NOT_WHITESPACE),(l=maybeGenerateConditional(e,a,"event"))&&(s.eventFilter=l),n.push(s)}else{var l,u={trigger:i};for((l=maybeGenerateConditional(e,a,"event"))&&(u.eventFilter=l),consumeUntil(a,NOT_WHITESPACE);0<a.length&&","!==a[0];){var c,p,h=a.shift();"changed"===h?u.changed=!0:"once"===h?u.once=!0:"consume"===h?u.consume=!0:"delay"===h&&":"===a[0]?(a.shift(),u.delay=parseInterval(consumeUntil(a,WHITESPACE_OR_COMMA))):"from"===h&&":"===a[0]?(a.shift(),COMBINED_SELECTOR_START.test(a[0])?c=consumeCSSSelector(a):"closest"!==(c=consumeUntil(a,WHITESPACE_OR_COMMA))&&"find"!==c&&"next"!==c&&"previous"!==c||(a.shift(),0<(p=consumeCSSSelector(a)).length&&(c+=" "+p)),u.from=c):"target"===h&&":"===a[0]?(a.shift(),u.target=consumeCSSSelector(a)):"throttle"===h&&":"===a[0]?(a.shift(),u.throttle=parseInterval(consumeUntil(a,WHITESPACE_OR_COMMA))):"queue"===h&&":"===a[0]?(a.shift(),u.queue=consumeUntil(a,WHITESPACE_OR_COMMA)):"root"===h&&":"===a[0]?(a.shift(),u[h]=consumeCSSSelector(a)):"threshold"===h&&":"===a[0]?(a.shift(),u[h]=consumeUntil(a,WHITESPACE_OR_COMMA)):triggerErrorEvent(e,"htmx:syntax:error",{token:a.shift()}),consumeUntil(a,NOT_WHITESPACE)}n.push(u)}}while(a.length===o&&triggerErrorEvent(e,"htmx:syntax:error",{token:a.shift()}),consumeUntil(a,NOT_WHITESPACE),","===a[0]&&a.shift());return r&&(r[t]=n),n}function getTriggerSpecs(e){var t,r=getAttributeValue(e,"hx-trigger");let n=[];return r&&(t=htmx.config.triggerSpecsCache,n=t&&t[r]||parseAndCacheTrigger(e,r,t)),0<n.length?n:matches(e,"form")?[{trigger:"submit"}]:!matches(e,'input[type="button"], input[type="submit"]')&&matches(e,INPUT_SELECTOR)?[{trigger:"change"}]:[{trigger:"click"}]}function cancelPolling(e){getInternalData(e).cancelled=!0}function processPolling(e,t,r){const n=getInternalData(e);n.timeout=getWindow().setTimeout(function(){bodyContains(e)&&!0!==n.cancelled&&(maybeFilterEvent(r,e,makeEvent("hx:poll:trigger",{triggerSpec:r,target:e}))||t(e),processPolling(e,t,r))},r.pollInterval)}function isLocalLink(e){return location.hostname===e.hostname&&getRawAttribute(e,"href")&&0!==getRawAttribute(e,"href").indexOf("#")}function eltIsDisabled(e){return closest(e,htmx.config.disableSelector)}function boostElement(t,a,e){if(t instanceof HTMLAnchorElement&&isLocalLink(t)&&(""===t.target||"_self"===t.target)||"FORM"===t.tagName&&"dialog"!==String(getRawAttribute(t,"method")).toLowerCase()){a.boosted=!0;let r,n;var o;"A"===t.tagName?(r="get",n=getRawAttribute(t,"href")):(o=getRawAttribute(t,"method"),r=o?o.toLowerCase():"get",null!=(n=getRawAttribute(t,"action"))&&""!==n||(n=getDocument().location.href),"get"===r&&n.includes("?")&&(n=n.replace(/\?[^#]+/,""))),e.forEach(function(e){addEventListener(t,function(e,t){e=asElement(e);eltIsDisabled(e)?cleanUpElement(e):issueAjaxRequest(r,n,e,t)},a,e,!0)})}}function shouldCancel(e,t){t=asElement(t);if(t&&("submit"===e.type||"click"===e.type)){if("FORM"===t.tagName)return!0;if(matches(t,'input[type="submit"], button')&&(matches(t,"[form]")||null!==closest(t,"form")))return!0;if(t instanceof HTMLAnchorElement&&t.href&&("#"===t.getAttribute("href")||0!==t.getAttribute("href").indexOf("#")))return!0}return!1}function ignoreBoostedAnchorCtrlClick(e,t){return getInternalData(e).boosted&&e instanceof HTMLAnchorElement&&"click"===t.type&&(t.ctrlKey||t.metaKey)}function maybeFilterEvent(t,r,e){t=t.eventFilter;if(t)try{return!0!==t.call(r,e)}catch(e){r=t.source;return triggerErrorEvent(getDocument().body,"htmx:eventFilter:error",{error:e,source:r}),1}}function addEventListener(i,s,e,l,u){const c=getInternalData(i);var t=l.from?querySelectorAllExt(i,l.from):[i];l.changed&&("lastValue"in c||(c.lastValue=new WeakMap),t.forEach(function(e){c.lastValue.has(l)||c.lastValue.set(l,new WeakMap),c.lastValue.get(l).set(e,e.value)})),forEach(t,function(a){const o=function(e){if(bodyContains(i)){if(!ignoreBoostedAnchorCtrlClick(i,e)&&((u||shouldCancel(e,i))&&e.preventDefault(),!maybeFilterEvent(l,i,e))){var t=getInternalData(e);if(t.triggerSpec=l,null==t.handledFor&&(t.handledFor=[]),t.handledFor.indexOf(i)<0&&(t.handledFor.push(i),l.consume&&e.stopPropagation(),!l.target||!e.target||matches(asElement(e.target),l.target))){if(l.once){if(c.triggeredOnce)return;c.triggeredOnce=!0}if(l.changed){var t=event.target,r=t.value,n=c.lastValue.get(l);if(n.has(t)&&n.get(t)===r)return;n.set(t,r)}c.delayed&&clearTimeout(c.delayed),c.throttle||(0<l.throttle?c.throttle||(triggerEvent(i,"htmx:trigger"),s(i,e),c.throttle=getWindow().setTimeout(function(){c.throttle=null},l.throttle)):0<l.delay?c.delayed=getWindow().setTimeout(function(){triggerEvent(i,"htmx:trigger"),s(i,e)},l.delay):(triggerEvent(i,"htmx:trigger"),s(i,e)))}}}else a.removeEventListener(l.trigger,o)};null==e.listenerInfos&&(e.listenerInfos=[]),e.listenerInfos.push({trigger:l.trigger,listener:o,on:a}),a.addEventListener(l.trigger,o)})}function initScrollHandler(){scrollHandler||(scrollHandler=function(){windowIsScrolling=!0},window.addEventListener("scroll",scrollHandler),window.addEventListener("resize",scrollHandler),setInterval(function(){windowIsScrolling&&(windowIsScrolling=!1,forEach(getDocument().querySelectorAll("[hx-trigger*='revealed'],[data-hx-trigger*='revealed']"),function(e){maybeReveal(e)}))},200))}function maybeReveal(e){!hasAttribute(e,"data-hx-revealed")&&isScrolledIntoView(e)&&(e.setAttribute("data-hx-revealed","true"),getInternalData(e).initHash?triggerEvent(e,"revealed"):e.addEventListener("htmx:afterProcessNode",function(){triggerEvent(e,"revealed")},{once:!0}))}function loadImmediately(e,t,r,n){function Tr(){r.loaded||(r.loaded=!0,triggerEvent(e,"htmx:trigger"),t(e))}0<n?getWindow().setTimeout(Tr,n):Tr()}function processVerbs(t,a,e){let o=!1;return forEach(VERBS,function(r){if(hasAttribute(t,"hx-"+r)){const n=getAttributeValue(t,"hx-"+r);o=!0,a.path=n,a.verb=r,e.forEach(function(e){addTriggerHandler(t,e,a,function(e,t){e=asElement(e);closest(e,htmx.config.disableSelector)?cleanUpElement(e):issueAjaxRequest(r,n,e,t)})})}}),o}function addTriggerHandler(r,e,t,n){var a;"revealed"===e.trigger?(initScrollHandler(),addEventListener(r,n,t,e),maybeReveal(asElement(r))):"intersect"===e.trigger?(a={},e.root&&(a.root=querySelectorExt(r,e.root)),e.threshold&&(a.threshold=parseFloat(e.threshold)),new IntersectionObserver(function(t){for(let e=0;e<t.length;e++)if(t[e].isIntersecting){triggerEvent(r,"intersect");break}},a).observe(asElement(r)),addEventListener(asElement(r),n,t,e)):t.firstInitCompleted||"load"!==e.trigger?0<e.pollInterval?(t.polling=!0,processPolling(asElement(r),n,e)):addEventListener(r,n,t,e):maybeFilterEvent(e,r,makeEvent("load",{elt:r}))||loadImmediately(asElement(r),n,t,e.delay)}function shouldProcessHxOn(e){e=asElement(e);if(e){var t=e.attributes;for(let e=0;e<t.length;e++){var r=t[e].name;if(startsWith(r,"hx-on:")||startsWith(r,"data-hx-on:")||startsWith(r,"hx-on-")||startsWith(r,"data-hx-on-"))return 1}}}function processHXOnRoot(e,t){shouldProcessHxOn(e)&&t.push(asElement(e));for(var r,n=HX_ON_QUERY.evaluate(e);r=n.iterateNext();)t.push(asElement(r))}function findHxOnWildcardElements(e){var t=[];if(e instanceof DocumentFragment)for(const r of e.childNodes)processHXOnRoot(r,t);else processHXOnRoot(e,t);return t}function findElementsToProcess(e){if(e.querySelectorAll){var t=[];for(const n in extensions){var r=extensions[n];r.getSelectors&&(r=r.getSelectors())&&t.push(r)}return e.querySelectorAll(VERB_SELECTOR+", [hx-boost] a, [data-hx-boost] a, a[hx-boost], a[data-hx-boost], form, [type='submit'], [hx-ext], [data-hx-ext], [hx-trigger], [data-hx-trigger]"+t.flat().map(e=>", "+e).join(""))}return[]}function maybeSetLastButtonClicked(e){var t=closest(asElement(e.target),"button, input[type='submit']"),e=getRelatedFormData(e);e&&(e.lastButtonClicked=t)}function maybeUnsetLastButtonClicked(e){e=getRelatedFormData(e);e&&(e.lastButtonClicked=null)}function getRelatedFormData(e){e=closest(asElement(e.target),"button, input[type='submit']");if(e){e=resolveTarget("#"+getRawAttribute(e,"form"),e.getRootNode())||closest(e,"form");if(e)return getInternalData(e)}}function initButtonTracking(e){e.addEventListener("click",maybeSetLastButtonClicked),e.addEventListener("focusin",maybeSetLastButtonClicked),e.addEventListener("focusout",maybeUnsetLastButtonClicked)}function addHxOnEventHandler(t,e,r){function Ts(e){maybeEval(t,function(){eltIsDisabled(t)||(a=a||new Function("event",r)).call(t,e)})}var n=getInternalData(t);Array.isArray(n.onHandlers)||(n.onHandlers=[]);let a;t.addEventListener(e,Ts),n.onHandlers.push({event:e,listener:Ts})}function processHxOnWildcard(t){deInitOnHandlers(t);for(let e=0;e<t.attributes.length;e++){var r=t.attributes[e].name,n=t.attributes[e].value;if(startsWith(r,"hx-on")||startsWith(r,"data-hx-on")){var a=r.indexOf("-on")+3,o=r.slice(a,a+1);if("-"===o||":"===o){let e=r.slice(a+1);startsWith(e,":")?e="htmx"+e:startsWith(e,"-")?e="htmx:"+e.slice(1):startsWith(e,"htmx-")&&(e="htmx:"+e.slice(5)),addHxOnEventHandler(t,e,n)}}}}function initNode(t){if(closest(t,htmx.config.disableSelector))cleanUpElement(t);else{const r=getInternalData(t);var e=attributeHash(t);r.initHash!==e&&(deInitNode(t),r.initHash=e,triggerEvent(t,"htmx:beforeProcessNode"),e=getTriggerSpecs(t),processVerbs(t,r,e)||("true"===getClosestAttributeValue(t,"hx-boost")?boostElement(t,r,e):hasAttribute(t,"hx-trigger")&&e.forEach(function(e){addTriggerHandler(t,e,r,function(){})})),("FORM"===t.tagName||"submit"===getRawAttribute(t,"type")&&hasAttribute(t,"form"))&&initButtonTracking(t),r.firstInitCompleted=!0,triggerEvent(t,"htmx:afterProcessNode"))}}function processNode(e){closest(e=resolveTarget(e),htmx.config.disableSelector)?cleanUpElement(e):(initNode(e),forEach(findElementsToProcess(e),function(e){initNode(e)}),forEach(findHxOnWildcardElements(e),processHxOnWildcard))}function kebabEventName(e){return e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}function makeEvent(e,t){let r;return window.CustomEvent&&"function"==typeof window.CustomEvent?r=new CustomEvent(e,{bubbles:!0,cancelable:!0,composed:!0,detail:t}):(r=getDocument().createEvent("CustomEvent")).initCustomEvent(e,!0,!0,t),r}function triggerErrorEvent(e,t,r){triggerEvent(e,t,mergeObjects({error:t},r))}function ignoreEventForLogging(e){return"htmx:afterProcessNode"===e}function withExtensions(e,t){forEach(getExtensions(e),function(e){try{t(e)}catch(e){logError(e)}})}function logError(e){console.error?console.error(e):console.log&&console.log("ERROR: ",e)}function triggerEvent(e,t,r){e=resolveTarget(e),(r=null==r?{}:r).elt=e;const n=makeEvent(t,r);htmx.logger&&!ignoreEventForLogging(t)&&htmx.logger(e,t,r),r.error&&(logError(r.error),triggerEvent(e,"htmx:error",{errorInfo:r}));let a=e.dispatchEvent(n);var r=kebabEventName(t);return a&&r!==t&&(r=makeEvent(r,n.detail),a=a&&e.dispatchEvent(r)),withExtensions(asElement(e),function(e){a=a&&!1!==e.onEvent(t,n)&&!n.defaultPrevented}),a}function getHistoryElement(){return getDocument().querySelector("[hx-history-elt],[data-hx-history-elt]")||getDocument().body}function saveToHistoryCache(t,e){if(canAccessLocalStorage()){var e=cleanInnerHtmlForHistory(e),r=getDocument().title,n=window.scrollY;if(htmx.config.historyCacheSize<=0)localStorage.removeItem("htmx-history-cache");else{t=normalizePath(t);var a=parseJSON(localStorage.getItem("htmx-history-cache"))||[];for(let e=0;e<a.length;e++)if(a[e].url===t){a.splice(e,1);break}e={url:t,content:e,title:r,scroll:n};for(triggerEvent(getDocument().body,"htmx:historyItemCreated",{item:e,cache:a}),a.push(e);a.length>htmx.config.historyCacheSize;)a.shift();for(;0<a.length;)try{localStorage.setItem("htmx-history-cache",JSON.stringify(a));break}catch(e){triggerErrorEvent(getDocument().body,"htmx:historyCacheError",{cause:e,cache:a}),a.shift()}}}}function getCachedHistory(t){if(canAccessLocalStorage()){t=normalizePath(t);var r=parseJSON(localStorage.getItem("htmx-history-cache"))||[];for(let e=0;e<r.length;e++)if(r[e].url===t)return r[e]}return null}function cleanInnerHtmlForHistory(e){const t=htmx.config.requestClass;e=e.cloneNode(!0);return forEach(findAll(e,"."+t),function(e){removeClassFromElement(e,t)}),forEach(findAll(e,"[data-disabled-by-htmx]"),function(e){e.removeAttribute("disabled")}),e.innerHTML}function saveCurrentPageToHistory(){var e=getHistoryElement(),t=currentPathForHistory||location.pathname+location.search;let r;try{r=getDocument().querySelector('[hx-history="false" i],[data-hx-history="false" i]')}catch(e){r=getDocument().querySelector('[hx-history="false"],[data-hx-history="false"]')}r||(triggerEvent(getDocument().body,"htmx:beforeHistorySave",{path:t,historyElt:e}),saveToHistoryCache(t,e)),htmx.config.historyEnabled&&history.replaceState({htmx:!0},getDocument().title,window.location.href)}function pushUrlIntoHistory(e){htmx.config.getCacheBusterParam&&(endsWith(e=e.replace(/org\.htmx\.cache-buster=[^&]*&?/,""),"&")||endsWith(e,"?"))&&(e=e.slice(0,-1)),htmx.config.historyEnabled&&history.pushState({htmx:!0},"",e),currentPathForHistory=e}function replaceUrlInHistory(e){htmx.config.historyEnabled&&history.replaceState({htmx:!0},"",e),currentPathForHistory=e}function settleImmediately(e){forEach(e,function(e){e.call(void 0)})}function loadHistoryFromServer(a){var e=new XMLHttpRequest;const o={path:a,xhr:e};triggerEvent(getDocument().body,"htmx:historyCacheMiss",o),e.open("GET",a,!0),e.setRequestHeader("HX-Request","true"),e.setRequestHeader("HX-History-Restore-Request","true"),e.setRequestHeader("HX-Current-URL",getDocument().location.href),e.onload=function(){var e,t,r,n;200<=this.status&&this.status<400?(triggerEvent(getDocument().body,"htmx:historyCacheMissLoad",o),t=(e=makeFragment(this.response)).querySelector("[hx-history-elt],[data-hx-history-elt]")||e,n=makeSettleInfo(r=getHistoryElement()),handleTitle(e.title),handlePreservedElements(e),swapInnerHTML(r,t,n),restorePreservedElements(),settleImmediately(n.tasks),currentPathForHistory=a,triggerEvent(getDocument().body,"htmx:historyRestore",{path:a,cacheMiss:!0,serverResponse:this.response})):triggerErrorEvent(getDocument().body,"htmx:historyCacheMissLoadError",o)},e.send()}function restoreHistory(e){saveCurrentPageToHistory();const t=getCachedHistory(e=e||location.pathname+location.search);var r,n,a;t?(r=makeFragment(t.content),a=makeSettleInfo(n=getHistoryElement()),handleTitle(t.title),handlePreservedElements(r),swapInnerHTML(n,r,a),restorePreservedElements(),settleImmediately(a.tasks),getWindow().setTimeout(function(){window.scrollTo(0,t.scroll)},0),currentPathForHistory=e,triggerEvent(getDocument().body,"htmx:historyRestore",{path:e,item:t})):htmx.config.refreshOnHistoryMiss?window.location.reload(!0):loadHistoryFromServer(e)}function addRequestIndicatorClasses(e){var t=findAttributeTargets(e,"hx-indicator");return forEach(t=null==t?[e]:t,function(e){var t=getInternalData(e);t.requestCount=(t.requestCount||0)+1,e.classList.add.call(e.classList,htmx.config.requestClass)}),t}function disableElements(e){e=findAttributeTargets(e,"hx-disabled-elt");return forEach(e=null==e?[]:e,function(e){var t=getInternalData(e);t.requestCount=(t.requestCount||0)+1,e.setAttribute("disabled",""),e.setAttribute("data-disabled-by-htmx","")}),e}function removeRequestIndicators(e,t){forEach(e.concat(t),function(e){e=getInternalData(e);e.requestCount=(e.requestCount||1)-1}),forEach(e,function(e){0===getInternalData(e).requestCount&&e.classList.remove.call(e.classList,htmx.config.requestClass)}),forEach(t,function(e){0===getInternalData(e).requestCount&&(e.removeAttribute("disabled"),e.removeAttribute("data-disabled-by-htmx"))})}function haveSeenNode(t,r){for(let e=0;e<t.length;e++)if(t[e].isSameNode(r))return 1}function shouldInclude(e){return""!==e.name&&null!=e.name&&!e.disabled&&!closest(e,"fieldset[disabled]")&&"button"!==e.type&&"submit"!==e.type&&"image"!==e.tagName&&"reset"!==e.tagName&&"file"!==e.tagName&&("checkbox"!==e.type&&"radio"!==e.type||e.checked)}function addValueToFormData(t,e,r){null!=t&&null!=e&&(Array.isArray(e)?e.forEach(function(e){r.append(t,e)}):r.append(t,e))}function removeValueFromFormData(t,r,n){if(null!=t&&null!=r){let e=n.getAll(t);e=Array.isArray(r)?e.filter(e=>r.indexOf(e)<0):e.filter(e=>e!==r),n.delete(t),forEach(e,e=>n.append(t,e))}}function processInputValue(t,r,n,a,o){if(null!=a&&!haveSeenNode(t,a)){if(t.push(a),shouldInclude(a)){var i=getRawAttribute(a,"name");let e=a.value;a instanceof HTMLSelectElement&&a.multiple&&(e=toArray(a.querySelectorAll("option:checked")).map(function(e){return e.value})),addValueToFormData(i,e=a instanceof HTMLInputElement&&a.files?toArray(a.files):e,r),o&&validateElement(a,n)}a instanceof HTMLFormElement&&(forEach(a.elements,function(e){0<=t.indexOf(e)?removeValueFromFormData(e.name,e.value,r):t.push(e),o&&validateElement(e,n)}),new FormData(a).forEach(function(e,t){e instanceof File&&""===e.name||addValueToFormData(t,e,r)}))}}function validateElement(e,t){e.willValidate&&(triggerEvent(e,"htmx:validation:validate"),e.checkValidity()||(t.push({elt:e,message:e.validationMessage,validity:e.validity}),triggerEvent(e,"htmx:validation:failed",{message:e.validationMessage,validity:e.validity})))}function overrideFormData(r,e){for(const t of e.keys())r.delete(t);return e.forEach(function(e,t){r.append(t,e)}),r}function getInputValues(e,t){const r=[],n=new FormData;var a=new FormData;const o=[];var i=getInternalData(e);i.lastButtonClicked&&!bodyContains(i.lastButtonClicked)&&(i.lastButtonClicked=null);let s=e instanceof HTMLFormElement&&!0!==e.noValidate||"true"===getAttributeValue(e,"hx-validate");return i.lastButtonClicked&&(s=s&&!0!==i.lastButtonClicked.formNoValidate),"get"!==t&&processInputValue(r,a,o,closest(e,"form"),s),processInputValue(r,n,o,e,s),(i.lastButtonClicked||"BUTTON"===e.tagName||"INPUT"===e.tagName&&"submit"===getRawAttribute(e,"type"))&&addValueToFormData(getRawAttribute(t=i.lastButtonClicked||e,"name"),t.value,a),forEach(findAttributeTargets(e,"hx-include"),function(e){processInputValue(r,n,o,asElement(e),s),matches(e,"form")||forEach(asParentNode(e).querySelectorAll(INPUT_SELECTOR),function(e){processInputValue(r,n,o,e,s)})}),overrideFormData(n,a),{errors:o,formData:n,values:formDataProxy(n)}}function appendParam(e,t,r){""!==e&&(e+="&"),"[object Object]"===String(r)&&(r=JSON.stringify(r));r=encodeURIComponent(r);return e+(encodeURIComponent(t)+"=")+r}function urlEncode(e){e=formDataFromObject(e);let r="";return e.forEach(function(e,t){r=appendParam(r,t,e)}),r}function getHeaders(e,t,r){t={"HX-Request":"true","HX-Trigger":getRawAttribute(e,"id"),"HX-Trigger-Name":getRawAttribute(e,"name"),"HX-Target":getAttributeValue(t,"id"),"HX-Current-URL":getDocument().location.href};return getValuesForElement(e,"hx-headers",!1,t),void 0!==r&&(t["HX-Prompt"]=r),getInternalData(e).boosted&&(t["HX-Boosted"]="true"),t}function filterValues(r,e){e=getClosestAttributeValue(e,"hx-params");if(e){if("none"===e)return new FormData;if("*"===e)return r;if(0===e.indexOf("not "))return forEach(e.slice(4).split(","),function(e){e=e.trim(),r.delete(e)}),r;{const n=new FormData;return forEach(e.split(","),function(t){t=t.trim(),r.has(t)&&r.getAll(t).forEach(function(e){n.append(t,e)})}),n}}return r}function isAnchorLink(e){return getRawAttribute(e,"href")&&0<=getRawAttribute(e,"href").indexOf("#")}function getSwapSpecification(e,t){var t=t||getClosestAttributeValue(e,"hx-swap"),r={swapStyle:getInternalData(e).boosted?"innerHTML":htmx.config.defaultSwapStyle,swapDelay:htmx.config.defaultSwapDelay,settleDelay:htmx.config.defaultSettleDelay};if(htmx.config.scrollIntoViewOnBoost&&getInternalData(e).boosted&&!isAnchorLink(e)&&(r.show="top"),t){var n=splitOnWhitespace(t);if(0<n.length)for(let e=0;e<n.length;e++){var a,o,i,s,l=n[e];0===l.indexOf("swap:")?r.swapDelay=parseInterval(l.slice(5)):0===l.indexOf("settle:")?r.settleDelay=parseInterval(l.slice(7)):0===l.indexOf("transition:")?r.transition="true"===l.slice(11):0===l.indexOf("ignoreTitle:")?r.ignoreTitle="true"===l.slice(12):0===l.indexOf("scroll:")?(o=(a=l.slice(7).split(":")).pop(),i=0<a.length?a.join(":"):null,r.scroll=o,r.scrollTarget=i):0===l.indexOf("show:")?(o=(a=l.slice(5).split(":")).pop(),i=0<a.length?a.join(":"):null,r.show=o,r.showTarget=i):0===l.indexOf("focus-scroll:")?(s=l.slice("focus-scroll:".length),r.focusScroll="true"==s):0==e?r.swapStyle=l:logError("Unknown modifier in hx-swap: "+l)}}return r}function usesFormData(e){return"multipart/form-data"===getClosestAttributeValue(e,"hx-encoding")||matches(e,"form")&&"multipart/form-data"===getRawAttribute(e,"enctype")}function encodeParamsForBody(t,r,n){let a=null;return withExtensions(r,function(e){null==a&&(a=e.encodeParameters(t,n,r))}),null!=a?a:usesFormData(r)?overrideFormData(new FormData,formDataFromObject(n)):urlEncode(n)}function makeSettleInfo(e){return{tasks:[],elts:[e]}}function updateScrollState(e,t){var r,n=e[0],e=e[e.length-1];t.scroll&&(r=null,t.scrollTarget&&(r=asElement(querySelectorExt(n,t.scrollTarget))),"top"===t.scroll&&(n||r)&&((r=r||n).scrollTop=0),"bottom"===t.scroll)&&(e||r)&&((r=r||e).scrollTop=r.scrollHeight),t.show&&(r=null,t.showTarget&&(r=asElement(querySelectorExt(n,"window"===t.showTarget?"body":t.showTarget))),"top"===t.show&&(n||r)&&(r=r||n).scrollIntoView({block:"start",behavior:htmx.config.scrollBehavior}),"bottom"===t.show)&&(e||r)&&(r=r||e).scrollIntoView({block:"end",behavior:htmx.config.scrollBehavior})}function getValuesForElement(r,e,n,a){if(null==a&&(a={}),null==r)return a;var o,i=getAttributeValue(r,e);if(i){let e=i.trim(),t=n;if("unset"===e)return null;0===e.indexOf("javascript:")?(e=e.slice(11),t=!0):0===e.indexOf("js:")&&(e=e.slice(3),t=!0),0!==e.indexOf("{")&&(e="{"+e+"}");for(const s in o=t?maybeEval(r,function(){return Function("return ("+e+")")()},{}):parseJSON(e))o.hasOwnProperty(s)&&null==a[s]&&(a[s]=o[s])}return getValuesForElement(asElement(parentElt(r)),e,n,a)}function maybeEval(e,t,r){return htmx.config.allowEval?t():(triggerErrorEvent(e,"htmx:evalDisallowedError"),r)}function getHXVarsForElement(e,t){return getValuesForElement(e,"hx-vars",!0,t)}function getHXValsForElement(e,t){return getValuesForElement(e,"hx-vals",!1,t)}function getExpressionVars(e){return mergeObjects(getHXVarsForElement(e),getHXValsForElement(e))}function safelySetHeaderValue(t,r,n){if(null!==n)try{t.setRequestHeader(r,n)}catch(e){t.setRequestHeader(r,encodeURIComponent(n)),t.setRequestHeader(r+"-URI-AutoEncoded","true")}}function getPathFromResponse(t){if(t.responseURL&&"undefined"!=typeof URL)try{var e=new URL(t.responseURL);return e.pathname+e.search}catch(e){triggerErrorEvent(getDocument().body,"htmx:badResponseUrl",{url:t.responseURL})}}function hasHeader(e,t){return t.test(e.getAllResponseHeaders())}function ajaxHelper(t,r,n){if(t=t.toLowerCase(),n){if(n instanceof Element||"string"==typeof n)return issueAjaxRequest(t,r,null,null,{targetOverride:resolveTarget(n)||DUMMY_ELT,returnPromise:!0});{let e=resolveTarget(n.target);return(n.target&&!e||n.source&&!e&&!resolveTarget(n.source))&&(e=DUMMY_ELT),issueAjaxRequest(t,r,resolveTarget(n.source),n.event,{handler:n.handler,headers:n.headers,values:n.values,targetOverride:e,swapOverride:n.swap,select:n.select,returnPromise:!0})}}return issueAjaxRequest(t,r,null,null,{returnPromise:!0})}function hierarchyForElt(e){for(var t=[];e;)t.push(e),e=e.parentElement;return t}function verifyPath(e,t,r){let n,a;return n="function"==typeof URL?(a=new URL(t,document.location.href),document.location.origin===a.origin):startsWith(a=t,document.location.origin),(!htmx.config.selfRequestsOnly||n)&&triggerEvent(e,"htmx:validateUrl",mergeObjects({url:a,sameHost:n},r))}function formDataFromObject(e){if(e instanceof FormData)return e;const t=new FormData;for(const r in e)e.hasOwnProperty(r)&&(e[r]&&"function"==typeof e[r].forEach?e[r].forEach(function(e){t.append(r,e)}):"object"!=typeof e[r]||e[r]instanceof Blob?t.append(r,e[r]):t.append(r,JSON.stringify(e[r])));return t}function formDataArrayProxy(n,a,e){return new Proxy(e,{get:function(t,e){return"number"==typeof e?t[e]:"length"===e?t.length:"push"===e?function(e){t.push(e),n.append(a,e)}:"function"==typeof t[e]?function(){t[e].apply(t,arguments),n.delete(a),t.forEach(function(e){n.append(a,e)})}:t[e]&&1===t[e].length?t[e][0]:t[e]},set:function(e,t,r){return e[t]=r,n.delete(a),e.forEach(function(e){n.append(a,e)}),!0}})}function formDataProxy(a){return new Proxy(a,{get:function(e,t){if("symbol"==typeof t){const n=Reflect.get(e,t);return"function"==typeof n?function(){return n.apply(a,arguments)}:n}var r;return"toJSON"===t?()=>Object.fromEntries(a):t in e?"function"==typeof e[t]?function(){return a[t].apply(a,arguments)}:e[t]:0!==(r=a.getAll(t)).length?1===r.length?r[0]:formDataArrayProxy(e,t,r):void 0},set:function(t,r,e){return"string"==typeof r&&(t.delete(r),e&&"function"==typeof e.forEach?e.forEach(function(e){t.append(r,e)}):"object"!=typeof e||e instanceof Blob?t.append(r,e):t.append(r,JSON.stringify(e)),!0)},deleteProperty:function(e,t){return"string"==typeof t&&e.delete(t),!0},ownKeys:function(e){return Reflect.ownKeys(Object.fromEntries(e))},getOwnPropertyDescriptor:function(e,t){return Reflect.getOwnPropertyDescriptor(Object.fromEntries(e),t)}})}function issueAjaxRequest(o,i,s,l,u,c){let p=null,h=null;var d;(u=null!=u?u:{}).returnPromise&&"undefined"!=typeof Promise&&(d=new Promise(function(e,t){p=e,h=t})),null==s&&(s=getDocument().body);const g=u.handler||handleAjaxResponse;var f=u.select||null;if(bodyContains(s)){var m=u.targetOverride||asElement(getTarget(s));if(null==m||m==DUMMY_ELT)triggerErrorEvent(s,"htmx:targetError",{target:getAttributeValue(s,"hx-target")}),maybeCall(h);else{let e=getInternalData(s);var b=e.lastButtonClicked,b=(b&&(null!=(E=getRawAttribute(b,"formaction"))&&(i=E),null!=(E=getRawAttribute(b,"formmethod")))&&"dialog"!==E.toLowerCase()&&(o=E),getClosestAttributeValue(s,"hx-confirm"));if(void 0===c&&!1===triggerEvent(s,"htmx:confirm",{target:m,elt:s,path:i,verb:o,triggeringEvent:l,etc:u,issueRequest:function(e){return issueAjaxRequest(o,i,s,l,u,!!e)},question:b}))return maybeCall(p),d;let t=s,r=getClosestAttributeValue(s,"hx-sync"),n=null,a=!1;if(r){var E=r.split(":"),v=E[0].trim();if(t="this"===v?findThisElement(s,"hx-sync"):asElement(querySelectorExt(s,v)),r=(E[1]||"drop").trim(),e=getInternalData(t),"drop"===r&&e.xhr&&!0!==e.abortable)return maybeCall(p),d;if("abort"===r){if(e.xhr)return maybeCall(p),d;a=!0}else"replace"===r?triggerEvent(t,"htmx:abort"):0===r.indexOf("queue")&&(v=r.split(" "),n=(v[1]||"last").trim())}if(e.xhr){if(!e.abortable)return null==n&&null==(n=l&&(E=getInternalData(l))&&E.triggerSpec&&E.triggerSpec.queue?E.triggerSpec.queue:n)&&(n="last"),null==e.queuedRequests&&(e.queuedRequests=[]),"first"===n&&0===e.queuedRequests.length||"all"===n?e.queuedRequests.push(function(){issueAjaxRequest(o,i,s,l,u)}):"last"===n&&(e.queuedRequests=[],e.queuedRequests.push(function(){issueAjaxRequest(o,i,s,l,u)})),maybeCall(p),d;triggerEvent(t,"htmx:abort")}const A=new XMLHttpRequest,C=(e.xhr=A,e.abortable=a,function(){e.xhr=null,e.abortable=!1,null!=e.queuedRequests&&0<e.queuedRequests.length&&e.queuedRequests.shift()()});v=getClosestAttributeValue(s,"hx-prompt");if(v){var y=prompt(v);if(null===y||!triggerEvent(s,"htmx:prompt",{prompt:y,target:m}))return maybeCall(p),C(),d}if(!b||c||confirm(b)){let t=getHeaders(s,m,y);"get"===o||usesFormData(s)||(t["Content-Type"]="application/x-www-form-urlencoded"),u.headers&&(t=mergeObjects(t,u.headers));E=getInputValues(s,o),v=E.errors,c=E.formData,b=(u.values&&overrideFormData(c,formDataFromObject(u.values)),formDataFromObject(getExpressionVars(s))),y=overrideFormData(c,b);let r=filterValues(y,s);htmx.config.getCacheBusterParam&&"get"===o&&r.set("org.htmx.cache-buster",getRawAttribute(m,"id")||"true"),null!=i&&""!==i||(i=getDocument().location.href);E=getValuesForElement(s,"hx-request"),c=getInternalData(s).boosted,b={boosted:c,useUrlParams:0<=htmx.config.methodsThatUseUrlParams.indexOf(o),formData:r,parameters:formDataProxy(r),unfilteredFormData:y,unfilteredParameters:formDataProxy(y),headers:t,target:m,verb:o,errors:v,withCredentials:u.credentials||E.credentials||htmx.config.withCredentials,timeout:u.timeout||E.timeout||htmx.config.timeout,path:i,triggeringEvent:l};if(triggerEvent(s,"htmx:configRequest",b))if(i=b.path,o=b.verb,t=b.headers,r=formDataFromObject(b.parameters),y=b.useUrlParams,(v=b.errors)&&0<v.length)triggerEvent(s,"htmx:validation:halted",b),maybeCall(p),C();else{var S,w,_,v=i.split("#"),x=v[1];let e=i;if(y&&(e=v[0],!r.keys().next().done)&&(e.indexOf("?")<0?e+="?":e+="&",e+=urlEncode(r),x)&&(e+="#"+x),verifyPath(s,e,b)){if(A.open(o.toUpperCase(),e,!0),A.overrideMimeType("text/html"),A.withCredentials=b.withCredentials,A.timeout=b.timeout,!E.noHeaders)for(const D in t)t.hasOwnProperty(D)&&(S=t[D],safelySetHeaderValue(A,D,S));const T={xhr:A,target:m,requestConfig:b,etc:u,boosted:c,select:f,pathInfo:{requestPath:i,finalRequestPath:e,responsePath:null,anchor:x}};A.onload=function(){try{var t=hierarchyForElt(s);if(T.pathInfo.responsePath=getPathFromResponse(A),g(s,T),!0!==T.keepIndicators&&removeRequestIndicators(w,_),triggerEvent(s,"htmx:afterRequest",T),triggerEvent(s,"htmx:afterOnLoad",T),!bodyContains(s)){let e=null;for(;0<t.length&&null==e;){var r=t.shift();bodyContains(r)&&(e=r)}e&&(triggerEvent(e,"htmx:afterRequest",T),triggerEvent(e,"htmx:afterOnLoad",T))}maybeCall(p),C()}catch(e){throw triggerErrorEvent(s,"htmx:onLoadError",mergeObjects({error:e},T)),e}},A.onerror=function(){removeRequestIndicators(w,_),triggerErrorEvent(s,"htmx:afterRequest",T),triggerErrorEvent(s,"htmx:sendError",T),maybeCall(h),C()},A.onabort=function(){removeRequestIndicators(w,_),triggerErrorEvent(s,"htmx:afterRequest",T),triggerErrorEvent(s,"htmx:sendAbort",T),maybeCall(h),C()},A.ontimeout=function(){removeRequestIndicators(w,_),triggerErrorEvent(s,"htmx:afterRequest",T),triggerErrorEvent(s,"htmx:timeout",T),maybeCall(h),C()},triggerEvent(s,"htmx:beforeRequest",T)?(w=addRequestIndicatorClasses(s),_=disableElements(s),forEach(["loadstart","loadend","progress","abort"],function(t){forEach([A,A.upload],function(e){e.addEventListener(t,function(e){triggerEvent(s,"htmx:xhr:"+t,{lengthComputable:e.lengthComputable,loaded:e.loaded,total:e.total})})})}),triggerEvent(s,"htmx:beforeSend",T),v=y?null:encodeParamsForBody(A,s,r),A.send(v)):(maybeCall(p),C())}else triggerErrorEvent(s,"htmx:invalidPath",b),maybeCall(h)}else maybeCall(p),C()}else maybeCall(p),C()}}else maybeCall(p);return d}function determineHistoryUpdates(e,t){var r=t.xhr;let n=null,a=null;if(hasHeader(r,/HX-Push:/i)?(n=r.getResponseHeader("HX-Push"),a="push"):hasHeader(r,/HX-Push-Url:/i)?(n=r.getResponseHeader("HX-Push-Url"),a="push"):hasHeader(r,/HX-Replace-Url:/i)&&(n=r.getResponseHeader("HX-Replace-Url"),a="replace"),n)return"false"===n?{}:{type:a,path:n};var r=t.pathInfo.finalRequestPath,o=t.pathInfo.responsePath,i=getClosestAttributeValue(e,"hx-push-url"),s=getClosestAttributeValue(e,"hx-replace-url"),e=getInternalData(e).boosted;let l=null,u=null;return i?(l="push",u=i):s?(l="replace",u=s):e&&(l="push",u=o||r),u&&"false"!==u?("true"===u&&(u=o||r),t.pathInfo.anchor&&-1===u.indexOf("#")&&(u=u+"#"+t.pathInfo.anchor),{type:l,path:u}):{}}function codeMatches(e,t){return new RegExp(e.code).test(t.toString(10))}function resolveResponseHandling(e){for(var t=0;t<htmx.config.responseHandling.length;t++){var r=htmx.config.responseHandling[t];if(codeMatches(r,e.status))return r}return{swap:!1}}function handleTitle(e){var t;e&&((t=find("title"))?t.innerHTML=e:window.document.title=e)}function handleAjaxResponse(o,i){const s=i.xhr;let l=i.target;var u=i.etc,c=i.select;if(triggerEvent(o,"htmx:beforeOnLoad",i))if(hasHeader(s,/HX-Trigger:/i)&&handleTriggerHeader(s,"HX-Trigger",o),hasHeader(s,/HX-Location:/i)){saveCurrentPageToHistory();let e=s.getResponseHeader("HX-Location");0===e.indexOf("{")&&(t=parseJSON(e),e=t.path,delete t.path),ajaxHelper("get",e,t).then(function(){pushUrlIntoHistory(e)})}else{var t=hasHeader(s,/HX-Refresh:/i)&&"true"===s.getResponseHeader("HX-Refresh");if(hasHeader(s,/HX-Redirect:/i))i.keepIndicators=!0,location.href=s.getResponseHeader("HX-Redirect"),t&&location.reload();else if(t)i.keepIndicators=!0,location.reload();else{hasHeader(s,/HX-Retarget:/i)&&("this"===s.getResponseHeader("HX-Retarget")?i.target=o:i.target=asElement(querySelectorExt(o,s.getResponseHeader("HX-Retarget"))));const g=determineHistoryUpdates(o,i);var t=resolveResponseHandling(s),e=t.swap,r=!!t.error,p=htmx.config.ignoreTitle||t.ignoreTitle;let a=t.select;t.target&&(i.target=asElement(querySelectorExt(o,t.target)));var u=u.swapOverride,h=(null==u&&t.swapOverride&&(u=t.swapOverride),hasHeader(s,/HX-Retarget:/i)&&("this"===s.getResponseHeader("HX-Retarget")?i.target=o:i.target=asElement(querySelectorExt(o,s.getResponseHeader("HX-Retarget")))),hasHeader(s,/HX-Reswap:/i)&&(u=s.getResponseHeader("HX-Reswap")),s.response),e=mergeObjects({shouldSwap:e,serverResponse:h,isError:r,ignoreTitle:p,selectOverride:a,swapOverride:u},i);if((!t.event||triggerEvent(l,t.event,e))&&triggerEvent(l,"htmx:beforeSwap",e)){if(l=e.target,h=e.serverResponse,r=e.isError,p=e.ignoreTitle,a=e.selectOverride,u=e.swapOverride,i.target=l,i.failed=r,i.successful=!r,e.shouldSwap){286===s.status&&cancelPolling(o),withExtensions(o,function(e){h=e.transformResponse(h,s,o)}),g.type&&saveCurrentPageToHistory();var d=getSwapSpecification(o,u);d.hasOwnProperty("ignoreTitle")||(d.ignoreTitle=p),l.classList.add(htmx.config.swappingClass);let r=null,n=null;c&&(a=c),hasHeader(s,/HX-Reselect:/i)&&(a=s.getResponseHeader("HX-Reselect"));const f=getClosestAttributeValue(o,"hx-select-oob"),m=getClosestAttributeValue(o,"hx-select");let e=function(){try{g.type&&(triggerEvent(getDocument().body,"htmx:beforeHistoryUpdate",mergeObjects({history:g},i)),"push"===g.type?(pushUrlIntoHistory(g.path),triggerEvent(getDocument().body,"htmx:pushedIntoHistory",{path:g.path})):(replaceUrlInHistory(g.path),triggerEvent(getDocument().body,"htmx:replacedInHistory",{path:g.path}))),swap(l,h,d,{select:a||m,selectOOB:f,eventInfo:i,anchor:i.pathInfo.anchor,contextElement:o,afterSwapCallback:function(){if(hasHeader(s,/HX-Trigger-After-Swap:/i)){let e=o;bodyContains(o)||(e=getDocument().body),handleTriggerHeader(s,"HX-Trigger-After-Swap",e)}},afterSettleCallback:function(){if(hasHeader(s,/HX-Trigger-After-Settle:/i)){let e=o;bodyContains(o)||(e=getDocument().body),handleTriggerHeader(s,"HX-Trigger-After-Settle",e)}maybeCall(r)}})}catch(e){throw triggerErrorEvent(o,"htmx:swapError",i),maybeCall(n),e}},t=htmx.config.globalViewTransitions;if((d.hasOwnProperty("transition")?d.transition:t)&&triggerEvent(o,"htmx:beforeTransition",i)&&"undefined"!=typeof Promise&&document.startViewTransition){const b=new Promise(function(e,t){r=e,n=t}),E=e;e=function(){document.startViewTransition(function(){return E(),b})}}0<d.swapDelay?getWindow().setTimeout(e,d.swapDelay):e()}r&&triggerErrorEvent(o,"htmx:responseError",mergeObjects({error:"Response Status Error Code "+s.status+" from "+i.pathInfo.requestPath},i))}}}}function extensionBase(){return{init:function(e){return null},getSelectors:function(){return null},onEvent:function(e,t){return!0},transformResponse:function(e,t,r){return e},isInlineSwap:function(e){return!1},handleSwap:function(e,t,r,n){return!1},encodeParameters:function(e,t,r){return null}}}function defineExtension(e,t){t.init&&t.init(internalAPI),extensions[e]=mergeObjects(extensionBase(),t)}function removeExtension(e){delete extensions[e]}function getExtensions(e,t,r){if(null==t&&(t=[]),null==e)return t;null==r&&(r=[]);var n=getAttributeValue(e,"hx-ext");return n&&forEach(n.split(","),function(e){"ignore:"==(e=e.replace(/ /g,"")).slice(0,7)?r.push(e.slice(7)):r.indexOf(e)<0&&(e=extensions[e])&&t.indexOf(e)<0&&t.push(e)}),getExtensions(asElement(parentElt(e)),t,r)}function ready(e){isReady||"complete"===getDocument().readyState?e():getDocument().addEventListener("DOMContentLoaded",e)}function insertIndicatorStyles(){var e;!1!==htmx.config.includeIndicatorStyles&&(e=htmx.config.inlineStyleNonce?` nonce="${htmx.config.inlineStyleNonce}"`:"",getDocument().head.insertAdjacentHTML("beforeend","<style"+e+">      ."+htmx.config.indicatorClass+"{opacity:0}      ."+htmx.config.requestClass+" ."+htmx.config.indicatorClass+"{opacity:1; transition: opacity 200ms ease-in;}      ."+htmx.config.requestClass+"."+htmx.config.indicatorClass+"{opacity:1; transition: opacity 200ms ease-in;}      </style>"))}function getMetaConfig(){var e=getDocument().querySelector('meta[name="htmx-config"]');return e?parseJSON(e.content):null}function mergeMetaConfig(){var e=getMetaConfig();e&&(htmx.config=mergeObjects(htmx.config,e))}const htmx={onLoad:null,process:null,on:null,off:null,trigger:null,ajax:null,find:null,findAll:null,closest:null,values:function(e,t){return getInputValues(e,t||"post").values},remove:null,addClass:null,removeClass:null,toggleClass:null,takeClass:null,swap:null,defineExtension:null,removeExtension:null,logAll:null,logNone:null,logger:null,config:{historyEnabled:!0,historyCacheSize:10,refreshOnHistoryMiss:!1,defaultSwapStyle:"innerHTML",defaultSwapDelay:0,defaultSettleDelay:20,includeIndicatorStyles:!0,indicatorClass:"htmx-indicator",requestClass:"htmx-request",addedClass:"htmx-added",settlingClass:"htmx-settling",swappingClass:"htmx-swapping",allowEval:!0,allowScriptTags:!0,inlineScriptNonce:"",inlineStyleNonce:"",attributesToSettle:["class","style","width","height"],withCredentials:!1,timeout:0,wsReconnectDelay:"full-jitter",wsBinaryType:"blob",disableSelector:"[hx-disable], [data-hx-disable]",scrollBehavior:"instant",defaultFocusScroll:!1,getCacheBusterParam:!1,globalViewTransitions:!1,methodsThatUseUrlParams:["get","delete"],selfRequestsOnly:!0,ignoreTitle:!1,scrollIntoViewOnBoost:!0,triggerSpecsCache:null,disableInheritance:!1,responseHandling:[{code:"204",swap:!1},{code:"[23]..",swap:!0},{code:"[45]..",swap:!1,error:!0}],allowNestedOobSwaps:!0},parseInterval:null,_:null,version:"2.0.4"},internalAPI=(htmx.onLoad=onLoadHelper,htmx.process=processNode,htmx.on=addEventListenerImpl,htmx.off=removeEventListenerImpl,htmx.trigger=triggerEvent,htmx.ajax=ajaxHelper,htmx.find=find,htmx.findAll=findAll,htmx.closest=closest,htmx.remove=removeElement,htmx.addClass=addClassToElement,htmx.removeClass=removeClassFromElement,htmx.toggleClass=toggleClassOnElement,htmx.takeClass=takeClassForElement,htmx.swap=swap,htmx.defineExtension=defineExtension,htmx.removeExtension=removeExtension,htmx.logAll=logAll,htmx.logNone=logNone,htmx.parseInterval=parseInterval,htmx._=internalEval,{addTriggerHandler:addTriggerHandler,bodyContains:bodyContains,canAccessLocalStorage:canAccessLocalStorage,findThisElement:findThisElement,filterValues:filterValues,swap:swap,hasAttribute:hasAttribute,getAttributeValue:getAttributeValue,getClosestAttributeValue:getClosestAttributeValue,getClosestMatch:getClosestMatch,getExpressionVars:getExpressionVars,getHeaders:getHeaders,getInputValues:getInputValues,getInternalData:getInternalData,getSwapSpecification:getSwapSpecification,getTriggerSpecs:getTriggerSpecs,getTarget:getTarget,makeFragment:makeFragment,mergeObjects:mergeObjects,makeSettleInfo:makeSettleInfo,oobSwap:oobSwap,querySelectorExt:querySelectorExt,settleImmediately:settleImmediately,shouldCancel:shouldCancel,triggerEvent:triggerEvent,triggerErrorEvent:triggerErrorEvent,withExtensions:withExtensions}),VERBS=["get","post","put","delete","patch"],VERB_SELECTOR=VERBS.map(function(e){return"[hx-"+e+"], [data-hx-"+e+"]"}).join(", ");var scanForwardQuery=function(t,e,r){var n=asParentNode(getRootNode(t,r)).querySelectorAll(e);for(let e=0;e<n.length;e++){var a=n[e];if(a.compareDocumentPosition(t)===Node.DOCUMENT_POSITION_PRECEDING)return a}},scanBackwardsQuery=function(t,e,r){var n=asParentNode(getRootNode(t,r)).querySelectorAll(e);for(let e=n.length-1;0<=e;e--){var a=n[e];if(a.compareDocumentPosition(t)===Node.DOCUMENT_POSITION_FOLLOWING)return a}};const DUMMY_ELT=getDocument().createElement("output"),WHITESPACE_OR_COMMA=/[\s,]/,SYMBOL_START=/[_$a-zA-Z]/,SYMBOL_CONT=/[_$a-zA-Z0-9]/,STRINGISH_START=['"',"'","/"],NOT_WHITESPACE=/[^\s]/,COMBINED_SELECTOR_START=/[{(]/,COMBINED_SELECTOR_END=/[})]/,INPUT_SELECTOR="input, textarea, select";let windowIsScrolling=!1,scrollHandler=null;const HX_ON_QUERY=(new XPathEvaluator).createExpression('.//*[@*[ starts-with(name(), "hx-on:") or starts-with(name(), "data-hx-on:") or starts-with(name(), "hx-on-") or starts-with(name(), "data-hx-on-") ]]');let currentPathForHistory=location.pathname+location.search;const extensions={};var isReady=!1;return getDocument().addEventListener("DOMContentLoaded",function(){isReady=!0}),ready(function(){mergeMetaConfig(),insertIndicatorStyles();let e=getDocument().body;processNode(e);const t=getDocument().querySelectorAll("[hx-trigger='restored'],[data-hx-trigger='restored']"),r=(e.addEventListener("htmx:abort",function(e){e=getInternalData(e.target);e&&e.xhr&&e.xhr.abort()}),window.onpopstate?window.onpopstate.bind(window):null);window.onpopstate=function(e){e.state&&e.state.htmx?(restoreHistory(),forEach(t,function(e){triggerEvent(e,"htmx:restored",{document:getDocument(),triggerEvent:triggerEvent})})):r&&r(e)},getWindow().setTimeout(function(){triggerEvent(e,"htmx:load",{}),e=null},0)}),htmx}(),htmxLib=htmx$2,handlebars={exports:{}},handlebars_runtime={exports:{}},base$1={},utils={},hasRequiredUtils,exception={exports:{}},hasRequiredException,helpers$1={},blockHelperMissing={exports:{}},hasRequiredBlockHelperMissing,each={exports:{}},hasRequiredEach,helperMissing={exports:{}},hasRequiredHelperMissing,_if={exports:{}},hasRequired_if,log={exports:{}},hasRequiredLog,lookup={exports:{}},hasRequiredLookup,_with={exports:{}},hasRequired_with,hasRequiredHelpers$1,decorators={},inline={exports:{}},hasRequiredInline,hasRequiredDecorators,logger={exports:{}},hasRequiredLogger,protoAccess={},createNewLookupObject={},hasRequiredCreateNewLookupObject,hasRequiredProtoAccess,hasRequiredBase$1,safeString={exports:{}},hasRequiredSafeString,runtime={},wrapHelper={},hasRequiredWrapHelper,hasRequiredRuntime,noConflict={exports:{}},hasRequiredNoConflict,hasRequiredHandlebars_runtime,ast={exports:{}},hasRequiredAst,base={},parser={exports:{}},hasRequiredParser,whitespaceControl={exports:{}},visitor={exports:{}},hasRequiredVisitor,hasRequiredWhitespaceControl,helpers={},hasRequiredHelpers,hasRequiredBase,compiler={},hasRequiredCompiler,javascriptCompiler={exports:{}},codeGen={exports:{}},sourceMap={},sourceMapGenerator={},base64Vlq={},base64={},hasRequiredBase64,hasRequiredBase64Vlq,util={},hasRequiredUtil,arraySet={},hasRequiredArraySet,mappingList={},hasRequiredMappingList,hasRequiredSourceMapGenerator,sourceMapConsumer={},binarySearch={},hasRequiredBinarySearch,quickSort={},hasRequiredQuickSort,hasRequiredSourceMapConsumer,sourceNode={},hasRequiredSourceNode,hasRequiredSourceMap,hasRequiredCodeGen,hasRequiredJavascriptCompiler,hasRequiredHandlebars,handlebarsExports=requireHandlebars(),Handlebars$1=getDefaultExportFromCjs(handlebarsExports);const htmx$1=htmxLib,VERSION=("undefined"!=typeof window&&(window.htmx=htmx$1,window.Handlebars=Handlebars$1,registerHelpers()),"1.5.1"),AUTHOR="JWSLS",LICENSE="Flowplater standard licence",metaElement=(ConfigManager.setDefaultConfig(ConfigManager.getDefaultConfig()),document.querySelector('meta[name="fp-config"]'));if(metaElement)try{const metaConfig=JSON.parse(metaElement.content);ConfigManager.setConfig(metaConfig)}catch(e){Debug.error("Error parsing fp-config meta tag content:",metaElement.content,e)}RequestHandler.setupEventListeners(),defineHtmxExtension();const ProcessingChain={processors:[{name:"customTags",process:replaceCustomTags},{name:"htmxAttributes",process:translateCustomHTMXAttributes},{name:"htmxExtensionAttribute",process:addHtmxExtensionAttribute},{name:"urlAffixes",process:processUrlAffixes},{name:"animation",process:setupAnimation},{name:"preload",process:processPreload},{name:"htmxProcess",process:e=>(htmx$1.process(e),e)}],get FP_SELECTOR(){return ConfigManager.getConfig().selectors.fp.map(e=>AttributeMatcher._getAllAttributeNames(e).map(e=>`[${e}]`).join(",")).join(",")},processElement:function(e){e._preloadCleanup&&e._preloadCleanup();let a={success:!0,errors:[],warnings:[],finalElement:e};return a.finalElement=this.processors.reduce((t,r,n)=>{if(!t)return a.errors.push({phase:r.name,error:"Element became undefined at processor index "+n,processor:this.processors[n-1]}),a.success=!1,e;try{return r.process(t)}catch(e){n=e;return a.errors.push({phase:r.name,error:n.message,stack:n.stack}),Debug.error(`Error in processor ${r.name}: `+n.message,n),e instanceof TemplateError&&a.warnings.push({phase:r.name,message:"Falling back to original template"}),t}},e),0<a.errors.length&&EventSystem.publish("processingChain:error",a),0<a.warnings.length&&EventSystem.publish("processingChain:warning",a),a.finalElement}},FlowPlaterObj={compileTemplate:compileTemplate,render:render,getInstance:getInstance,getInstances:getInstances,getOrCreateInstance(e,t={}){var r=AttributeMatcher.findElementByInstanceName(e);return r?InstanceManager.getOrCreateInstance(r,t):(Debug.error("Element not found for instance: "+e),null)},getGroup(e){return GroupManager.getGroup(e)},getOrCreateGroup(e,t={}){return GroupManager.getOrCreateGroup(e,t)},getGroups(){return GroupManager.getAllGroups()},updateGroup(e,t){return GroupManager.updateGroup(e,t)},removeGroup(e){return GroupManager.removeGroup(e)},removeAllGroups(){return GroupManager.removeAllGroups()},log(e,...t){return t.unshift("[PLUGIN]"),Debug.log(e,...t),this},logLevels:Debug.levels,registerPlugin(e,t={}){return PluginManager.registerPlugin(e,t)},removePlugin(e){return PluginManager.removePlugin(e)},removeAllPlugins(){return PluginManager.destroyAll()},getPlugin(e){return PluginManager.getPlugin(e)},getAllPlugins(){return PluginManager.getSortedPlugins()},enablePlugin(e){return PluginManager.enablePlugin(e)},disablePlugin(e){return PluginManager.disablePlugin(e)},pluginConfig(e){return PluginManager.pluginConfig(e)},on:(...e)=>EventSystem.subscribe(...e),off:(...e)=>EventSystem.unsubscribe(...e),emit:(...e)=>EventSystem.publish(...e),debug(e){return ConfigManager.setConfig({debug:{level:e}}),this},templateCache:TemplateCache,init(e=document,o={render:!0}){return _state.initialized?e!==document?(Performance.start("init-element"),Debug.info("Re-initializing FlowPlater for element:",e),process(e),Performance.end("init-element")):Debug.debug("FlowPlater already initialized, skipping document re-initialization"):(ConfigManager.submitQueuedConfig(),Performance.start("init"),Debug.info("Initializing FlowPlater..."),process(e),e=AttributeMatcher.findMatchingElements("template"),(Array.isArray(e)?e.filter(Boolean):e?[e]:[]).forEach(t=>{var e=AttributeMatcher._getRawAttribute(t,"template");if(e=e!==DEFAULTS.TEMPLATE.SELF_TEMPLATE_ID&&""!==e?e:t.id){var r=document.querySelector(e);if(r){Debug.info("replacing template content",r);var n=r.getElementsByTagName("script");const a=Array.from(n).map(e=>e.innerHTML);Array.from(n).forEach((e,t)=>{e.innerHTML=`##FP_SCRIPT_${t}##`}),r.innerHTML=r.innerHTML.replace(/\[\[(.*?)\]\]/g,"{{$1}}"),Array.from(r.getElementsByTagName("script")).forEach((e,t)=>{e.innerHTML=a[t]})}compileTemplate(e,!0),o.render&&(n=!1,n=(n=["get","post","put","patch","delete"].some(e=>AttributeMatcher._hasAttribute(t,e)))||["trigger","boost","ws","sse"].some(e=>AttributeMatcher._hasAttribute(t,e)),Debug.debug(`[Template ${e}] Has request method: `+n,t),render({template:e,data:{},target:t,skipRender:!1}))}else Debug.error("No template ID found for element: "+t.id,t,"Make sure your template has an ID attribute")}),_state.initialized=!0,_readyState.isReady=!0,Debug.info("FlowPlater initialized successfully"),Performance.end("init"),_readyState.processQueue(),EventSystem.publish("initialized"),PluginManager.executeHook("initComplete",this,_state.instances)),this},ready(e){return _readyState.isReady?e(this):_readyState.queue.push(()=>e(this)),this},cleanup(e){var t;return e?(t=_state.instances[e])&&(t.elements.forEach(e=>{e._preloadCleanup&&e._preloadCleanup(),e.removeEventListeners&&e.removeEventListeners()}),delete _state.instances[e],Debug.info("Cleaned up instance: "+e)):(Object.keys(_state.instances).forEach(e=>{this.cleanup(e)}),_state.initialized=!1,Debug.info("Cleaned up all instances")),this},VERSION:VERSION,AUTHOR:AUTHOR,LICENSE:LICENSE,setCustomTags:setCustomTags,config:function(e={}){return ConfigManager.setConfig(e),this},getConfig:function(){return ConfigManager.getConfig()},registerTag:function(e,t){return Handlebars$1.registerHelper(e,t),this.templateCache.clear(),Object.keys(_state.instances).forEach(e=>{e=_state.instances[e];e.templateId&&(e.template=compileTemplate(e.templateId,!0))}),Debug.info("Registered Handlebars helper: "+e),this},trigger:function(t,e=document,r={}){"string"==typeof e?document.querySelectorAll(e).forEach(e=>{EventSystem.publish(t,{element:e,detail:r}),htmx$1.trigger(e,t,r)}):(EventSystem.publish(t,{element:e,detail:r}),e&&htmx$1.trigger(e,t,r))},destroy:function(){Object.keys(_state.instances).forEach(e=>{this.cleanup(e)}),TemplateCache.clear(),_state.instances={},EventSystem.unsubscribeAll(),Debug.info("Cleaned up all instances")},create:function(e,t={refresh:!0}){Performance.start("createInstance:"+e),Debug.info("Creating FlowPlater instance: "+e);var r=AttributeMatcher.findElementByInstanceName(e);if(!r)throw new FlowPlaterError("Could not find element for instance: "+e);var n=AttributeMatcher._getRawAttribute(r,"template"),n=(n&&this.templateCache.clear(n),this.init(r),getInstance(e));if(n)return PluginManager.executeHook("newInstance",n),t.refresh&&n.refresh(),Debug.info("Instance created successfully: "+e),Performance.end("createInstance:"+e),n;throw new FlowPlaterError("Failed to create instance: "+e)},findAttribute(e,t){return AttributeMatcher.findAttribute(e,t)},addTransformer(e,t,r){if("function"!=typeof t)throw new FlowPlaterError("Transformer must be a function");return PluginManager.addTransformer(e,t,r),this},removeTransformer(e,t){return PluginManager.removeTransformer(e,t)},clearTransformers(e){return PluginManager.clearTransformers(e||""),this},listTransformers(e){return PluginManager.listTransformers(e)}};if(EventSystem.publish("loaded"),"undefined"!=typeof window){const queuedCallbacks=window.FlowPlater;Array.isArray(queuedCallbacks)&&0<queuedCallbacks.length&&(Debug.info(`Processing ${queuedCallbacks.length} pre-loaded FlowPlater callbacks`),queuedCallbacks.forEach(e=>{"function"==typeof e?_readyState.queue.push(()=>e(FlowPlaterObj)):Debug.warn("Invalid callback in FlowPlater queue:",e)}))}return"undefined"!=typeof window&&(window.FlowPlater=FlowPlaterObj),"complete"===document.readyState||"interactive"===document.readyState?FlowPlaterObj.init():document.addEventListener("DOMContentLoaded",()=>FlowPlaterObj.init()),FlowPlaterObj}();