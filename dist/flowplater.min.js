/**!
@preserve FlowPlater starts here 
*/
var FlowPlater=function(){"use strict";function getInstance(e){return _state.instances[e]}function getInstances(){return _state.instances}function memoize(r){const n=new Map,e=(...e)=>{var t=JSON.stringify(e);return n.has(t)?n.get(t):(e=r(...e),n.set(t,e),e)};return e.original=r,e.cache=n,e}function setCustomTags(e){currentCustomTags=e}function replaceCustomTags(e){let t=!1;for(const n of currentCustomTags){var r=e.getElementsByTagName(n.tag);if(0<r.length){t=!0;const e=Array.from(r);for(const t of e){const e=document.createElement(n.replaceWith);e.innerHTML=t.innerHTML;for(const o of t.attributes)e.setAttribute(o.name,o.value);t.parentNode?.replaceChild(e,t)}}}return t&&Debug.info("replaced custom tags",e),e}function deepMerge(e,t){if(t){if(!e)return t;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(Array.isArray(e[r])&&Array.isArray(t[r])||!(r in e)||"object"!=typeof e[r]||"object"!=typeof t[r]||null===e[r]||null===t[r]?e[r]=t[r]:deepMerge(e[r],t[r]))}return e}function normalizeStorageConfig(e,t){return"boolean"==typeof e?{enabled:e,ttl:t.ttl}:"number"==typeof e?-1===e?{enabled:!0,ttl:-1}:{enabled:0<e,ttl:0<e?e:t.ttl}:"object"==typeof e&&null!==e?{enabled:!!e.enabled,ttl:("number"==typeof e.ttl?e:t).ttl}:t}function compileTemplate(e,t=!1){if(!t)return memoizedCompile(e);delete _state.templateCache[e];t=memoizedCompile.original(e);return memoizedCompile.cache.set(JSON.stringify([e]),t),t}function replacer(e,t){return t instanceof Map?{_:"Map",value:Array.from(t.entries())}:t}function reviver(e,t){return"object"==typeof t&&null!==t&&"Map"===t._?new Map(t.value):t}function saveToLocalStorage(t,r,n=""){var o=ConfigManager.getConfig().storage;if(!o?.enabled)return Debug.debug("[LocalStorage] Storage is disabled, skipping save for key: "+t);try{var a=n?`fp_${n}_`+t:"fp_"+t;let e;try{e=JSON.stringify(r,replacer)}catch(t){return Debug.error(`[LocalStorage] Failed to serialize data for key ${a}: `+t.message)}var i={data:e,expiry:-1===o.ttl?null:Date.now()+1e3*o.ttl};Debug.debug("[LocalStorage] Saving to localStorage:",{key:a,item:i}),localStorage.setItem(a,JSON.stringify(i))}catch(r){return Debug.error(`[LocalStorage] Failed to save to localStorage for key ${t}: `+r.message)}}function loadFromLocalStorage(e,t=""){try{var r,n,o=t?`fp_${t}_`+e:"fp_"+e,a=localStorage.getItem(o);return a?(r=JSON.parse(a)).expiry&&r.expiry<Date.now()?(Debug.debug("[LocalStorage] Stored item has expired for key: "+o),localStorage.removeItem(o),null):(n=JSON.parse(r.data,reviver),Debug.debug("[LocalStorage] Loaded from localStorage:",{key:o,data:n}),n):(Debug.debug("[LocalStorage] No stored item found for key: "+o),null)}catch(t){return Debug.error(`[LocalStorage] Failed to load or parse from localStorage for key ${e}: `+t.message),null}}function collectDebugInfo(e,t,r={}){return{formId:e.id,type:t,persistenceEnabled:isPersistenceEnabledForElement(e),restoredElements:r.restoredElements||[],customVisualUpdates:r.customVisualUpdates||[],skippedElements:r.skippedElements||[],storageType:r.storageType}}function handleFormStorage(e,t={},r="save"){var n=shouldUseLocalStorage(e),o="fp_form_"+e.id;if("save"===r)n?saveToLocalStorage(e.id,t,"form"):sessionStorage.setItem(o,JSON.stringify(t));else{if("load"===r)return n?loadFromLocalStorage(e.id,"form"):JSON.parse(sessionStorage.getItem(o)||"{}");"clear"===r&&(n&&localStorage.removeItem(o),sessionStorage.removeItem(o))}}function processFormElements(e,t){Array.from(e.elements).forEach(e=>{(e instanceof HTMLInputElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement)&&e.name&&"file"!==e.type&&isPersistenceEnabledForElement(e)&&t(e)})}function manageEventListener(t,e,r,n="add"){("change"===e?["change","checkbox"!==t.type&&"radio"!==t.type?"input":null]:[e]).filter(Boolean).forEach(e=>{t["add"===n?"addEventListener":"removeEventListener"](e,r)})}function restoreElementValue(e,t){e instanceof HTMLInputElement&&("checkbox"===e.type||"radio"===e.type)?(e.checked="true"===t,updateCustomVisualState(e)):e instanceof HTMLSelectElement&&e.multiple?Array.from(e.options).forEach(e=>{e.selected=t.includes(e.value)}):e.value=t}function updateCustomVisualState(e){var t=e.closest("checkbox"===e.type?".w-checkbox":".w-radio");t&&(t=t.querySelector(`.w-${e.type}-input`))&&t.classList.toggle("w--redirected-checked",e.checked)}function getPersistenceSettings(e){let t=!1,r=!1;var n;return r=AttributeMatcher.v(e,"persist")?(t="false"!==AttributeMatcher.m(e,"persist"),"true"===AttributeMatcher.m(e,"persist")):(n=e.closest("form"))&&AttributeMatcher.v(n,"persist")?(t="false"!==AttributeMatcher.m(n,"persist"),"true"===AttributeMatcher.m(n,"persist")):ConfigManager.getConfig().storage?.enabled&&!ConfigManager.getConfig().persistForm?t=!1:(t=ConfigManager.getConfig().persistForm,ConfigManager.getConfig().storage?.enabled&&ConfigManager.getConfig().persistForm),e instanceof HTMLFormElement&&Array.from(e.elements).some(e=>"true"===AttributeMatcher.m(e,"persist"))&&(r=ConfigManager.getConfig().storage?.enabled),{shouldPersist:t,useLocalStorage:r&&ConfigManager.getConfig().storage?.enabled}}function isPersistenceEnabledForElement(e){return getPersistenceSettings(e).shouldPersist}function shouldUseLocalStorage(e){return getPersistenceSettings(e).useLocalStorage}function captureElementState(e){try{return e instanceof HTMLInputElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement?{value:e.value,checked:e.checked,selected:e instanceof HTMLSelectElement?e.multiple?Array.from(e.selectedOptions).map(e=>e.value):e.value:null,selectionStart:e instanceof HTMLTextAreaElement?e.selectionStart:null,selectionEnd:e instanceof HTMLTextAreaElement?e.selectionEnd:null,scrollTop:e instanceof HTMLTextAreaElement?e.scrollTop:null,scrollLeft:e instanceof HTMLTextAreaElement?e.scrollLeft:null}:null}catch(e){return Debug.error("Error capturing element state: "+e.message),null}}function restoreElementState(t,e){try{var r;e&&(t instanceof HTMLSelectElement?e.selected&&(t.multiple&&Array.isArray(e.selected)?e.selected.forEach(e=>{e=t.querySelector(`option[value="${e}"]`);e&&(e.selected=!0)}):(r=t.querySelector(`option[value="${e.selected}"]`))&&(r.selected=!0,t.value=e.selected)):t instanceof HTMLTextAreaElement?(t.value=e.value,null!==e.selectionStart&&null!==e.selectionEnd&&t.setSelectionRange(e.selectionStart,e.selectionEnd),null!==e.scrollTop&&(t.scrollTop=e.scrollTop),null!==e.scrollLeft&&(t.scrollLeft=e.scrollLeft)):(t.value=e.value,t.checked=e.checked))}catch(t){Debug.error("Error restoring element state: "+t.message)}}function updateElementAttributes(t,e){try{Array.from(e.attributes).forEach(e=>{"value"===e.name||"checked"===e.name||e.name.startsWith("w-")||t.setAttribute(e.name,e.value)})}catch(t){Debug.error("Error updating element attributes: "+t.message)}}function preserveElementState(e,t){try{var r;(e instanceof HTMLInputElement||e instanceof HTMLSelectElement||e instanceof HTMLTextAreaElement)&&(r=captureElementState(e),updateElementAttributes(e,t),restoreElementState(e,r))}catch(e){Debug.error("Error preserving element state: "+e.message)}}function captureFormStates(e){try{const t=e.getElementsByTagName("form"),r={};return Array.from(t).forEach(e=>{if(e.id){const t={};Array.from(e.elements).forEach(e=>{e.name&&"file"!==e.type&&isPersistenceEnabledForElement(e)&&(t[e.name]="checkbox"===e.type||"radio"===e.type?e.checked:e instanceof HTMLSelectElement&&e.multiple?Array.from(e.selectedOptions).map(e=>e.value):e.value)}),0<Object.keys(t).length&&(EventSystem.publish("formState:beforeCapture",{formId:e.id,formElement:e,state:t}),r[e.id]=t,shouldUseLocalStorage(e)?saveToLocalStorage(e.id,t,"form"):sessionStorage.setItem("fp_form_"+e.id,JSON.stringify(t)))}}),r}catch(e){return Debug.error("Error capturing form states: "+e.message),{}}}function restoreSingleFormState(e,t){if(e.id){const r=handleFormStorage(e,{},"load");if(!r)return Debug.debug("No stored state found for form: "+e.id);const n=collectDebugInfo(e,"restore",{restoredElements:[],customVisualUpdates:[],skippedElements:[],storageType:shouldUseLocalStorage(e)?"localStorage":"sessionStorage"});processFormElements(e,e=>{e.name in r&&(n.restoredElements.push({name:e.name,value:r[e.name]}),restoreElementValue(e,r[e.name]))}),Debug.debug("Form state restoration summary for "+e.id,{storageType:n.storageType,source:t||"unknown",restoredElements:n.restoredElements.map(e=>({name:e.name,value:e.value})),updatedCustomVisualStates:n.customVisualUpdates,skippedElements:n.skippedElements}),EventSystem.publish("formState:afterRestore",{formId:e.id,formElement:e,state:r,source:t||"unknown"})}}function clearFormState(e){FormStateManager.clearFormState(e)}function setupFormChangeListeners(r){try{if(!r.id)return Debug.debug("Skipping form without ID");const n=collectDebugInfo(r,"setup",{formElements:r.elements.length,checkboxWrappers:r.querySelectorAll(".w-checkbox").length,listenersAdded:[],skippedElements:[]});r.k||(r.k=[]),processFormElements(r,t=>{var e;r.k.some(({element:e})=>e===t)||(manageEventListener(t,"change",e=e=>handleFormElementChange(e)),r.k.push({element:t,handler:e}),n.listenersAdded?.push(t.name))}),Debug.debug("Form setup summary for "+r.id,{totalFormElements:n.formElements,checkboxWrappers:n.checkboxWrappers,formPersistence:n.persistenceEnabled?"enabled":"disabled",listenersAdded:n.listenersAdded?.join(", "),skippedElements:n.skippedElements.join(", ")})}catch(r){Debug.error("Error setting up form change listeners: "+r.message)}}function cleanupFormChangeListeners(e){try{e.k&&(e.k.forEach(({element:e,handler:t})=>{e.removeEventListener("change",t),e.removeEventListener("input",t)}),e.k=[])}catch(e){Debug.error("Error cleaning up form change listeners: "+e.message)}}function handleFormElementChange(e){try{const n=e.target,o=n.closest("form");if(o&&o.id){const a=collectDebugInfo(o,"change",{changedValues:{},skippedElements:[]}),i={};if(processFormElements(o,e=>{var t;isTemplateValue((t=e).name)||isTemplateValue(t.value)||AttributeMatcher.v(t,"bind")?a.skippedElements.push({name:e.name,reason:"Template binding detected",value:e.value}):(t="checkbox"===e.type||"radio"===e.type?e.checked:e instanceof HTMLSelectElement&&e.multiple?Array.from(e.selectedOptions).map(e=>e.value):e.value,i[e.name]=t,a.changedValues||(a.changedValues={}),a.changedValues[e.name]=t)}),0<Object.keys(i).length){handleFormStorage(o,i,"save"),Debug.debug("Form state update for "+o.id+":",{"Changed element":n.name,"Storage type":shouldUseLocalStorage(o)?"localStorage":"sessionStorage","Updated values":a.changedValues,"Skipped elements":a.skippedElements});let e=null;for(var[t,r]of Object.entries(_state.instances))if(Array.from(r.elements).some(e=>e.contains(o)||o.contains(e)||e===o)){e=r;break}PluginManager.executeHook("updateForm",e,{element:o,id:o.id,data:i,changedElement:n}),EventSystem.publish("formState:changed",{formId:o.id,formElement:o,state:i,changedElement:n})}function isTemplateValue(e){return"string"==typeof e&&(e.includes("{{")||e.includes("}}")||e.includes("[[")||e.includes("]]")||e.includes("this."))}}else Debug.debug("Skipping change handler - no form or form ID")}catch(e){Debug.error("Error handling form element change: "+e.message)}}function getAllRelevantForms(e){const t=new Set;e instanceof HTMLFormElement&&t.add(e);var r=e.closest("form"),r=(r&&t.add(r),e.getElementsByTagName("form"));return Array.from(r).forEach(e=>t.add(e)),t}function setupFormSubmitHandlers(e,t){try{Debug.debug("Setting up form submit handlers for element:",e);var r=getAllRelevantForms(e);Debug.debug(`Found ${r.size} forms`),r.forEach(e=>{setupSingleFormHandlers(e,t||"setupFormSubmitHandlers")})}catch(e){Debug.error("Error setting up form submit handlers: "+e.message)}}function setupSingleFormHandlers(e,t){e.id?(Debug.debug("Setting up handlers for form: "+e.id),e.removeEventListener("submit",handleFormSubmit),e.addEventListener("submit",handleFormSubmit),setupFormChangeListeners(e),e.T=!0,shouldRestoreForm(e)?(Debug.debug("Restoring state for form: "+e.id),restoreSingleFormState(e,t||"setupSingleFormHandlers")):Debug.debug("Skipping form restoration - no persistent elements: "+e.id)):Debug.debug("Skipping form without ID")}function handleFormSubmit(e){try{var t=e.target.closest("form");t&&t.id&&clearFormState(t.id)}catch(e){Debug.error("Error handling form submit: "+e.message)}}function setupDynamicFormObserver(e){try{var t=new MutationObserver(e=>{e.forEach(e=>{e.addedNodes.forEach(e=>{e instanceof HTMLFormElement&&setupFormSubmitHandlers(e,"setupDynamicFormObserver")})})});return t.observe(e,{childList:!0,subtree:!0}),t}catch(e){return Debug.error("Error setting up dynamic form observer: "+e.message),null}}function shouldRestoreForm(e){return FormStateManager.shouldRestoreForm(e)}function morphChildren(n,e,o,t){if(n.childNodes.length)if(n instanceof HTMLInputElement)preserveElementState(n,e);else{const a=n instanceof SVGElement;if(isSpecialElement(n))(n instanceof HTMLIFrameElement||n instanceof HTMLScriptElement?updateElementAttributes:preserveElementState)(n,e);else if(!n.children.length&&n.childNodes.length||!e.children.length&&e.childNodes.length)handleMixedContent(n,e);else{const i=Array.from(n.childNodes),r=Array.from(e.childNodes);if(1===i.length&&1===r.length&&i[0].nodeType===r[0].nodeType&&i[0].nodeName===r[0].nodeName)morphChildren(i[0],r[0],o);else{const s=new Set;r.forEach((e,t)=>{if(e.nodeType===Node.ELEMENT_NODE){var r=e.getAttribute("data-key");if(r){const e=o.get(r);if(e){const o=i.indexOf(e);-1!==o&&(n.insertBefore(e,i[t]||null),s.add(o))}}}}),r.forEach((r,e)=>{const t=i.findIndex((e,t)=>!s.has(t)&&nodesAreEqual(e,r));if(-1!==t){s.add(t);const r=i[t];if(Array.from(n.childNodes).indexOf(r)!==e){const t=i[e];t&&t!==r&&n.insertBefore(r,t)}}else{const t=a?cloneWithNamespace(r):r.cloneNode(!0);n.insertBefore(t,i[e]||null)}}),i.forEach((e,t)=>{s.has(t)||n.removeChild(e)})}}}else n.innerHTML=e.innerHTML,ConfigManager.getConfig().persistForm&&setupFormSubmitHandlers(n,"updateDOM - form state restoration - setupFormSubmitHandlers")}function isSpecialElement(e){return["INPUT","SELECT","TEXTAREA","IFRAME","SCRIPT"].includes(e.tagName)}function handleMixedContent(r,e){const t=Array.from(r.childNodes),n=Array.from(e.childNodes);t.length===n.length?t.forEach((e,t)=>{t=n[t];nodesAreEqual(e,t)||r.replaceChild(t.cloneNode(!0),e)}):r.innerHTML=e.innerHTML}function nodesAreEqual(e,t){return e.nodeType===t.nodeType&&(e.nodeType===Node.TEXT_NODE?e.textContent?.trim()===t.textContent?.trim():e.nodeType===Node.COMMENT_NODE?e.textContent===t.textContent:!!(e instanceof Element&&[e.className??"",t.className??""].some(e=>"string"==typeof e&&e.includes("w-")))||e.isEqualNode(t))}function cloneWithNamespace(e){if(!(e instanceof Element))return e.cloneNode(!0);const t=e.namespaceURI,r=t?document.createElementNS(t,e.tagName):document.createElement(e.tagName);return Array.from(e.attributes).forEach(e=>{var t=e.namespaceURI;t?r.setAttributeNS(t,e.name,e.value):r.setAttribute(e.name,e.value)}),Array.from(e.childNodes).forEach(e=>{r.appendChild(cloneWithNamespace(e))}),r}async function updateDOM(r,n,o=!1,a=null){Performance.start("updateDOM");let i=AttributeMatcher.v(r,"force-full-update");if(!r.hasAttribute("fp-restoring")||i){r.setAttribute("fp-restoring","true");try{if(!(r&&r instanceof HTMLElement))throw new Error("Invalid target element");if("string"!=typeof n)throw new Error("newHTML must be a string");Debug.debug("Starting updateDOM with config:",ConfigManager.getConfig()),Debug.debug(`Form persistence enabled: ${ConfigManager.getConfig().persistForm}, Should restore form: `+FormStateManager.shouldRestoreForm(r));let t=null,e=(ConfigManager.getConfig().persistForm&&FormStateManager.shouldRestoreForm(r)&&(Debug.debug("Capturing form states before update"),t=captureFormStates(r),Debug.debug("Captured form states:",t)),null);ConfigManager.getConfig().persistForm&&FormStateManager.shouldRestoreForm(r)&&(Debug.debug("Setting up dynamic form observer"),e=setupDynamicFormObserver(r));const s=()=>new Promise(e=>{if(EventSystem.publish("beforeDomUpdate",{element:r,newHTML:n,animate:o,formStates:t}),a&&PluginManager.executeHook("beforeDomUpdate",a,{element:r,newHTML:n,animate:o,formStates:t}),i)r.innerHTML=n.trim(),Debug.debug("Force full update, skipping morphChildren");else{const o=document.createElement("div"),a=(o.innerHTML=n.trim(),new Map),i=new Map;indexTree(r,a),indexTree(o,i),morphChildren(r,o,a,i)}ConfigManager.getConfig().persistForm&&FormStateManager.shouldRestoreForm(r)&&t&&(Debug.debug("Restoring form states after update"),FormStateManager.restoreFormStates(r,"updateDOM - form state restoration - restoreFormStates"),setupFormSubmitHandlers(r,"updateDOM - form state restoration - setupFormSubmitHandlers")),a&&PluginManager.executeHook("afterDomUpdate",a,{element:r,newHTML:n,animate:o,formStates:t}),EventSystem.publish("afterDomUpdate",{element:r,newHTML:n,animate:o,formStates:t}),e()});if(document.startViewTransition&&o?await document.startViewTransition(()=>s()).finished:await s(),ConfigManager.getConfig().persistForm&&FormStateManager.shouldRestoreForm(r)){Debug.debug("Restoring form states after update");const n=AttributeMatcher.findMatchingElements("persist","true"),o=Array.isArray(n)?n:[n];Debug.debug(`Found ${o.length} inputs to restore`),FormStateManager.restoreFormStates(r,"updateDOM - final form state restoration - restoreFormStates"),setupFormSubmitHandlers(r,"updateDOM - final form state restoration - setupFormSubmitHandlers")}e&&(Debug.debug("Disconnecting form observer"),e.disconnect())}catch(r){throw Debug.error("Error in updateDOM:",r),console.error("UpdateDOM error:",r),r}finally{r.removeAttribute("fp-restoring"),Performance.end("updateDOM")}}else Debug.debug("Already restoring, skipping")}function indexTree(e,t){for(var r,n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,null);r=n.nextNode();){const e=r.getAttribute("data-key");e&&t.set(e,r)}}function isCssSelector(e){return e.startsWith("#")||e.startsWith(".")||/[[]>+~:()]/.test(e)||/^[a-z]+[a-z-]+$/i.test(e)}function extractLocalData(e,t=!0){if(!e)return null;try{if(isCssSelector(e)){const t=document.querySelector(e);if(t){var r=PluginManager.getPlugin("data-extractor");if(!r||"function"!=typeof r.globalMethods?.processHtml)return Debug.warn("DataExtractor plugin not available for element extraction"),null;try{var n=r.globalMethods?.processHtml?.(t.outerHTML);return Debug.debug(`Extracted data from element "${e}":`,n),n}catch(t){return Debug.error(`DataExtractor failed for "${e}": `+t.message),null}}}var o,a=window[e];return void 0!==a?t&&("object"!=typeof a||null===a||Array.isArray(a))?(o={[e]:a},Debug.info(`Wrapped primitive value "${e}":`,o),o):(Debug.info(`Extracted value "${e}":`,a),a):(Debug.warn(`Neither variable nor element found for "${e}"`),null)}catch(t){return Debug.info(`Error extracting local data "${e}": `+t.message),null}}function instanceMethods(s){return{instanceName:s,animate:_state.defaults.animation,q:async function(){const r=_state.instances[s];if(r)try{let t;if("self"===r.templateId||null===r.templateId){const s=Array.from(r.elements)[0];if(!s)return void Debug.error("No template element found for self template",r.instanceName);t=s.innerHTML}else{if(!r.template)return void Debug.error("No template found for instance",r.instanceName);var{valid:e,isHtml:n}="string"==typeof(i=r.data)&&i.trim().startsWith("<!DOCTYPE")?(Debug.debug("Data is HTML, skipping validation",s),{valid:!0,isHtml:!0}):"object"==typeof i&&null!==i||Array.isArray(i)||"number"==typeof i||"boolean"==typeof i?{valid:!0,isHtml:!1}:(Debug.error("Invalid data type: "+typeof i),{valid:!1,isHtml:!1});if(!e)return void Debug.error("Invalid data type for instance",r.instanceName);if(n)Debug.debug("Data is HTML, using as is",r.instanceName),t=r.data;else{Debug.debug("Before transformation - instance data:",{instanceName:r.instanceName,rawData:r.data,getData:r.getData()});const s=PluginManager.applyTransformations(r,r.getData(),"transformDataBeforeRender","json");Debug.debug("After transformation - transformed data:",{instanceName:r.instanceName,transformedData:s,isNull:null===s,isUndefined:void 0===s,type:typeof s}),t=r.template(s),Debug.debug("Rendered template with data:",{template:r.templateId,data:s,rendered:t})}}var o,a=Array.from(r.elements).filter(e=>document.body.contains(e));if(0!==a.length)return o=a.map(e=>updateDOM(e,t,r.animate,r)),await Promise.all(o);Debug.error("No active elements found for instance",r.instanceName)}catch(e){Debug.error("Error updating DOM for instance",r.instanceName,e)}else Debug.error("Instance not found: "+s);var i},setData:function(e){var t=_state.instances[s];if(t)if("string"!=typeof e&&"number"!=typeof e&&!Array.isArray(e)||(Debug.warn("[setData] Received raw value or unnamed root object, automatically wrapping in 'data' property"),e={data:e}),"object"!=typeof e||null===e||Array.isArray(e))Debug.error("Invalid newData type provided to setData: "+typeof e);else{var r=t.data,n=(Debug.debug(`[setData] Replacing data for ${s}. Current keys: ${Object.keys(r).join(", ")}, New keys: `+Object.keys(e).join(", ")),[]);for(const s in r)Object.hasOwnProperty.call(r,s)&&!Object.hasOwnProperty.call(e,s)&&(n.push(s),delete r[s]);0<n.length&&Debug.debug(`[setData] Deleted stale keys for ${s}: `+n.join(", ")),deepMerge(r,e),Debug.debug(`[setData] Data replacement complete for ${s}.`)}else Debug.error("Instance not found: "+s);return this},remove:function(){var e=_state.instances[s];if(!e)throw new Error("Instance not found: "+s);EventSystem.publish("beforeRemove",{instanceName:s,elements:e.elements});try{return ConfigManager.getConfig().storage?.enabled&&localStorage.removeItem("fp_"+s),e.elements.forEach(function(e){try{e.innerHTML=""}catch(e){Debug.error("Error removing instance: "+e.message)}}),e.elements=[],delete _state.instances[s],delete _state.templateCache[e.templateId],EventSystem.publish("afterRemove",{instanceName:s,elements:[]}),Debug.info("Removed instance: "+s),!0}catch(e){throw e}},refresh:async function(n={remote:!0,recompile:!1,ignoreLocalData:!1}){const o=_state.instances[s];if(!o)return Debug.error("Instance not found: "+s),Promise.reject(new Error("Instance not found: "+s));var e=PluginManager.applyTransformations(o,o.data,"transformDataBeforeRender","json"),t=o.template(e);(n.recompile||!t&&o.data)&&(o.template=compileTemplate(o.templateId,!0)),Debug.debug("Refresh - Template check:",{templateId:o.templateId,templateElement:document.querySelector(o.templateId),compiledTemplate:o.template(e)});let a=!1;if(o.localVarName&&!n.ignoreLocalData){const s=extractLocalData(o.localVarName);s&&(deepMerge(o.data,s),a=!0,Debug.debug(`Refreshed data from local variable "${o.localVarName}"`))}const i=[];return o.elements.forEach(async function(t){try{if(n.remote&&!a){const n=["get","post","put","patch","delete"];if(n.some(e=>t.getAttribute("hx-"+e))){const e=n.find(e=>t.getAttribute("hx-"+e)),a=t.getAttribute("hx-"+e),r=fetch(a,{method:e?.toUpperCase()}).then(e=>{if(e.ok)return e.json();throw new Error("HTTP error! status: "+e.status)}).then(e=>(deepMerge(o.data,e),ConfigManager.getConfig().storage?.enabled&&saveToLocalStorage(s,o.data,"instance"),e));i.push(r)}}else{const s=PluginManager.applyTransformations(o,o.data,"transformDataBeforeRender","json");Debug.debug("Instance.refresh - Transformed data:",s),i.push(updateDOM(t,o.template(s),o.animate,o))}}catch(e){t.innerHTML=`<div class="fp-error">Error refreshing template: ${e.message}</div>`,Debug.error("Failed to refresh template: "+e.message),i.push(Promise.reject(e))}}),Promise.all(i)},getData:function(){return JSON.parse(JSON.stringify(_state.instances[s].data))},getElements:function(){return _state.instances[s].elements},get:function(e){return e?function(r){var e=_state.instances[s];if(e){var n=r.split(/[\.\[\]'"]/);let t=e.data;for(let e=0;e<n.length;e++){const r=n[e];if(""!==r){if(null==t||!t.hasOwnProperty(r))return;t=t[r]}}return t}Debug.error("Instance not found: "+s)}.call(this,e):this.getData?.()},refreshTemplate:function(e,t=!1){return Performance.start("refreshTemplate:"+e),!!compileTemplate(e,t)||(Debug.error("Failed to compile template: "+e),Performance.end("refreshTemplate:"+e),!1)}}}function createDeepProxy(e,n){return"object"!=typeof e||null===e?e:new Proxy(e,{get(e,t){e=e[t];return e&&"object"==typeof e?createDeepProxy(e,n):e},set:(e,t,r)=>(e[t]=r,Promise.resolve().then(()=>n(e)),!0),deleteProperty:(e,t)=>(delete e[t],Promise.resolve().then(()=>n(e)),!0)})}function render({template:o,data:a,target:i,returnHtml:s=!1,instanceName:l,animate:u=_state.defaults.animation,recompile:e=!1,skipLocalStorageLoad:c=!1,skipRender:p=!1,isStoredDataRender:h=!1}){let t;if(Performance.start("render:"+(l||"anonymous")),_state.i||(_state.i={}),l?t=l:i instanceof Element&&AttributeMatcher.v(i,"instance")?t=AttributeMatcher.m(i,"instance"):i instanceof Element&&i.id?t=i.id:"string"==typeof i&&i.startsWith("#")&&(t=i.substring(1)),t&&_state.i[t]&&!h){const o=Date.now()-_state.i[t];if(o<100)return Debug.warn(`[Template] Skipping redundant initialization for ${t}, last init was ${o}ms ago`),_state.instances[t]||null}if(t&&(_state.i[t]=Date.now()),EventSystem.publish("beforeRender",{instanceName:l,template:o,data:a,target:i,returnHtml:s,recompile:e}),!o||"self"===o){const a="string"==typeof i?document.querySelector(i):i;a&&(o="#"+a.id)}let d=[];if(i instanceof Element){const o=AttributeMatcher.m(i,"target");o&&(d="this"===o?[i]:Array.from(document.querySelectorAll(o)))}if(0===d.length&&(i instanceof NodeList?d=Array.from(i):"string"==typeof i?d=Array.from(document.querySelectorAll(i)):i instanceof Element&&(d=[i])),0===d.length)Debug.error("No target elements found");else{l=l||(AttributeMatcher.v(d[0],"instance")?AttributeMatcher.m(d[0],"instance")||void 0:d[0].id||_state.length.toString());var f=compileTemplate(o,e);if(_state.length++,f){if(0!==d.length){let t=a||{},r=null,n=null;const g=AttributeMatcher.m(d[0],"local");let e=null;if(g){if(!(e=extractLocalData(g)))try{const o=document.querySelector(g);if(o&&AttributeMatcher.findMatchingElements("data",null,!1,o)){const a=PluginManager.getPlugin("data-extractor");a&&(e=a.instanceMethods?.extractData?.(o))}}catch(o){Debug.warn("[Template] Invalid selector for fp-local: "+g)}if(e&&(t={...t,...e}),AttributeMatcher.v(d[0],"local-observe")){const o=AttributeMatcher.findMatchingElements("data");o?.forEach(e=>{PluginManager.getPlugin("data-extractor")?.instanceMethods?.observeDataElement?.(e,g,l?_state.instances[l]:void 0)})}}if(l&&_state.instances[l]&&_state.instances[l].data)n=_state.instances[l].data;else{if(!c&&ConfigManager.getConfig().storage?.enabled&&(r=loadFromLocalStorage(l||"","instance"))){if(!0===r.isHtml||"string"==typeof r&&"function"==typeof r.trim&&(r.trim().startsWith("<!DOCTYPE html")||r.trim().startsWith("<html"))){const o=AttributeMatcher.m(d[0],"swap","innerHTML"),a={swapStyle:o||"innerHTML",swapDelay:0,settleDelay:0,transition:o?.includes("transition:true")||!1};return s?r:(d.forEach(e=>{htmx.swap(e,r,a)}),l?_state.instances[l]:void 0)}t={...r?.data||r,...t},Debug.debug(`[Template] Merged persisted data for ${l}:`,t)}const a=d.find(e=>AttributeMatcher.v(e,"template"));if(!a)return Debug.error("No template element found in target elements"),null;const i=InstanceManager.getOrCreateInstance(a,t);if(!i)return Debug.error("Failed to get or create instance: "+l),null;g&&(i.localVarName=g),i.N||(i.N=null),i.I||(i.I=null);const u=AttributeMatcher.m(a,"group");if(u){let e=t;if(!c&&ConfigManager.getConfig().storage?.enabled){const a=loadFromLocalStorage(u,"group");a&&(e=deepMerge(a,t),Debug.debug("Loaded persisted data for group "+u,e))}const a=GroupManager.getOrCreateGroup(u,e);n=a.data,GroupManager.addInstanceToGroup(i,u),Debug.info(`Instance ${l} is using group ${u} data`)}else{const o=0;n=createDeepProxy(t,()=>{i&&!i.L&&(i.N&&clearTimeout(i.N),i.N=setTimeout(()=>{try{i.L=!0;var e,t=PluginManager.applyTransformations(i,i.getData(),"transformDataBeforeRender","json"),r=i.template(t);i.F!==r?(Debug.info(`[Debounced Update] Output changed for ${l}. Firing updateData hook.`),PluginManager.executeHook("updateData",i,{newData:n,source:"proxy"}),EventSystem.publish("updateData",{instanceName:l,newData:n,source:"proxy"}),Debug.debug("[Debounced Update] Triggering _updateDOM for "+l),i.q(),i.F=r,ConfigManager.getConfig().storage?.enabled&&(e=i.instanceName.replace("#",""),Debug.debug("[Debounced Update] Saving data for "+e),saveToLocalStorage(e,n,"instance"))):Debug.debug(`[Debounced Update] No output change for ${l}. Skipping update.`)}finally{i.L=!1,i.N=null}},0))})}if(i.template=f,i.templateId=AttributeMatcher.m(a,"template")||o,i.data=n,Debug.debug(`[Initial Render] ${p?"Skipping":"Triggering"} _updateDOM for `+l),p||i.q(),ConfigManager.getConfig().storage?.enabled&&!r&&!i.groupName){const o=l?.replace("#","")||"";Debug.debug("[Initial Save] Saving initial data for "+o),saveToLocalStorage(o,t,"instance")}}h=l?_state.instances[l]:void 0;if(h&&Debug.info("Final instance data: ",h.data),n){const a=d.find(e=>AttributeMatcher.v(e,"template"));if(!a)return Debug.error("No template element found in target elements"),null;const i=InstanceManager.getOrCreateInstance(a,t);if(!i)return Debug.error("Failed to get or create instance: "+l),null;if(i.template=f,i.templateId=AttributeMatcher.m(a,"template")||o,i.data=n,p)Debug.debug(`[Render Template] Skipping render for ${l} as requested`);else{Debug.debug("[Render Template] Executing render for "+l);try{if(s){const o=PluginManager.applyTransformations(i,i.getData(),"transformDataBeforeRender","json");return f(o)}Array.from(i.elements).forEach(e=>{var t=PluginManager.applyTransformations(i,i.getData(),"transformDataBeforeRender","json");updateDOM(e,f(t),u,i)})}catch(o){throw o instanceof TemplateError||Debug.error("Failed to render template: "+o.message),o}}}else p||Debug.debug(`[Template] Skipping render for ${l} because no data is available yet.`);return h||null}Debug.error("Target not found: "+i)}else Debug.error("Template not found: "+o)}}function compare(e,t,r){if(isNaN(e)||(e=Number(e)),isNaN(r)||(r=Number(r)),null==e||null==r)switch(t){case"==":return e==r;case"!=":return e!=r;case"&&":return Boolean(e)&&Boolean(r);case"||":return Boolean(e)||Boolean(r);default:return}if("string"==typeof e&&"string"==typeof r)switch(t){case"==":return 0===e.localeCompare(r);case"!=":return 0!==e.localeCompare(r);case"<":return e.localeCompare(r)<0;case">":return 0<e.localeCompare(r);case"<=":return e.localeCompare(r)<=0;case">=":return 0<=e.localeCompare(r);default:throw new TemplateError("Unsupported operator for strings: "+t)}switch(t){case"==":return e==r;case"!=":return e!=r;case"<":return e<r;case">":return r<e;case"<=":return e<=r;case">=":return r<=e;case"&&":return Boolean(e)&&Boolean(r);case"||":return Boolean(e)||Boolean(r);case"regex":return new RegExp(r).test(e);default:throw new TemplateError("Unsupported operator: "+t)}}function ifHelper(){var e=window.Handlebars;e.unregisterHelper("if"),e.registerHelper("if",function(e,t){function resolveValue(t,r,n){if(t.startsWith('"')&&t.endsWith('"')||t.startsWith("'")&&t.endsWith("'"))return t.slice(1,-1);if(!isNaN(Number(t)))return parseFloat(t);if("this"===t)return n;if(t.startsWith("this.")){const r=t.split(".").slice(1);let e=n;for(const t of r){if(!e||"object"!=typeof e)return;if(!Object.prototype.hasOwnProperty.call(e,t))return;e=e[t]}return e}n=t.split(".");let e=r;for(const t of n){if(e&&"object"==typeof e){if(Object.prototype.hasOwnProperty.call(e,t)){e=e[t];continue}return}return}return e}try{if(!e.match(/\s*(==|!=|<=|>=|<|>|\|\||&&)\s*/))return void 0!==resolveValue(e,t.data.root,this)?t.fn(this):t.inverse(this);var r=e.trim(),[n,o,a]=r.split(/\s*(==|!=|<=|>=|<|>|\|\||&&)\s*/);if(!n||o&&!a||!n&&o)throw new TemplateError("Invalid expression format: "+r);var i=resolveValue(n,t.data.root,this),s=!a||resolveValue(a,t.data.root,this),o=o||"==";return Debug.info("Evaluating expression:",{raw:r,leftValue:i,operator:o,rightValue:s}),"=="!==o||a?compare(i,o,s)?t.fn(this):t.inverse(this):void 0!==i?t.fn(this):t.inverse(this)}catch(e){throw e instanceof TemplateError||Debug.error("Error evaluating if condition:",e.stack),e}})}function sumHelper(){window.Handlebars.registerHelper("sum",function(...e){for(var t=0,r=0;r<e.length-1;r++){var n=e[r];Array.isArray(n)?n.forEach(function(e){t+=e}):t+=n}return t})}function*Lexer(e){for(var t,r=new RegExp(Lexer.lang,"g");null!==(t=r.exec(e));){var n,[o]=t;for(n in Lexer.categories)if(new RegExp(Lexer.categories[n]).test(o)){yield{token:o,category:n};break}}}function mathHelper(){window.Handlebars.registerHelper("math",function(e,r){const n=["min","max","sqrt","abs","log","ln","sin","cos","tan"],t=e.replace(/@{([^}]+)}/g,(e,t)=>{try{return t.includes(".")?t.split(".").reduce((e,t)=>e[t],r.data.root):r.data.root[t]||r.hash[t]}catch(e){return console.warn("Could not resolve "+t),NaN}}).replace(/[a-zA-Z_][a-zA-Z0-9_]*(\.[a-zA-Z0-9_]+)*/g,t=>{if(n.includes(t)&&!t.includes("."))return t;try{return t.includes(".")?t.split(".").reduce((e,t)=>e[t],r.data.root):r.data.root[t]||r.hash[t]}catch(e){return console.warn("Could not resolve "+t),NaN}});Debug.debug("Evaluating expression:",t);try{return(new Calc).exec(t)}catch(e){if(e instanceof TemplateError)throw e;throw new TemplateError("Error evaluating expression: "+e.message,e.stack)}})}function sortFunction(r,n){return function(e,t){e=r?e[r]:e,t=r?t[r]:t;return null==e?n?-1:1:null==t?n?1:-1:"string"==typeof e&&"string"==typeof t?n?t.localeCompare(e):e.localeCompare(t):e<t?n?1:-1:t<e?n?-1:1:0}}function eachHelper(){const g=window.Handlebars;g.unregisterHelper("each"),g.registerHelper("each",function(e,t){var r,n,o="",a=t.hash.limit||void 0,i=t.hash.startAt||0,s=t.hash.sortBy||"",l=t.hash.descending||!1,u=t.hash.sortBeforeLimit||!0,c=t.inverse,p=t.fn;if(e instanceof Map&&(e=Array.from(e.values())),u="boolean"!=typeof u||u,t.data&&t.ids&&(n=(t.data.contextPath||"")+t.ids[0]+"."),g.Utils.isFunction(e)&&(e=e.call(this)),t.data&&(r=g.createFrame(t.data)),!Array.isArray(e)&&"object"!=typeof e)return c(this);var h=Array.isArray(e)?e.slice():Object.entries(e);void 0===a&&(a=h.length),u?(h.sort(sortFunction(s,l)),h=h.slice(i,a+i)):(h=h.slice(i,a+i)).sort(sortFunction(s,l));for(var d=0;d<h.length;d++){var f=Array.isArray(e)?h[d]:h[d][1];r.key=Array.isArray(e)?d:h[d][0],r.index=d,r.first=0===d,r.last=d===h.length-1,n&&(r.contextPath=n+r.key),o+=p(f,{data:r,blockParams:g.Utils.blockParams([f,r.key],[n+r.key,null])})}return 0===d?c(this):o})}function executeHelper(){window.Handlebars.registerHelper("execute",function(e,...t){if(ConfigManager.getConfig().allowExecute){t.pop();var r=String(e).trim(),n=ALLOWED_FUNCTIONS.get(r);if(n)try{return n.apply(this,t)}catch(e){return Debug.error("Error executing registered function "+r+": "+e.message),""}n=this[r];if("function"==typeof n)try{return n.apply(this,t)}catch(e){return Debug.error("Error executing context function "+r+": "+e.message),""}Debug.error("Function not found or not allowed: "+r+". Please register the function using registerExecutableFunction() before using it in a template.")}else Debug.error("execute is disabled. Cannot execute functions.");return""})}function setHelper(){window.Handlebars.registerHelper("set",function(e,t,r){return e&&t?/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(e)?void(r.data.root[e]=t):(Debug.error(`setHelper: varName ${e} is not a valid variable name`),""):(Debug.error("setHelper: varName and varValue are required"),"")})}function bunnyHelper(){const t=window.Handlebars;void 0!==t?t.helpers.bunny||(window._fp_bunnyStates={bunny:"\n    &nbsp;&nbsp;&nbsp;&nbsp;/)  /)<br>\n    ପ(˶•-•˶)ଓ ♡<br>\n    &nbsp;&nbsp;&nbsp;/づ  づ\n  ",bunnyFlipped:"\n    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(\\  (\\<br>\n    &nbsp;&nbsp;ପ(˶•-•˶)ଓ<br>\n    &nbsp;&nbsp;♡じ  じ\\\n  "},window._fp_bunnyAnimation=function(){window._fp_bunnyAnimationIntervalId&&clearInterval(window._fp_bunnyAnimationIntervalId),window._fp_bunnyAnimationIntervalId=setInterval(function(){document.querySelectorAll(".fp-bunny").forEach(function(e){"normal"===e.getAttribute("data-bunny-state")?(e.innerHTML=window._fp_bunnyStates.bunnyFlipped,e.setAttribute("data-bunny-state","flipped")):(e.innerHTML=window._fp_bunnyStates.bunny,e.setAttribute("data-bunny-state","normal"))})},1e3)},t.registerHelper("bunny",function(){var e=`<span class="fp-bunny" data-bunny-state="normal">${window._fp_bunnyStates.bunny}</span>`;return setTimeout(window._fp_bunnyAnimation,0),new t.SafeString(e)}),0<document.querySelectorAll(".fp-bunny").length&&window._fp_bunnyAnimation()):console.error("Handlebars is not loaded yet!")}function defaultHelper(){window.Handlebars.registerHelper("default",function(e,t){return e||t})}function registerHelpers(){ifHelper(),sumHelper(),mathHelper(),eachHelper(),executeHelper(),setHelper(),bunnyHelper(),defaultHelper()}function parseXmlToJson(e){return function xmlToJson(e){var t={};if(e.attributes)for(var r=0;r<e.attributes.length;r++){var n=e.attributes.item(r);n&&(t["_"+n.nodeName]=n.nodeValue)}var o=e.childNodes;if(1===o.length&&3===o[0].nodeType)return o?.[0]?.nodeValue?.trim();for(var a=0;a<o.length;a++){var i,s=o[a];1===s.nodeType&&(i=xmlToJson(s),t[s.nodeName]?(Array.isArray(t[s.nodeName])||(t[s.nodeName]=[t[s.nodeName]]),t[s.nodeName].push(i)):t[s.nodeName]=i)}return 0<Object.keys(t).length?t:{}}((new DOMParser).parseFromString(e,"text/xml").documentElement)}function defineHtmxExtension(){htmx.defineExtension("flowplater",{transformResponse:async function(e,t,r){var n=t.getResponseHeader("Content-Type")||"",o=n.startsWith("text/xml"),n=n.startsWith("text/html");let a=e,i=!1;if(o)try{var s=(new DOMParser).parseFromString(e,"text/xml");a=JSON.stringify(parseXmlToJson(s.toString())),i=!0}catch(e){Debug.error("Failed to parse XML response:",e)}else n||(i=!0);o=InstanceManager.getOrCreateInstance(r),o?(a=PluginManager.applyTransformations(o,a,"transformResponse",n?"html":"json"),i="object"==typeof a||"string"==typeof a&&(()=>{try{return JSON.parse(a),!0}catch{return!1}})(),Debug.debug("[transformResponse] isJson: "+i)):Debug.debug(`[transformResponse] No instance found for elt ${r.id}. Skipping transformations.`),Debug.debug("[transformResponse] Processed text: "+a),s=t.requestId,n=RequestHandler.processingElements.get(r);if(n&&n.requestId===s&&i){if(Debug.debug("[transformResponse] Processed text is JSON"),o){Debug.debug("[transformResponse] Setting data for "+o.instanceName);try{RequestHandler.handleRequest(r,s,"process"),o.O=!0;const e="string"==typeof a?JSON.parse(a):a;o.setData(e),o.O=!1}catch(e){Debug.error("[transformResponse] Error: "+e.message),o.O=!1}}return""}return a},handleSwap:function(e,t,r,n){Debug.debug("[handleSwap] Swap style: "+e);var e=""===r.textContent?.trim(),n=n.xhr?.getResponseHeader("Content-Type")||"";return n.startsWith("text/html")||n.startsWith("text/xml")?(n=null!==PluginManager.getPlugin("data-extractor"),r=r&&0<AttributeMatcher.findMatchingElements("data",null,!1,r,!0).length,n&&r?(Debug.debug("[handleSwap] Detected data-extractor plugin and fp-data attribute. Processing through data extractor."),!0):n?(Debug.info("[handleSwap] Detected data-extractor plugin but no fp-data attribute. Skipping data extraction."),!1):r?(Debug.warn("[handleSwap] Detected fp-data attribute but no data-extractor plugin. Skipping data extraction."),!1):e?(Debug.debug(`[handleSwap] Detected empty string signal for target ${t.id||"[no id]"}. Preventing htmx default swap.`),!0):(Debug.debug(`[handleSwap] Fragment is not empty signal for target ${t.id||"[no id]"}. Letting htmx swap.`),!1)):(Debug.debug(`[handleSwap] Detected JSON response for target ${t.id||"[no id]"}. Preventing htmx swap.`),!0)},onEvent:function(e,t){var r=t.detail.elt;if(r){var n=t.detail.requestId||RequestHandler.generateRequestId();switch(t.detail.requestId||(t.detail.requestId=n),e){case"htmx:confirm":if(AttributeMatcher.v(r,"template")){const e=InstanceManager.getOrCreateInstance(r);t=PluginManager.applyTransformations(e,t,"confirm","json")}break;case"htmx:configRequest":const e=InstanceManager.getOrCreateInstance(r);(t=PluginManager.applyTransformations(e,t,"transformRequest","json")).detail.headers["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8";break;case"htmx:beforeRequest":if(t.detail.xhr.requestId||(t.detail.xhr.requestId=n),RequestHandler.handleRequest(r,n,"start"),AttributeMatcher.v(r,"template")){const e=InstanceManager.getOrCreateInstance(r);PluginManager.executeHook("beforeRequest",e||null,t)}break;case"htmx:beforeSwap":if(executeHtmxHook("beforeSwap",r,t),AttributeMatcher.v(r,"template")){const e=InstanceManager.getOrCreateInstance(r);e&&EventSystem.publish("beforeSwap",{instanceName:e.instanceName,...t.detail})}break;case"htmx:afterSwap":if(executeHtmxHook("afterSwap",r,t),AttributeMatcher.v(r,"template")){const e=InstanceManager.getOrCreateInstance(r);e&&EventSystem.publish("afterSwap",{instanceName:e.instanceName,...t.detail})}getAllRelevantForms(r).forEach(cleanupFormChangeListeners);break;case"htmx:afterRequest":if(AttributeMatcher.v(r,"template")){const e=InstanceManager.getOrCreateInstance(r);e&&(PluginManager.executeHook("afterRequest",e,t),EventSystem.publish("requestEnd",{instanceName:e.instanceName,...t.detail}))}RequestHandler.handleRequest(r,n,"cleanup"),restoreFormIfNecessary(r,!0,t);break;case"htmx:afterSettle":executeHtmxHook("afterSettle",r,t),Debug.debug(`Setting up form handlers after DOM settle for target: ${r.id||"unknown"}, has fp-template: ${AttributeMatcher.v(r,"template")}, parent form: `+(r.closest("form")?.id||"none")),setupFormSubmitHandlers(r)}}else Debug.warn(`[onEvent] Event ${e} has no triggering element (evt.detail.elt). Skipping.`)}})}function executeHtmxHook(e,t,r){(AttributeMatcher.v(t,"instance")||t.hasAttribute("id"))&&(t=InstanceManager.getOrCreateInstance(t))&&PluginManager.executeHook(e,t,r?.detail)}function restoreFormIfNecessary(e,t=!0,r){FormStateManager.isRestoringFormStates?Debug.debug("Already restoring form states, skipping"):t&&r?.detail?.failed||FormStateManager.restoreFormStates(e)}function preloadUrl(t){if(t){const r=document.createElement("link"),n=(r.rel="preload",r.href=t,r.as="fetch",r.crossOrigin="anonymous",()=>{r.parentNode&&r.remove()});r.onerror=e=>{Debug.error("Failed to preload URL: "+t,e),n()};var e=setTimeout(n,3e3);return document.head.appendChild(r),{cleanup:n,timeoutId:e}}Debug.error("No URL provided for preloading")}function addPreloadListener(n){const e=AttributeMatcher.m(n,"preload")||"mouseover";if("mouseover"===e){let e,t,r=!0;const o=()=>{r=!0,e=setTimeout(()=>{var e;r&&(e=n.getAttribute("href")||AttributeMatcher.m(n,"get"))&&(t=preloadUrl(e))},100)},a=()=>{r=!1,e&&clearTimeout(e),t&&(clearTimeout(t.timeoutId),t.cleanup())};n.addEventListener("mouseover",o),n.addEventListener("mouseout",a),n.Z=()=>{n.removeEventListener("mouseover",o),n.removeEventListener("mouseout",a),a()}}else{const t=()=>{var e=n.getAttribute("href")||AttributeMatcher.m(n,"get");e&&preloadUrl(e)};n.addEventListener(e,t),n.Z=()=>{n.removeEventListener(e,t)}}}function processPreload(t){try{return t.hasAttribute("data-fp-preload-processed")||AttributeMatcher.v(t,"preload")&&(addPreloadListener(t),t.setAttribute("data-fp-preload-processed","true")),t}catch(e){return Debug.error("Error in processPreload: "+e.message),t}}function translateCustomHTMXAttributes(r){try{Debug.debug("translateCustomHTMXAttributes",r);const n="fp-";return htmxAttributes.forEach(e=>{var t=n+e;if(r.hasAttribute(t)||r.hasAttribute("data-"+t)){const n=r.getAttribute(t);n&&r.setAttribute("hx-"+e,n),r.removeAttribute(t)}}),r}catch(e){return Debug.error("Error in translateCustomHTMXAttributes: "+e.message),r}}function processUrlAffixes(t){try{var e=["get","post","put","patch","delete"];return(AttributeMatcher.v(t,"prepend")||AttributeMatcher.v(t,"append"))&&e.some(e=>t.hasAttribute("hx-"+e))&&(a=t,e.forEach(function(e){var t,r,n,o="hx-"+e;a.hasAttribute(o)&&(t=a.getAttribute(o),Debug.info("Original URL: "+t),n=t,(r=AttributeMatcher.findAttribute(a,"prepend"))&&(n=r+n),(r=AttributeMatcher.findAttribute(a,"append"))&&(n+=r),n&&a.setAttribute(o,n),Debug.info("Modified URL: "+n),n!==t?Debug.info("Modification successful for",e,"on element",a):Debug.error("Modification failed for",e,"on element",a))})),t}catch(e){return Debug.error("Error in processUrlAffixes: "+e.message),t}var a}function setupAnimation(e){try{var t;return"true"===(AttributeMatcher.m(e,"animation")||_state.defaults.animation)&&(t=e.getAttribute("hx-swap"),e.setAttribute("hx-swap",t?t+" transition:true":"innerHTML transition:true")),e}catch(t){return Debug.error("Error in setupAnimation: "+t.message),e}}function addHtmxExtensionAttribute(e){try{var t=e.getAttribute("hx-ext")||"";return t.includes("flowplater")||(e.setAttribute("hx-ext",t?t+", flowplater":"flowplater"),Debug.info("Added hx-ext attribute to "+e.id)),e}catch(t){return Debug.info("Error in addHtmxExtensionAttribute: "+t.message),e}}function getDefaultExportFromCjs(e){return e&&e.te&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function requireUtils(){function escapeChar(e){return t[e]}function extend(e){for(var t=1;t<arguments.length;t++)for(var r in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],r)&&(e[r]=arguments[t][r]);return e}var t,r,n,o,e,a;return hasRequiredUtils||(hasRequiredUtils=1,utils.te=!0,utils.extend=extend,utils.indexOf=function(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1},utils.escapeExpression=function(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}return n.test(e)?e.replace(r,escapeChar):e},utils.isEmpty=function(e){return!e&&0!==e||!(!a(e)||0!==e.length)},utils.createFrame=function(e){var t=extend({},e);return t.re=e,t},utils.blockParams=function(e,t){return e.path=t,e},utils.appendContextPath=function(e,t){return(e?e+".":"")+t},t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},r=/[&<>"'`=]/g,n=/[&<>"'`=]/,o=Object.prototype.toString,utils.toString=o,(e=function(e){return"function"==typeof e})(/x/)&&(utils.isFunction=e=function(e){return"function"==typeof e&&"[object Function]"===o.call(e)}),utils.isFunction=e,a=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===o.call(e)},utils.isArray=a),utils}function requireException(){function Exception(e,t){var t=t&&t.loc,r=void 0,n=void 0,o=void 0,a=void 0;t&&(n=t.end.line,a=t.end.column,e+=" - "+(r=t.start.line)+":"+(o=t.start.column));for(var i=Error.prototype.constructor.call(this,e),s=0;s<l.length;s++)this[l[s]]=i[l[s]];Error.captureStackTrace&&Error.captureStackTrace(this,Exception);try{t&&(this.lineNumber=r,this.endLineNumber=n,Object.defineProperty?(Object.defineProperty(this,"column",{value:o,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:a,enumerable:!0})):(this.column=o,this.endColumn=a))}catch(e){}}return hasRequiredException||(hasRequiredException=1,(t=(e=exception).exports).te=!0,l=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"],Exception.prototype=new Error,t.default=Exception,e.exports=t.default),exception.exports;var e,t,l}function requireBlockHelperMissing(){return hasRequiredBlockHelperMissing||(hasRequiredBlockHelperMissing=1,(t=(e=blockHelperMissing).exports).te=!0,a=requireUtils(),t.default=function(o){o.registerHelper("blockHelperMissing",function(e,t){var r=t.inverse,n=t.fn;return!0===e?n(this):!1===e||null==e?r(this):a.isArray(e)?0<e.length?(t.ids&&(t.ids=[t.name]),o.helpers.each(e,t)):r(this):(t.data&&t.ids&&((r=a.createFrame(t.data)).contextPath=a.appendContextPath(t.data.contextPath,t.name),t={data:r}),n(e,t))})},e.exports=t.default),blockHelperMissing.exports;var e,t,a}function requireEach(){return hasRequiredEach||(hasRequiredEach=1,(t=(e=each).exports).te=!0,d=requireUtils(),f=(r=requireException())&&r.te?r:{default:r},t.default=function(e){e.registerHelper("each",function(n,e){function execIteration(e,t,r){s&&(s.key=e,s.index=t,s.first=0===t,s.last=!!r,l)&&(s.contextPath=l+e),i+=o(n[e],{data:s,blockParams:d.blockParams([n[e],e],[l+e,null])})}if(!e)throw new f.default("Must pass iterator to #each");var t,o=e.fn,r=e.inverse,a=0,i="",s=void 0,l=void 0;if(e.data&&e.ids&&(l=d.appendContextPath(e.data.contextPath,e.ids[0])+"."),d.isFunction(n)&&(n=n.call(this)),e.data&&(s=d.createFrame(e.data)),n&&"object"==typeof n)if(d.isArray(n))for(var u=n.length;a<u;a++)a in n&&execIteration(a,a,a===n.length-1);else if("function"==typeof Symbol&&n[Symbol.iterator]){for(var c=[],p=n[Symbol.iterator](),h=p.next();!h.done;h=p.next())c.push(h.value);for(u=(n=c).length;a<u;a++)execIteration(a,a,a===n.length-1)}else t=void 0,Object.keys(n).forEach(function(e){void 0!==t&&execIteration(t,a-1),t=e,a++}),void 0!==t&&execIteration(t,a-1,!0);return i=0===a?r(this):i})},e.exports=t.default),each.exports;var e,t,r,d,f}function requireHelperMissing(){return hasRequiredHelperMissing||(hasRequiredHelperMissing=1,(t=(e=helperMissing).exports).te=!0,n=(r=requireException())&&r.te?r:{default:r},t.default=function(e){e.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new n.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},e.exports=t.default),helperMissing.exports;var e,t,r,n}function require_if(){return hasRequired_if||(hasRequired_if=1,(t=(e=_if).exports).te=!0,n=requireUtils(),o=(r=requireException())&&r.te?r:{default:r},t.default=function(r){r.registerHelper("if",function(e,t){if(2!=arguments.length)throw new o.default("#if requires exactly one argument");return n.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||n.isEmpty(e)?t.inverse(this):t.fn(this)}),r.registerHelper("unless",function(e,t){if(2!=arguments.length)throw new o.default("#unless requires exactly one argument");return r.helpers.if.call(this,e,{fn:t.inverse,inverse:t.fn,hash:t.hash})})},e.exports=t.default),_if.exports;var e,t,r,n,o}function requireLog(){return hasRequiredLog||(hasRequiredLog=1,(t=(e=log).exports).te=!0,t.default=function(o){o.registerHelper("log",function(){for(var e=[void 0],t=arguments[arguments.length-1],r=0;r<arguments.length-1;r++)e.push(arguments[r]);var n=1;null!=t.hash.level?n=t.hash.level:t.data&&null!=t.data.level&&(n=t.data.level),e[0]=n,o.log.apply(o,e)})},e.exports=t.default),log.exports;var e,t}function requireLookup(){return hasRequiredLookup||(hasRequiredLookup=1,(t=(e=lookup).exports).te=!0,t.default=function(e){e.registerHelper("lookup",function(e,t,r){return e&&r.lookupProperty(e,t)})},e.exports=t.default),lookup.exports;var e,t}function require_with(){return hasRequired_with||(hasRequired_with=1,(t=(e=_with).exports).te=!0,o=requireUtils(),a=(r=requireException())&&r.te?r:{default:r},t.default=function(e){e.registerHelper("with",function(e,t){if(2!=arguments.length)throw new a.default("#with requires exactly one argument");o.isFunction(e)&&(e=e.call(this));var r,n=t.fn;return o.isEmpty(e)?t.inverse(this):((r=t.data)&&t.ids&&((r=o.createFrame(t.data)).contextPath=o.appendContextPath(t.data.contextPath,t.ids[0])),n(e,{data:r,blockParams:o.blockParams([e],[r&&r.contextPath])}))})},e.exports=t.default),_with.exports;var e,t,r,o,a}function requireHelpers$1(){function _interopRequireDefault(e){return e&&e.te?e:{default:e}}var t,r,n,o,a,i,s;return hasRequiredHelpers$1||(hasRequiredHelpers$1=1,helpers$1.te=!0,helpers$1.registerDefaultHelpers=function(e){t.default(e),r.default(e),n.default(e),o.default(e),a.default(e),i.default(e),s.default(e)},helpers$1.moveHelperToHooks=function(e,t,r){e.helpers[t]&&(e.hooks[t]=e.helpers[t],r||delete e.helpers[t])},t=_interopRequireDefault(requireBlockHelperMissing()),r=_interopRequireDefault(requireEach()),n=_interopRequireDefault(requireHelperMissing()),o=_interopRequireDefault(require_if()),a=_interopRequireDefault(requireLog()),i=_interopRequireDefault(requireLookup()),s=_interopRequireDefault(require_with())),helpers$1}function requireInline(){return hasRequiredInline||(hasRequiredInline=1,(t=(e=inline).exports).te=!0,i=requireUtils(),t.default=function(e){e.registerDecorator("inline",function(n,o,a,e){var t=n;return o.partials||(o.partials={},t=function(e,t){var r=a.partials,e=(a.partials=i.extend({},r,o.partials),n(e,t));return a.partials=r,e}),o.partials[e.args[0]]=e.fn,t})},e.exports=t.default),inline.exports;var e,t,i}function requireDecorators(){var t,e;return hasRequiredDecorators||(hasRequiredDecorators=1,decorators.te=!0,decorators.registerDefaultDecorators=function(e){t.default(e)},t=(e=requireInline())&&e.te?e:{default:e}),decorators}function requireLogger(){return hasRequiredLogger||(hasRequiredLogger=1,(t=(e=logger).exports).te=!0,r=requireUtils(),o={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){var t;return"string"==typeof e?0<=(t=r.indexOf(o.methodMap,e.toLowerCase()))?t:parseInt(e,10):e},log:function(e){if(e=o.lookupLevel(e),"undefined"!=typeof console&&o.lookupLevel(o.level)<=e){e=o.methodMap[e];console[e]||(e="log");for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];console[e].apply(console,r)}}},t.default=o,e.exports=t.default),logger.exports;var e,t,r,o}function requireCreateNewLookupObject(){var n;return hasRequiredCreateNewLookupObject||(hasRequiredCreateNewLookupObject=1,createNewLookupObject.te=!0,createNewLookupObject.createNewLookupObject=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.extend.apply(void 0,[Object.create(null)].concat(t))},n=requireUtils()),createNewLookupObject}function requireProtoAccess(){var n,o,a,e;return hasRequiredProtoAccess||(hasRequiredProtoAccess=1,protoAccess.te=!0,protoAccess.createProtoAccessControl=function(e){var t=Object.create(null),r=(t.constructor=!1,t.__defineGetter__=!1,t.__defineSetter__=!1,t.__lookupGetter__=!1,Object.create(null));return r.__proto__=!1,{properties:{whitelist:n.createNewLookupObject(r,e.allowedProtoProperties),defaultValue:e.allowProtoPropertiesByDefault},methods:{whitelist:n.createNewLookupObject(t,e.allowedProtoMethods),defaultValue:e.allowProtoMethodsByDefault}}},protoAccess.resultIsAllowed=function(e,t,r){return void 0!==(e="function"==typeof e?t.methods:t.properties).whitelist[r]?!0===e.whitelist[r]:void 0!==e.defaultValue?e.defaultValue:(!0!==a[t=r]&&(a[t]=!0,o.default.log("error",'Handlebars: Access has been denied to resolve the property "'+t+'" because it is not an "own property" of its parent.\nYou can add a runtime option to disable the check or this warning:\nSee https://handlebarsjs.com/api-reference/runtime-options.html#options-to-control-prototype-access for details')),!1)},protoAccess.resetLoggedProperties=function(){Object.keys(a).forEach(function(e){delete a[e]})},n=requireCreateNewLookupObject(),o=(e=requireLogger())&&e.te?e:{default:e},a=Object.create(null)),protoAccess}function requireBase$1(){function _interopRequireDefault(e){return e&&e.te?e:{default:e}}function HandlebarsEnvironment(e,t,r){this.helpers=e||{},this.partials=t||{},this.decorators=r||{},o.registerDefaultHelpers(this),a.registerDefaultDecorators(this)}var r,n,o,a,e,t,i;return hasRequiredBase$1||(hasRequiredBase$1=1,base$1.te=!0,base$1.HandlebarsEnvironment=HandlebarsEnvironment,r=requireUtils(),n=_interopRequireDefault(requireException()),o=requireHelpers$1(),a=requireDecorators(),e=_interopRequireDefault(requireLogger()),t=requireProtoAccess(),base$1.VERSION="4.7.8",base$1.COMPILER_REVISION=8,base$1.LAST_COMPATIBLE_COMPILER_REVISION=7,base$1.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0 <4.3.0",8:">= 4.3.0"},i="[object Object]",HandlebarsEnvironment.prototype={constructor:HandlebarsEnvironment,logger:e.default,log:e.default.log,registerHelper:function(e,t){if(r.toString.call(e)===i){if(t)throw new n.default("Arg not supported with multiple helpers");r.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(r.toString.call(e)===i)r.extend(this.partials,e);else{if(void 0===t)throw new n.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if(r.toString.call(e)===i){if(t)throw new n.default("Arg not supported with multiple decorators");r.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]},resetLoggedPropertyAccesses:function(){t.resetLoggedProperties()}},base$1.log=e.default.log,base$1.createFrame=r.createFrame,base$1.logger=e.default),base$1}function requireSafeString(){function SafeString(e){this.string=e}return hasRequiredSafeString||(hasRequiredSafeString=1,(t=(e=safeString).exports).te=!0,SafeString.prototype.toString=SafeString.prototype.toHTML=function(){return""+this.string},t.default=SafeString,e.exports=t.default),safeString.exports;var e,t}function requireWrapHelper(){return hasRequiredWrapHelper||(hasRequiredWrapHelper=1,wrapHelper.te=!0,wrapHelper.wrapHelper=function(e,t){return"function"!=typeof e?e:function(){return arguments[arguments.length-1]=t(arguments[arguments.length-1]),e.apply(this,arguments)}}),wrapHelper}function requireRuntime(){function wrapProgram(n,e,o,a,t,i,s){function prog(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=s;return!s||e==s[0]||e===n.nullContext&&null===s[0]||(r=[e].concat(s)),o(n,e,n.helpers,n.partials,t.data||a,i&&[t.blockParams].concat(i),r)}return(prog=executeDecorators(o,prog,n,s,a,i)).program=e,prog.depth=s?s.length:0,prog.blockParams=t||0,prog}function noop(){return""}function executeDecorators(e,t,r,n,o,a){return e.decorator&&(t=e.decorator(t,e={},r,n&&n[0],o,a,n),c.extend(t,e)),t}var c,p,h,a,i,d,e;return hasRequiredRuntime||(hasRequiredRuntime=1,runtime.te=!0,runtime.checkRevision=function(e){var t=e&&e[0]||1;if(!(h.LAST_COMPATIBLE_COMPILER_REVISION<=t&&t<=h.COMPILER_REVISION)){if(t<h.LAST_COMPATIBLE_COMPILER_REVISION)throw new p.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+h.REVISION_CHANGES[h.COMPILER_REVISION]+") or downgrade your runtime to an older version ("+h.REVISION_CHANGES[t]+").");throw new p.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}},runtime.template=function(l,u){function ret(e){function main(e){return""+l.main(s,e,s.helpers,s.partials,o,i,a)}var t,r,n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=n.data,a=(ret.ne(n),void(!n.partial&&l.useData&&(t=e,(r=o)&&"root"in r||((r=r?h.createFrame(r):{}).root=t),o=r))),i=l.useBlockParams?[]:void 0;return l.useDepths&&(a=n.depths?e!=n.depths[0]?[e].concat(n.depths):n.depths:[e]),(main=executeDecorators(l.main,main,s,n.depths||[],o,i))(e,n)}if(!u)throw new p.default("No environment passed to template");if(!l||!l.main)throw new p.default("Unknown template object: "+typeof l);l.main.decorator=l.main_d,u.VM.checkRevision(l.compiler);var o=l.compiler&&7===l.compiler[0],s={strict:function(e,t,r){if(e&&t in e)return s.lookupProperty(e,t);throw new p.default('"'+t+'" not defined in '+e,{loc:r})},lookupProperty:function(e,t){var r=e[t];return null==r||Object.prototype.hasOwnProperty.call(e,t)||d.resultIsAllowed(r,s.protoAccessControl,t)?r:void 0},lookup:function(e,t){for(var r=e.length,n=0;n<r;n++)if(null!=(e[n]&&s.lookupProperty(e[n],t)))return e[n][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:c.escapeExpression,invokePartial:function(e,t,r){r.hash&&(t=c.extend({},t,r.hash),r.ids)&&(r.ids[0]=!0),e=u.VM.resolvePartial.call(this,e,t,r);var n=c.extend({},r,{hooks:this.hooks,protoAccessControl:this.protoAccessControl}),o=u.VM.invokePartial.call(this,e,t,n);if(null==o&&u.compile&&(r.partials[r.name]=u.compile(e,l.compilerOptions,u),o=r.partials[r.name](t,n)),null==o)throw new p.default("The partial "+r.name+" could not be compiled when running in runtime-only mode");if(r.indent){for(var a=o.split("\n"),i=0,s=a.length;i<s&&(a[i]||i+1!==s);i++)a[i]=r.indent+a[i];o=a.join("\n")}return o},fn:function(e){var t=l[e];return t.decorator=l[e+"_d"],t},programs:[],program:function(e,t,r,n,o){var a=this.programs[e],i=this.fn(e);return t||o||n||r?wrapProgram(this,e,i,t,r,n,o):a||(this.programs[e]=wrapProgram(this,e,i))},data:function(e,t){for(;e&&t--;)e=e.re;return e},mergeIfNeeded:function(e,t){var r=e||t;return e&&t&&e!==t?c.extend({},t,e):r},nullContext:Object.seal({}),noop:u.VM.noop,compilerInfo:l.compiler};return ret.isTop=!0,ret.ne=function(e){var t,r,n;e.partial?(s.protoAccessControl=e.protoAccessControl,s.helpers=e.helpers,s.partials=e.partials,s.decorators=e.decorators,s.hooks=e.hooks):(t=c.extend({},u.helpers,e.helpers),r=t,n=s,Object.keys(r).forEach(function(e){var t;r[e]=(t=n.lookupProperty,i.wrapHelper(r[e],function(e){return c.extend({lookupProperty:t},e)}))}),s.helpers=t,l.usePartial&&(s.partials=s.mergeIfNeeded(e.partials,u.partials)),(l.usePartial||l.useDecorators)&&(s.decorators=c.extend({},u.decorators,e.decorators)),s.hooks={},s.protoAccessControl=d.createProtoAccessControl(e),a.moveHelperToHooks(s,"helperMissing",t=e.allowCallsToHelperMissing||o),a.moveHelperToHooks(s,"blockHelperMissing",t))},ret.ie=function(e,t,r,n){if(l.useBlockParams&&!r)throw new p.default("must pass block params");if(l.useDepths&&!n)throw new p.default("must pass parent depths");return wrapProgram(s,e,l[e],t,0,r,n)},ret},runtime.wrapProgram=wrapProgram,runtime.resolvePartial=function(e,t,r){return e?e.call||r.name||(r.name=e,e=r.partials[e]):e="@partial-block"===r.name?r.data["partial-block"]:r.partials[r.name],e},runtime.invokePartial=function(e,t,r){var n,o=r.data&&r.data["partial-block"],a=(r.partial=!0,void(r.ids&&(r.data.contextPath=r.ids[0]||r.data.contextPath)));if(r.fn&&r.fn!==noop&&(r.data=h.createFrame(r.data),n=r.fn,a=r.data["partial-block"]=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return t.data=h.createFrame(t.data),t.data["partial-block"]=o,n(e,t)},n.partials)&&(r.partials=c.extend({},r.partials,n.partials)),void 0===(e=void 0===e&&a?a:e))throw new p.default("The partial "+r.name+" could not be found");if(e instanceof Function)return e(t,r)},runtime.noop=noop,c=function(e){if(e&&e.te)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(requireUtils()),p=(e=requireException())&&e.te?e:{default:e},h=requireBase$1(),a=requireHelpers$1(),i=requireWrapHelper(),d=requireProtoAccess()),runtime}function requireNoConflict(){return hasRequiredNoConflict||(hasRequiredNoConflict=1,(t=(e=noConflict).exports).te=!0,t.default=function(e){"object"!=typeof globalThis&&(Object.prototype.__defineGetter__("__magic__",function(){return this}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__);var t=globalThis.Handlebars;e.noConflict=function(){return globalThis.Handlebars===e&&(globalThis.Handlebars=t),e}},e.exports=t.default),noConflict.exports;var e,t}function requireHandlebars_runtime(){function _interopRequireDefault(e){return e&&e.te?e:{default:e}}function _interopRequireWildcard(e){if(e&&e.te)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function create(){var t=new r.HandlebarsEnvironment;return a.extend(t,r),t.SafeString=n.default,t.Exception=o.default,t.Utils=a,t.escapeExpression=a.escapeExpression,t.VM=i,t.template=function(e){return i.template(e,t)},t}return hasRequiredHandlebars_runtime||(hasRequiredHandlebars_runtime=1,(t=(e=handlebars_runtime).exports).te=!0,r=_interopRequireWildcard(requireBase$1()),n=_interopRequireDefault(requireSafeString()),o=_interopRequireDefault(requireException()),a=_interopRequireWildcard(requireUtils()),i=_interopRequireWildcard(requireRuntime()),s=_interopRequireDefault(requireNoConflict()),(l=create()).create=create,s.default(l),t.default=l.default=l,e.exports=t.default),handlebars_runtime.exports;var e,t,r,n,o,a,i,s,l}function requireAst(){return hasRequiredAst||(hasRequiredAst=1,(t=(e=ast).exports).te=!0,r={helpers:{helperExpression:function(e){return"SubExpression"===e.type||("MustacheStatement"===e.type||"BlockStatement"===e.type)&&!!(e.params&&e.params.length||e.hash)},scopedId:function(e){return/^\.|this\b/.test(e.original)},simpleId:function(e){return 1===e.parts.length&&!r.helpers.scopedId(e)&&!e.depth}}},t.default=r,e.exports=t.default),ast.exports;var e,t,r}function requireParser(){function Parser(){this.yy={}}return hasRequiredParser||(hasRequiredParser=1,r=new((Parser.prototype={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,mustache_repetition0:49,mustache_option0:50,OPEN_UNESCAPED:51,mustache_repetition1:52,mustache_option1:53,CLOSE_UNESCAPED:54,OPEN_PARTIAL:55,partialName:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,param:63,sexpr:64,OPEN_SEXPR:65,sexpr_repetition0:66,sexpr_option0:67,CLOSE_SEXPR:68,hash:69,hash_repetition_plus0:70,hashSegment:71,ID:72,EQUALS:73,blockParams:74,OPEN_BLOCK_PARAMS:75,blockParams_repetition_plus0:76,CLOSE_BLOCK_PARAMS:77,path:78,dataName:79,STRING:80,NUMBER:81,BOOLEAN:82,UNDEFINED:83,NULL:84,DATA:85,pathSegments:86,SEP:87,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",51:"OPEN_UNESCAPED",54:"CLOSE_UNESCAPED",55:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",65:"OPEN_SEXPR",68:"CLOSE_SEXPR",72:"ID",73:"EQUALS",75:"OPEN_BLOCK_PARAMS",77:"CLOSE_BLOCK_PARAMS",80:"STRING",81:"NUMBER",82:"BOOLEAN",83:"UNDEFINED",84:"NULL",85:"DATA",87:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[63,1],[63,1],[64,5],[69,1],[71,3],[74,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[56,1],[56,1],[79,2],[78,1],[86,3],[86,1],[6,0],[6,2],[17,0],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[49,0],[49,2],[50,0],[50,1],[52,0],[52,2],[53,0],[53,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[66,0],[66,2],[67,0],[67,1],[70,1],[70,2],[76,1],[76,2]],performAction:function(e,t,r,n,o,a,i){var s=a.length-1;switch(o){case 1:return a[s-1];case 2:this.$=n.prepareProgram(a[s]);break;case 3:case 4:case 5:case 6:case 7:case 8:case 20:case 27:case 28:case 33:case 34:case 40:case 41:this.$=a[s];break;case 9:this.$={type:"CommentStatement",value:n.stripComment(a[s]),strip:n.stripFlags(a[s],a[s]),loc:n.locInfo(this.oe)};break;case 10:this.$={type:"ContentStatement",original:a[s],value:a[s],loc:n.locInfo(this.oe)};break;case 11:this.$=n.prepareRawBlock(a[s-2],a[s-1],a[s],this.oe);break;case 12:this.$={path:a[s-3],params:a[s-2],hash:a[s-1]};break;case 13:this.$=n.prepareBlock(a[s-3],a[s-2],a[s-1],a[s],!1,this.oe);break;case 14:this.$=n.prepareBlock(a[s-3],a[s-2],a[s-1],a[s],!0,this.oe);break;case 15:this.$={open:a[s-5],path:a[s-4],params:a[s-3],hash:a[s-2],blockParams:a[s-1],strip:n.stripFlags(a[s-5],a[s])};break;case 16:case 17:this.$={path:a[s-4],params:a[s-3],hash:a[s-2],blockParams:a[s-1],strip:n.stripFlags(a[s-5],a[s])};break;case 18:this.$={strip:n.stripFlags(a[s-1],a[s-1]),program:a[s]};break;case 19:var l=n.prepareBlock(a[s-2],a[s-1],a[s],a[s],!1,this.oe),l=n.prepareProgram([l],a[s-1].loc);l.chained=!0,this.$={strip:a[s-2].strip,program:l,chain:!0};break;case 21:this.$={path:a[s-1],strip:n.stripFlags(a[s-2],a[s])};break;case 22:case 23:this.$=n.prepareMustache(a[s-3],a[s-2],a[s-1],a[s-4],n.stripFlags(a[s-4],a[s]),this.oe);break;case 24:this.$={type:"PartialStatement",name:a[s-3],params:a[s-2],hash:a[s-1],indent:"",strip:n.stripFlags(a[s-4],a[s]),loc:n.locInfo(this.oe)};break;case 25:this.$=n.preparePartialBlock(a[s-2],a[s-1],a[s],this.oe);break;case 26:this.$={path:a[s-3],params:a[s-2],hash:a[s-1],strip:n.stripFlags(a[s-4],a[s])};break;case 29:this.$={type:"SubExpression",path:a[s-3],params:a[s-2],hash:a[s-1],loc:n.locInfo(this.oe)};break;case 30:this.$={type:"Hash",pairs:a[s],loc:n.locInfo(this.oe)};break;case 31:this.$={type:"HashPair",key:n.id(a[s-2]),value:a[s],loc:n.locInfo(this.oe)};break;case 32:this.$=n.id(a[s-1]);break;case 35:this.$={type:"StringLiteral",value:a[s],original:a[s],loc:n.locInfo(this.oe)};break;case 36:this.$={type:"NumberLiteral",value:Number(a[s]),original:Number(a[s]),loc:n.locInfo(this.oe)};break;case 37:this.$={type:"BooleanLiteral",value:"true"===a[s],original:"true"===a[s],loc:n.locInfo(this.oe)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:n.locInfo(this.oe)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:n.locInfo(this.oe)};break;case 42:this.$=n.preparePath(!0,a[s],this.oe);break;case 43:this.$=n.preparePath(!1,a[s],this.oe);break;case 44:a[s-2].push({part:n.id(a[s]),original:a[s],separator:a[s-1]}),this.$=a[s-2];break;case 45:this.$=[{part:n.id(a[s]),original:a[s]}];break;case 46:case 48:case 50:case 58:case 64:case 70:case 78:case 82:case 86:case 90:case 94:this.$=[];break;case 47:case 49:case 51:case 59:case 65:case 71:case 79:case 83:case 87:case 91:case 95:case 99:case 101:a[s-1].push(a[s]);break;case 98:case 100:this.$=[a[s]]}},table:[{3:1,4:2,5:[2,46],6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:11,14:[1,12],15:[1,20],16:17,19:[1,23],24:15,27:16,29:[1,21],34:[1,22],39:[2,2],44:[2,2],47:[2,2],48:[1,13],51:[1,14],55:[1,18],59:19,60:[1,24]},{1:[2,1]},{5:[2,47],14:[2,47],15:[2,47],19:[2,47],29:[2,47],34:[2,47],39:[2,47],44:[2,47],47:[2,47],48:[2,47],51:[2,47],55:[2,47],60:[2,47]},{5:[2,3],14:[2,3],15:[2,3],19:[2,3],29:[2,3],34:[2,3],39:[2,3],44:[2,3],47:[2,3],48:[2,3],51:[2,3],55:[2,3],60:[2,3]},{5:[2,4],14:[2,4],15:[2,4],19:[2,4],29:[2,4],34:[2,4],39:[2,4],44:[2,4],47:[2,4],48:[2,4],51:[2,4],55:[2,4],60:[2,4]},{5:[2,5],14:[2,5],15:[2,5],19:[2,5],29:[2,5],34:[2,5],39:[2,5],44:[2,5],47:[2,5],48:[2,5],51:[2,5],55:[2,5],60:[2,5]},{5:[2,6],14:[2,6],15:[2,6],19:[2,6],29:[2,6],34:[2,6],39:[2,6],44:[2,6],47:[2,6],48:[2,6],51:[2,6],55:[2,6],60:[2,6]},{5:[2,7],14:[2,7],15:[2,7],19:[2,7],29:[2,7],34:[2,7],39:[2,7],44:[2,7],47:[2,7],48:[2,7],51:[2,7],55:[2,7],60:[2,7]},{5:[2,8],14:[2,8],15:[2,8],19:[2,8],29:[2,8],34:[2,8],39:[2,8],44:[2,8],47:[2,8],48:[2,8],51:[2,8],55:[2,8],60:[2,8]},{5:[2,9],14:[2,9],15:[2,9],19:[2,9],29:[2,9],34:[2,9],39:[2,9],44:[2,9],47:[2,9],48:[2,9],51:[2,9],55:[2,9],60:[2,9]},{20:25,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:36,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:37,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{4:38,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{15:[2,48],17:39,18:[2,48]},{20:41,56:40,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:44,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{5:[2,10],14:[2,10],15:[2,10],18:[2,10],19:[2,10],29:[2,10],34:[2,10],39:[2,10],44:[2,10],47:[2,10],48:[2,10],51:[2,10],55:[2,10],60:[2,10]},{20:45,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:46,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:47,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:41,56:48,64:42,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[2,78],49:49,65:[2,78],72:[2,78],80:[2,78],81:[2,78],82:[2,78],83:[2,78],84:[2,78],85:[2,78]},{23:[2,33],33:[2,33],54:[2,33],65:[2,33],68:[2,33],72:[2,33],75:[2,33],80:[2,33],81:[2,33],82:[2,33],83:[2,33],84:[2,33],85:[2,33]},{23:[2,34],33:[2,34],54:[2,34],65:[2,34],68:[2,34],72:[2,34],75:[2,34],80:[2,34],81:[2,34],82:[2,34],83:[2,34],84:[2,34],85:[2,34]},{23:[2,35],33:[2,35],54:[2,35],65:[2,35],68:[2,35],72:[2,35],75:[2,35],80:[2,35],81:[2,35],82:[2,35],83:[2,35],84:[2,35],85:[2,35]},{23:[2,36],33:[2,36],54:[2,36],65:[2,36],68:[2,36],72:[2,36],75:[2,36],80:[2,36],81:[2,36],82:[2,36],83:[2,36],84:[2,36],85:[2,36]},{23:[2,37],33:[2,37],54:[2,37],65:[2,37],68:[2,37],72:[2,37],75:[2,37],80:[2,37],81:[2,37],82:[2,37],83:[2,37],84:[2,37],85:[2,37]},{23:[2,38],33:[2,38],54:[2,38],65:[2,38],68:[2,38],72:[2,38],75:[2,38],80:[2,38],81:[2,38],82:[2,38],83:[2,38],84:[2,38],85:[2,38]},{23:[2,39],33:[2,39],54:[2,39],65:[2,39],68:[2,39],72:[2,39],75:[2,39],80:[2,39],81:[2,39],82:[2,39],83:[2,39],84:[2,39],85:[2,39]},{23:[2,43],33:[2,43],54:[2,43],65:[2,43],68:[2,43],72:[2,43],75:[2,43],80:[2,43],81:[2,43],82:[2,43],83:[2,43],84:[2,43],85:[2,43],87:[1,50]},{72:[1,35],86:51},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{52:52,54:[2,82],65:[2,82],72:[2,82],80:[2,82],81:[2,82],82:[2,82],83:[2,82],84:[2,82],85:[2,82]},{25:53,38:55,39:[1,57],43:56,44:[1,58],45:54,47:[2,54]},{28:59,43:60,44:[1,58],47:[2,56]},{13:62,15:[1,20],18:[1,61]},{33:[2,86],57:63,65:[2,86],72:[2,86],80:[2,86],81:[2,86],82:[2,86],83:[2,86],84:[2,86],85:[2,86]},{33:[2,40],65:[2,40],72:[2,40],80:[2,40],81:[2,40],82:[2,40],83:[2,40],84:[2,40],85:[2,40]},{33:[2,41],65:[2,41],72:[2,41],80:[2,41],81:[2,41],82:[2,41],83:[2,41],84:[2,41],85:[2,41]},{20:64,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:65,47:[1,66]},{30:67,33:[2,58],65:[2,58],72:[2,58],75:[2,58],80:[2,58],81:[2,58],82:[2,58],83:[2,58],84:[2,58],85:[2,58]},{33:[2,64],35:68,65:[2,64],72:[2,64],75:[2,64],80:[2,64],81:[2,64],82:[2,64],83:[2,64],84:[2,64],85:[2,64]},{21:69,23:[2,50],65:[2,50],72:[2,50],80:[2,50],81:[2,50],82:[2,50],83:[2,50],84:[2,50],85:[2,50]},{33:[2,90],61:70,65:[2,90],72:[2,90],80:[2,90],81:[2,90],82:[2,90],83:[2,90],84:[2,90],85:[2,90]},{20:74,33:[2,80],50:71,63:72,64:75,65:[1,43],69:73,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{72:[1,79]},{23:[2,42],33:[2,42],54:[2,42],65:[2,42],68:[2,42],72:[2,42],75:[2,42],80:[2,42],81:[2,42],82:[2,42],83:[2,42],84:[2,42],85:[2,42],87:[1,50]},{20:74,53:80,54:[2,84],63:81,64:75,65:[1,43],69:82,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{26:83,47:[1,66]},{47:[2,55]},{4:84,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],39:[2,46],44:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{47:[2,20]},{20:85,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{4:86,6:3,14:[2,46],15:[2,46],19:[2,46],29:[2,46],34:[2,46],47:[2,46],48:[2,46],51:[2,46],55:[2,46],60:[2,46]},{26:87,47:[1,66]},{47:[2,57]},{5:[2,11],14:[2,11],15:[2,11],19:[2,11],29:[2,11],34:[2,11],39:[2,11],44:[2,11],47:[2,11],48:[2,11],51:[2,11],55:[2,11],60:[2,11]},{15:[2,49],18:[2,49]},{20:74,33:[2,88],58:88,63:89,64:75,65:[1,43],69:90,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{65:[2,94],66:91,68:[2,94],72:[2,94],80:[2,94],81:[2,94],82:[2,94],83:[2,94],84:[2,94],85:[2,94]},{5:[2,25],14:[2,25],15:[2,25],19:[2,25],29:[2,25],34:[2,25],39:[2,25],44:[2,25],47:[2,25],48:[2,25],51:[2,25],55:[2,25],60:[2,25]},{20:92,72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,31:93,33:[2,60],63:94,64:75,65:[1,43],69:95,70:76,71:77,72:[1,78],75:[2,60],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,66],36:96,63:97,64:75,65:[1,43],69:98,70:76,71:77,72:[1,78],75:[2,66],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,22:99,23:[2,52],63:100,64:75,65:[1,43],69:101,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{20:74,33:[2,92],62:102,63:103,64:75,65:[1,43],69:104,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,105]},{33:[2,79],65:[2,79],72:[2,79],80:[2,79],81:[2,79],82:[2,79],83:[2,79],84:[2,79],85:[2,79]},{33:[2,81]},{23:[2,27],33:[2,27],54:[2,27],65:[2,27],68:[2,27],72:[2,27],75:[2,27],80:[2,27],81:[2,27],82:[2,27],83:[2,27],84:[2,27],85:[2,27]},{23:[2,28],33:[2,28],54:[2,28],65:[2,28],68:[2,28],72:[2,28],75:[2,28],80:[2,28],81:[2,28],82:[2,28],83:[2,28],84:[2,28],85:[2,28]},{23:[2,30],33:[2,30],54:[2,30],68:[2,30],71:106,72:[1,107],75:[2,30]},{23:[2,98],33:[2,98],54:[2,98],68:[2,98],72:[2,98],75:[2,98]},{23:[2,45],33:[2,45],54:[2,45],65:[2,45],68:[2,45],72:[2,45],73:[1,108],75:[2,45],80:[2,45],81:[2,45],82:[2,45],83:[2,45],84:[2,45],85:[2,45],87:[2,45]},{23:[2,44],33:[2,44],54:[2,44],65:[2,44],68:[2,44],72:[2,44],75:[2,44],80:[2,44],81:[2,44],82:[2,44],83:[2,44],84:[2,44],85:[2,44],87:[2,44]},{54:[1,109]},{54:[2,83],65:[2,83],72:[2,83],80:[2,83],81:[2,83],82:[2,83],83:[2,83],84:[2,83],85:[2,83]},{54:[2,85]},{5:[2,13],14:[2,13],15:[2,13],19:[2,13],29:[2,13],34:[2,13],39:[2,13],44:[2,13],47:[2,13],48:[2,13],51:[2,13],55:[2,13],60:[2,13]},{38:55,39:[1,57],43:56,44:[1,58],45:111,46:110,47:[2,76]},{33:[2,70],40:112,65:[2,70],72:[2,70],75:[2,70],80:[2,70],81:[2,70],82:[2,70],83:[2,70],84:[2,70],85:[2,70]},{47:[2,18]},{5:[2,14],14:[2,14],15:[2,14],19:[2,14],29:[2,14],34:[2,14],39:[2,14],44:[2,14],47:[2,14],48:[2,14],51:[2,14],55:[2,14],60:[2,14]},{33:[1,113]},{33:[2,87],65:[2,87],72:[2,87],80:[2,87],81:[2,87],82:[2,87],83:[2,87],84:[2,87],85:[2,87]},{33:[2,89]},{20:74,63:115,64:75,65:[1,43],67:114,68:[2,96],69:116,70:76,71:77,72:[1,78],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{33:[1,117]},{32:118,33:[2,62],74:119,75:[1,120]},{33:[2,59],65:[2,59],72:[2,59],75:[2,59],80:[2,59],81:[2,59],82:[2,59],83:[2,59],84:[2,59],85:[2,59]},{33:[2,61],75:[2,61]},{33:[2,68],37:121,74:122,75:[1,120]},{33:[2,65],65:[2,65],72:[2,65],75:[2,65],80:[2,65],81:[2,65],82:[2,65],83:[2,65],84:[2,65],85:[2,65]},{33:[2,67],75:[2,67]},{23:[1,123]},{23:[2,51],65:[2,51],72:[2,51],80:[2,51],81:[2,51],82:[2,51],83:[2,51],84:[2,51],85:[2,51]},{23:[2,53]},{33:[1,124]},{33:[2,91],65:[2,91],72:[2,91],80:[2,91],81:[2,91],82:[2,91],83:[2,91],84:[2,91],85:[2,91]},{33:[2,93]},{5:[2,22],14:[2,22],15:[2,22],19:[2,22],29:[2,22],34:[2,22],39:[2,22],44:[2,22],47:[2,22],48:[2,22],51:[2,22],55:[2,22],60:[2,22]},{23:[2,99],33:[2,99],54:[2,99],68:[2,99],72:[2,99],75:[2,99]},{73:[1,108]},{20:74,63:125,64:75,65:[1,43],72:[1,35],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,23],14:[2,23],15:[2,23],19:[2,23],29:[2,23],34:[2,23],39:[2,23],44:[2,23],47:[2,23],48:[2,23],51:[2,23],55:[2,23],60:[2,23]},{47:[2,19]},{47:[2,77]},{20:74,33:[2,72],41:126,63:127,64:75,65:[1,43],69:128,70:76,71:77,72:[1,78],75:[2,72],78:26,79:27,80:[1,28],81:[1,29],82:[1,30],83:[1,31],84:[1,32],85:[1,34],86:33},{5:[2,24],14:[2,24],15:[2,24],19:[2,24],29:[2,24],34:[2,24],39:[2,24],44:[2,24],47:[2,24],48:[2,24],51:[2,24],55:[2,24],60:[2,24]},{68:[1,129]},{65:[2,95],68:[2,95],72:[2,95],80:[2,95],81:[2,95],82:[2,95],83:[2,95],84:[2,95],85:[2,95]},{68:[2,97]},{5:[2,21],14:[2,21],15:[2,21],19:[2,21],29:[2,21],34:[2,21],39:[2,21],44:[2,21],47:[2,21],48:[2,21],51:[2,21],55:[2,21],60:[2,21]},{33:[1,130]},{33:[2,63]},{72:[1,132],76:131},{33:[1,133]},{33:[2,69]},{15:[2,12],18:[2,12]},{14:[2,26],15:[2,26],19:[2,26],29:[2,26],34:[2,26],47:[2,26],48:[2,26],51:[2,26],55:[2,26],60:[2,26]},{23:[2,31],33:[2,31],54:[2,31],68:[2,31],72:[2,31],75:[2,31]},{33:[2,74],42:134,74:135,75:[1,120]},{33:[2,71],65:[2,71],72:[2,71],75:[2,71],80:[2,71],81:[2,71],82:[2,71],83:[2,71],84:[2,71],85:[2,71]},{33:[2,73],75:[2,73]},{23:[2,29],33:[2,29],54:[2,29],65:[2,29],68:[2,29],72:[2,29],75:[2,29],80:[2,29],81:[2,29],82:[2,29],83:[2,29],84:[2,29],85:[2,29]},{14:[2,15],15:[2,15],19:[2,15],29:[2,15],34:[2,15],39:[2,15],44:[2,15],47:[2,15],48:[2,15],51:[2,15],55:[2,15],60:[2,15]},{72:[1,137],77:[1,136]},{72:[2,100],77:[2,100]},{14:[2,16],15:[2,16],19:[2,16],29:[2,16],34:[2,16],44:[2,16],47:[2,16],48:[2,16],51:[2,16],55:[2,16],60:[2,16]},{33:[1,138]},{33:[2,75]},{33:[2,32]},{72:[2,101],77:[2,101]},{14:[2,17],15:[2,17],19:[2,17],29:[2,17],34:[2,17],39:[2,17],44:[2,17],47:[2,17],48:[2,17],51:[2,17],55:[2,17],60:[2,17]}],defaultActions:{4:[2,1],54:[2,55],56:[2,20],60:[2,57],73:[2,81],82:[2,85],86:[2,18],90:[2,89],101:[2,53],104:[2,93],110:[2,19],111:[2,77],116:[2,97],119:[2,63],122:[2,69],135:[2,75],136:[2,32]},parseError:function(e,t){throw new Error(e)},parse:function(e){var t=[0],r=[null],n=[],o=this.table,a="",i=0,s=0,l=(this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,void 0===(this.yy.parser=this).lexer.yylloc&&(this.lexer.yylloc={}),this.lexer.yylloc),u=(n.push(l),this.lexer.options&&this.lexer.options.ranges);"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var c,p,h,d,f,g,m={};;){if(void 0===(h=this.defaultActions[p=t[t.length-1]]?this.defaultActions[p]:(null==c&&(c="number"!=typeof(b=this.lexer.lex()||1)&&this.symbols_[b]||b),o[p]&&o[p][c]))||!h.length||!h[0]){var b,y=[];for(f in o[p])this.terminals_[f]&&2<f&&y.push("'"+this.terminals_[f]+"'");b=this.lexer.showPosition?"Parse error on line "+(i+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+y.join(", ")+", got '"+(this.terminals_[c]||c)+"'":"Parse error on line "+(i+1)+": Unexpected "+(1==c?"end of input":"'"+(this.terminals_[c]||c)+"'"),this.parseError(b,{text:this.lexer.match,token:this.terminals_[c]||c,line:this.lexer.yylineno,loc:l,expected:y})}if(h[0]instanceof Array&&1<h.length)throw new Error("Parse Error: multiple actions possible at state: "+p+", token: "+c);switch(h[0]){case 1:t.push(c),r.push(this.lexer.yytext),n.push(this.lexer.yylloc),t.push(h[1]),c=null,s=this.lexer.yyleng,a=this.lexer.yytext,i=this.lexer.yylineno,l=this.lexer.yylloc;break;case 2:if(m.$=r[r.length-(g=this.productions_[h[1]][1])],m.oe={first_line:n[n.length-(g||1)].first_line,last_line:n[n.length-1].last_line,first_column:n[n.length-(g||1)].first_column,last_column:n[n.length-1].last_column},u&&(m.oe.range=[n[n.length-(g||1)].range[0],n[n.length-1].range[1]]),void 0!==(d=this.performAction.call(m,a,s,i,this.yy,h[1],r,n)))return d;g&&(t=t.slice(0,-1*g*2),r=r.slice(0,-1*g),n=n.slice(0,-1*g)),t.push(this.productions_[h[1]][0]),r.push(m.$),n.push(m.oe),t.push(o[t[t.length-2]][t[t.length-1]]);break;case 3:return!0}}return!0},lexer:{EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this.ae=e,this.se=this.ue=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this.ae[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this.ae=this.ae.slice(1),e},unput:function(e){var t=e.length,r=e.split(/(?:\r\n?|\n)/g),e=(this.ae=e+this.ae,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t,this.match.split(/(?:\r\n?|\n)/g)),n=(this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1),this.yylloc.range);return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===e.length?this.yylloc.first_column:0)+e[e.length-r.length].length-r[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[n[0],n[0]+this.yyleng-t]),this},more:function(){return this.se=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(20<e.length?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this.ae.substr(0,20-e.length)),(e.substr(0,20)+(20<e.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;var e,t,r,n;this.ae||(this.done=!0),this.se||(this.yytext="",this.match="");for(var o=this.le(),a=0;a<o.length&&(!(t=this.ae.match(this.rules[o[a]]))||e&&!(e[0].length<t[0].length)||(e=t,r=a,this.options.flex));a++);return e?((n=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this.se=!1,this.ae=this.ae.slice(e[0].length),this.matched+=e[0],n=this.performAction.call(this,this.yy,this,o[r],this.conditionStack[this.conditionStack.length-1]),this.done&&this.ae&&(this.done=!1),n||void 0):""===this.ae?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return void 0!==e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},le:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)},options:{},performAction:function(e,r,t,n){function strip(e,t){return r.yytext=r.yytext.substring(e,r.yyleng-t+e)}switch(t){case 0:if("\\\\"===r.yytext.slice(-2)?(strip(0,1),this.begin("mu")):"\\"===r.yytext.slice(-1)?(strip(0,1),this.begin("emu")):this.begin("mu"),r.yytext)return 15;break;case 1:case 5:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),"raw"===this.conditionStack[this.conditionStack.length-1]?15:(strip(5,9),"END_RAW_BLOCK");case 6:case 22:return this.popState(),14;case 7:return 65;case 8:return 68;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 55;case 12:return 60;case 13:return 29;case 14:return 47;case 15:case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 51;case 20:case 23:return 48;case 21:this.unput(r.yytext),this.popState(),this.begin("com");break;case 24:return 73;case 25:case 26:case 41:return 72;case 27:return 87;case 28:break;case 29:return this.popState(),54;case 30:return this.popState(),33;case 31:return r.yytext=strip(1,2).replace(/\\"/g,'"'),80;case 32:return r.yytext=strip(1,2).replace(/\\'/g,"'"),80;case 33:return 85;case 34:case 35:return 82;case 36:return 83;case 37:return 84;case 38:return 81;case 39:return 75;case 40:return 77;case 42:return r.yytext=r.yytext.replace(/\\([\\\]])/g,"$1"),72;case 43:return"INVALID";case 44:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]+?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!((t=(e=parser).exports).te=!0)},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}}}}).Parser=Parser),t.default=r,e.exports=t.default),parser.exports;var e,t,r}function requireVisitor(){function Visitor(){this.parents=[]}function visitSubExpression(e){this.acceptRequired(e,"path"),this.acceptArray(e.params),this.acceptKey(e,"hash")}function visitBlock(e){visitSubExpression.call(this,e),this.acceptKey(e,"program"),this.acceptKey(e,"inverse")}function visitPartial(e){this.acceptRequired(e,"name"),this.acceptArray(e.params),this.acceptKey(e,"hash")}return hasRequiredVisitor||(hasRequiredVisitor=1,(t=(e=visitor).exports).te=!0,n=(r=requireException())&&r.te?r:{default:r},Visitor.prototype={constructor:Visitor,mutating:!1,acceptKey:function(e,t){var r=this.accept(e[t]);if(this.mutating){if(r&&!Visitor.prototype[r.type])throw new n.default('Unexpected node type "'+r.type+'" found when accepting '+t+" on "+e.type);e[t]=r}},acceptRequired:function(e,t){if(this.acceptKey(e,t),!e[t])throw new n.default(e.type+" requires "+t)},acceptArray:function(e){for(var t=0,r=e.length;t<r;t++)this.acceptKey(e,t),e[t]||(e.splice(t,1),t--,r--)},accept:function(e){if(e){if(!this[e.type])throw new n.default("Unknown type: "+e.type,e);this.current&&this.parents.unshift(this.current),this.current=e;var t=this[e.type](e);return this.current=this.parents.shift(),!this.mutating||t?t:!1!==t?e:void 0}},Program:function(e){this.acceptArray(e.body)},MustacheStatement:visitSubExpression,Decorator:visitSubExpression,BlockStatement:visitBlock,DecoratorBlock:visitBlock,PartialStatement:visitPartial,PartialBlockStatement:function(e){visitPartial.call(this,e),this.acceptKey(e,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:visitSubExpression,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(e){this.acceptArray(e.pairs)},HashPair:function(e){this.acceptRequired(e,"value")}},t.default=Visitor,e.exports=t.default),visitor.exports;var e,t,r,n}function requireWhitespaceControl(){function WhitespaceControl(){this.options=arguments.length<=0||void 0===arguments[0]?{}:arguments[0]}function isPrevWhitespace(e,t,r){var n=e[(t=void 0===t?e.length:t)-1];return n?"ContentStatement"===n.type?(e[t-2]||!r?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(n.original):void 0:r}function isNextWhitespace(e,t,r){var n=e[(t=void 0===t?-1:t)+1];return n?"ContentStatement"===n.type?(e[t+2]||!r?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(n.original):void 0:r}function omitRight(e,t,r){e=e[null==t?0:t+1];!e||"ContentStatement"!==e.type||!r&&e.rightStripped||(e.value=(t=e.value).replace(r?/^\s+/:/^[ \t]*\r?\n?/,""),e.rightStripped=e.value!==t)}function omitLeft(e,t,r){e=e[null==t?e.length-1:t-1];return e&&"ContentStatement"===e.type&&(r||!e.leftStripped)&&(e.value=(t=e.value).replace(r?/\s+$/:/[ \t]+$/,""),e.leftStripped=e.value!==t,e.leftStripped)}return hasRequiredWhitespaceControl||(hasRequiredWhitespaceControl=1,(t=(e=whitespaceControl).exports).te=!0,r=(r=requireVisitor())&&r.te?r:{default:r},(WhitespaceControl.prototype=new r.default).Program=function(e){var t=!this.options.ignoreStandalone,r=!this.isRootSeen;this.isRootSeen=!0;for(var n=e.body,o=0,a=n.length;o<a;o++){var i,s,l,u,c=n[o],p=this.accept(c);p&&(u=isPrevWhitespace(n,o,r),i=isNextWhitespace(n,o,r),s=p.openStandalone&&u,l=p.closeStandalone&&i,u=p.inlineStandalone&&u&&i,p.close&&omitRight(n,o,!0),p.open&&omitLeft(n,o,!0),t&&u&&(omitRight(n,o),omitLeft(n,o))&&"PartialStatement"===c.type&&(c.indent=/([ \t]+$)/.exec(n[o-1].original)[1]),t&&s&&(omitRight((c.program||c.inverse).body),omitLeft(n,o)),t)&&l&&(omitRight(n,o),omitLeft((c.inverse||c.program).body))}return e},WhitespaceControl.prototype.BlockStatement=WhitespaceControl.prototype.DecoratorBlock=WhitespaceControl.prototype.PartialBlockStatement=function(e){this.accept(e.program),this.accept(e.inverse);var t=e.program||e.inverse,r=e.program&&e.inverse,n=r,o=r;if(r&&r.chained)for(n=r.body[0].program;o.chained;)o=o.body[o.body.length-1].program;var a={open:e.openStrip.open,close:e.closeStrip.close,openStandalone:isNextWhitespace(t.body),closeStandalone:isPrevWhitespace((n||t).body)};return e.openStrip.close&&omitRight(t.body,null,!0),r?((r=e.inverseStrip).open&&omitLeft(t.body,null,!0),r.close&&omitRight(n.body,null,!0),e.closeStrip.open&&omitLeft(o.body,null,!0),!this.options.ignoreStandalone&&isPrevWhitespace(t.body)&&isNextWhitespace(n.body)&&(omitLeft(t.body),omitRight(n.body))):e.closeStrip.open&&omitLeft(t.body,null,!0),a},WhitespaceControl.prototype.Decorator=WhitespaceControl.prototype.MustacheStatement=function(e){return e.strip},WhitespaceControl.prototype.PartialStatement=WhitespaceControl.prototype.CommentStatement=function(e){e=e.strip||{};return{inlineStandalone:!0,open:e.open,close:e.close}},t.default=WhitespaceControl,e.exports=t.default),whitespaceControl.exports;var e,t,r}function requireHelpers(){function validateClose(e,t){if(e.path.original!==(t=t.path?t.path.original:t))throw new u.default(e.path.original+" doesn't match "+t,{loc:e.path.loc})}var u,e;return hasRequiredHelpers||(hasRequiredHelpers=1,helpers.te=!0,helpers.SourceLocation=function(e,t){this.source=e,this.start={line:t.first_line,column:t.first_column},this.end={line:t.last_line,column:t.last_column}},helpers.id=function(e){return/^\[.*\]$/.test(e)?e.substring(1,e.length-1):e},helpers.stripFlags=function(e,t){return{open:"~"===e.charAt(2),close:"~"===t.charAt(t.length-3)}},helpers.stripComment=function(e){return e.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")},helpers.preparePath=function(e,t,r){r=this.locInfo(r);for(var n=e?"@":"",o=[],a=0,i=0,s=t.length;i<s;i++){var l=t[i].part;if(n+=(t[i].separator||"")+l,t[i].original!==l||".."!==l&&"."!==l&&"this"!==l)o.push(l);else{if(0<o.length)throw new u.default("Invalid path: "+n,{loc:r});".."===l&&a++}}return{type:"PathExpression",data:e,depth:a,parts:o,original:n,loc:r}},helpers.prepareMustache=function(e,t,r,n,o,a){var i=n.charAt(3)||n.charAt(2),i="{"!==i&&"&"!==i;return{type:/\*/.test(n)?"Decorator":"MustacheStatement",path:e,params:t,hash:r,escaped:i,strip:o,loc:this.locInfo(a)}},helpers.prepareRawBlock=function(e,t,r,n){return validateClose(e,r),n=this.locInfo(n),{type:"BlockStatement",path:e.path,params:e.params,hash:e.hash,program:{type:"Program",body:t,strip:{},loc:n},openStrip:{},inverseStrip:{},closeStrip:{},loc:n}},helpers.prepareBlock=function(e,t,r,n,o,a){n&&n.path&&validateClose(e,n);var i=/\*/.test(e.open),s=void(t.blockParams=e.blockParams),l=void 0;if(r){if(i)throw new u.default("Unexpected inverse block on decorator",r);r.chain&&(r.program.body[0].closeStrip=n.strip),l=r.strip,s=r.program}return o&&(o=s,s=t,t=o),{type:i?"DecoratorBlock":"BlockStatement",path:e.path,params:e.params,hash:e.hash,program:t,inverse:s,openStrip:e.strip,inverseStrip:l,closeStrip:n&&n.strip,loc:this.locInfo(a)}},helpers.prepareProgram=function(e,t){var r;return{type:"Program",body:e,strip:{},loc:t=!t&&e.length&&(r=e[e.length-1].loc,e=e[0].loc)&&r?{source:e.source,start:{line:e.start.line,column:e.start.column},end:{line:r.end.line,column:r.end.column}}:t}},helpers.preparePartialBlock=function(e,t,r,n){return validateClose(e,r),{type:"PartialBlockStatement",name:e.path,params:e.params,hash:e.hash,program:t,openStrip:e.strip,closeStrip:r&&r.strip,loc:this.locInfo(n)}},u=(e=requireException())&&e.te?e:{default:e}),helpers}function requireBase(){function _interopRequireDefault(e){return e&&e.te?e:{default:e}}function parseWithoutProcessing(e,t){return"Program"===e.type?e:((r.default.yy=o).locInfo=function(e){return new o.SourceLocation(t&&t.srcName,e)},r.default.parse(e))}var r,n,e,t,o;return hasRequiredBase||(hasRequiredBase=1,base.te=!0,base.parseWithoutProcessing=parseWithoutProcessing,base.parse=function(e,t){e=parseWithoutProcessing(e,t);return new n.default(t).accept(e)},r=_interopRequireDefault(requireParser()),n=_interopRequireDefault(requireWhitespaceControl()),e=function(e){if(e&&e.te)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(requireHelpers()),t=requireUtils(),base.parser=r.default,o={},t.extend(o,e)),base}function requireCompiler(){function _interopRequireDefault(e){return e&&e.te?e:{default:e}}function Compiler(){}function transformLiteralToPath(e){e.path.parts||(e.path={type:"PathExpression",data:!1,depth:0,parts:[(e=e.path).original+""],original:e.original+"",loc:e.loc})}var a,i,o,t;return hasRequiredCompiler||(hasRequiredCompiler=1,compiler.te=!0,compiler.Compiler=Compiler,compiler.precompile=function(e,t,r){if(null==e||"string"!=typeof e&&"Program"!==e.type)throw new a.default("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);"data"in(t=t||{})||(t.data=!0),t.compat&&(t.useDepths=!0);e=r.parse(e,t),e=(new r.Compiler).compile(e,t);return(new r.JavaScriptCompiler).compile(e,t)},compiler.compile=function(t,r,n){function compileInput(){var e=n.parse(t,r),e=(new n.Compiler).compile(e,r),e=(new n.JavaScriptCompiler).compile(e,r,void 0,!0);return n.template(e)}function ret(e,t){return(o=o||compileInput()).call(this,e,t)}if(void 0===r&&(r={}),null==t||"string"!=typeof t&&"Program"!==t.type)throw new a.default("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);"data"in(r=i.extend({},r))||(r.data=!0),r.compat&&(r.useDepths=!0);var o=void 0;return ret.ne=function(e){return(o=o||compileInput()).ne(e)},ret.ie=function(e,t,r,n){return(o=o||compileInput()).ie(e,t,r,n)},ret},a=_interopRequireDefault(requireException()),i=requireUtils(),o=_interopRequireDefault(requireAst()),t=[].slice,Compiler.prototype={compiler:Compiler,equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var r=0;r<t;r++){var n=this.opcodes[r],o=e.opcodes[r];if(n.opcode!==o.opcode||!function argEquals(e,t){if(e===t)return 1;if(i.isArray(e)&&i.isArray(t)&&e.length===t.length){for(var r=0;r<e.length;r++)if(!argEquals(e[r],t[r]))return;return 1}}(n.args,o.args))return!1}for(t=this.children.length,r=0;r<t;r++)if(!this.children[r].equals(e.children[r]))return!1;return!0},guid:0,compile:function(e,t){return this.sourceNode=[],this.opcodes=[],this.children=[],this.options=t,this.stringParams=t.stringParams,this.trackIds=t.trackIds,t.blockParams=t.blockParams||[],t.knownHelpers=i.extend(Object.create(null),{helperMissing:!0,blockHelperMissing:!0,each:!0,if:!0,unless:!0,with:!0,log:!0,lookup:!0},t.knownHelpers),this.accept(e)},compileProgram:function(e){var e=(new this.compiler).compile(e,this.options),t=this.guid++;return this.usePartial=this.usePartial||e.usePartial,this.children[t]=e,this.useDepths=this.useDepths||e.useDepths,t},accept:function(e){if(!this[e.type])throw new a.default("Unknown type: "+e.type,e);this.sourceNode.unshift(e);e=this[e.type](e);return this.sourceNode.shift(),e},Program:function(e){this.options.blockParams.unshift(e.blockParams);for(var t=e.body,r=t.length,n=0;n<r;n++)this.accept(t[n]);return this.options.blockParams.shift(),this.isSimple=1===r,this.blockParams=e.blockParams?e.blockParams.length:0,this},BlockStatement:function(e){transformLiteralToPath(e);var t=e.inverse,r=(r=e.program)&&this.compileProgram(r),t=t&&this.compileProgram(t),n=this.classifySexpr(e);"helper"===n?this.helperSexpr(e,r,t):"simple"===n?(this.simpleSexpr(e),this.opcode("pushProgram",r),this.opcode("pushProgram",t),this.opcode("emptyHash"),this.opcode("blockValue",e.path.original)):(this.ambiguousSexpr(e,r,t),this.opcode("pushProgram",r),this.opcode("pushProgram",t),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},DecoratorBlock:function(e){var t=e.program&&this.compileProgram(e.program),t=this.setupFullMustacheParams(e,t,void 0),e=e.path;this.useDecorators=!0,this.opcode("registerDecorator",t.length,e.original)},PartialStatement:function(e){this.usePartial=!0;var t=e.program&&this.compileProgram(e.program),r=e.params;if(1<r.length)throw new a.default("Unsupported number of partial arguments: "+r.length,e);r.length||(this.options.explicitPartialContext?this.opcode("pushLiteral","undefined"):r.push({type:"PathExpression",parts:[],depth:0}));var r=e.name.original,n="SubExpression"===e.name.type,t=(n&&this.accept(e.name),this.setupFullMustacheParams(e,t,void 0,!0),e.indent||"");this.options.preventIndent&&t&&(this.opcode("appendContent",t),t=""),this.opcode("invokePartial",n,r,t),this.opcode("append")},PartialBlockStatement:function(e){this.PartialStatement(e)},MustacheStatement:function(e){this.SubExpression(e),this.opcode(e.escaped&&!this.options.noEscape?"appendEscaped":"append")},Decorator:function(e){this.DecoratorBlock(e)},ContentStatement:function(e){e.value&&this.opcode("appendContent",e.value)},CommentStatement:function(){},SubExpression:function(e){transformLiteralToPath(e);var t=this.classifySexpr(e);"simple"===t?this.simpleSexpr(e):"helper"===t?this.helperSexpr(e):this.ambiguousSexpr(e)},ambiguousSexpr:function(e,t,r){var e=e.path,n=e.parts[0],o=null!=t||null!=r;this.opcode("getContext",e.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",r),e.strict=!0,this.accept(e),this.opcode("invokeAmbiguous",n,o)},simpleSexpr:function(e){e=e.path;e.strict=!0,this.accept(e),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,r){var t=this.setupFullMustacheParams(e,t,r),r=e.path,n=r.parts[0];if(this.options.knownHelpers[n])this.opcode("invokeKnownHelper",t.length,n);else{if(this.options.knownHelpersOnly)throw new a.default("You specified knownHelpersOnly, but used the unknown helper "+n,e);r.strict=!0,r.falsy=!0,this.accept(r),this.opcode("invokeHelper",t.length,r.original,o.default.helpers.simpleId(r))}},PathExpression:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0],r=o.default.helpers.scopedId(e),n=!e.depth&&!r&&this.blockParamIndex(t);n?this.opcode("lookupBlockParam",n,e.parts):t?e.data?(this.options.data=!0,this.opcode("lookupData",e.depth,e.parts,e.strict)):this.opcode("lookupOnContext",e.parts,e.falsy,e.strict,r):this.opcode("pushContext")},StringLiteral:function(e){this.opcode("pushString",e.value)},NumberLiteral:function(e){this.opcode("pushLiteral",e.value)},BooleanLiteral:function(e){this.opcode("pushLiteral",e.value)},UndefinedLiteral:function(){this.opcode("pushLiteral","undefined")},NullLiteral:function(){this.opcode("pushLiteral","null")},Hash:function(e){var t=e.pairs,r=0,n=t.length;for(this.opcode("pushHash");r<n;r++)this.pushParam(t[r].value);for(;r--;)this.opcode("assignToHash",t[r].key);this.opcode("popHash")},opcode:function(e){this.opcodes.push({opcode:e,args:t.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(e){e&&(this.useDepths=!0)},classifySexpr:function(e){var t=o.default.helpers.simpleId(e.path),r=t&&!!this.blockParamIndex(e.path.parts[0]),n=!r&&o.default.helpers.helperExpression(e),r=!r&&(n||t);return r&&!n&&((t=this.options).knownHelpers[e.path.parts[0]]?n=!0:t.knownHelpersOnly&&(r=!1)),n?"helper":r?"ambiguous":"simple"},pushParams:function(e){for(var t=0,r=e.length;t<r;t++)this.pushParam(e[t])},pushParam:function(e){var t,r,n=null!=e.value?e.value:e.original||"";this.stringParams?(n.replace&&(n=n.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",n,e.type),"SubExpression"===e.type&&this.accept(e)):(this.trackIds&&((t=!e.parts||o.default.helpers.scopedId(e)||e.depth?void 0:this.blockParamIndex(e.parts[0]))?(r=e.parts.slice(1).join("."),this.opcode("pushId","BlockParam",t,r)):((n=e.original||n).replace&&(n=n.replace(/^this(?:\.|$)/,"").replace(/^\.\//,"").replace(/^\.$/,"")),this.opcode("pushId",e.type,n))),this.accept(e))},setupFullMustacheParams:function(e,t,r,n){var o=e.params;return this.pushParams(o),this.opcode("pushProgram",t),this.opcode("pushProgram",r),e.hash?this.accept(e.hash):this.opcode("emptyHash",n),o},blockParamIndex:function(e){for(var t=0,r=this.options.blockParams.length;t<r;t++){var n=this.options.blockParams[t],o=n&&i.indexOf(n,e);if(n&&0<=o)return[t,o]}}}),compiler}function requireBase64(){var t;return hasRequiredBase64||(hasRequiredBase64=1,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),base64.encode=function(e){if(0<=e&&e<t.length)return t[e];throw new TypeError("Must be between 0 and 63: "+e)},base64.decode=function(e){return 65<=e&&e<=90?e-65:97<=e&&e<=122?e-97+26:48<=e&&e<=57?e-48+52:43==e?62:47==e?63:-1}),base64}function requireBase64Vlq(){var u;return hasRequiredBase64Vlq||(hasRequiredBase64Vlq=1,u=requireBase64(),base64Vlq.encode=function(e){for(var t,r="",n=e<0?1+(-e<<1):e<<1;t=31&n,0<(n>>>=5)&&(t|=32),r+=u.encode(t),0<n;);return r},base64Vlq.decode=function(e,t,r){var n,o,a,i=e.length,s=0,l=0;do{if(i<=t)throw new Error("Expected more digits in base 64 VLQ value.");if(-1===(o=u.decode(e.charCodeAt(t++))))throw new Error("Invalid base64 digit: "+e.charAt(t-1))}while(n=!!(32&o),s+=(o&=31)<<l,l+=5,n);r.value=(a=s>>1,1&~s?a:-a),r.rest=t}),base64Vlq}function requireUtil(){function urlParse(e){e=e.match(t);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}function urlGenerate(e){var t="";return e.scheme&&(t+=e.scheme+":"),t+="//",e.auth&&(t+=e.auth+"@"),e.host&&(t+=e.host),e.port&&(t+=":"+e.port),e.path&&(t+=e.path),t}function normalize(e){var t=e,r=urlParse(e);if(r){if(!r.path)return e;t=r.path}for(var n,e=s.isAbsolute(t),o=t.split(/\/+/),a=0,i=o.length-1;0<=i;i--)"."===(n=o[i])?o.splice(i,1):".."===n?a++:0<a&&(""===n?(o.splice(i+1,a),a=0):(o.splice(i,2),a--));return""===(t=o.join("/"))&&(t=e?"/":"."),r?(r.path=t,urlGenerate(r)):t}function join(e,t){""===e&&(e=".");var r=urlParse(t=""===t?".":t),n=urlParse(e);return n&&(e=n.path||"/"),r&&!r.scheme?(n&&(r.scheme=n.scheme),urlGenerate(r)):r||t.match(o)?t:!n||n.host||n.path?(r="/"===t.charAt(0)?t:normalize(e.replace(/\/+$/,"")+"/"+t),n?(n.path=r,urlGenerate(n)):r):(n.host=t,urlGenerate(n))}function identity(e){return e}function isProtoString(e){if(e){var t=e.length;if(!(t<9)&&95===e.charCodeAt(t-1)&&95===e.charCodeAt(t-2)&&111===e.charCodeAt(t-3)&&116===e.charCodeAt(t-4)&&111===e.charCodeAt(t-5)&&114===e.charCodeAt(t-6)&&112===e.charCodeAt(t-7)&&95===e.charCodeAt(t-8)&&95===e.charCodeAt(t-9)){for(var r=t-10;0<=r;r--)if(36!==e.charCodeAt(r))return;return 1}}}function strcmp(e,t){return e===t?0:null===e||null!==t&&t<e?1:-1}return hasRequiredUtil||(hasRequiredUtil=1,(s=util).getArg=function(e,t,r){if(t in e)return e[t];if(3===arguments.length)return r;throw new Error('"'+t+'" is a required argument.')},t=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,o=/^data:.+\,.+$/,s.urlParse=urlParse,s.urlGenerate=urlGenerate,s.normalize=normalize,s.join=join,s.isAbsolute=function(e){return"/"===e.charAt(0)||t.test(e)},s.relative=function(e,t){e=(e=""===e?".":e).replace(/\/$/,"");for(var r=0;0!==t.indexOf(e+"/");){var n=e.lastIndexOf("/");if(n<0)return t;if((e=e.slice(0,n)).match(/^([^\/]+:\/)?\/*$/))return t;++r}return Array(r+1).join("../")+t.substr(e.length+1)},e=!("__proto__"in Object.create(null)),s.toSetString=e?identity:function(e){return isProtoString(e)?"$"+e:e},s.fromSetString=e?identity:function(e){return isProtoString(e)?e.slice(1):e},s.compareByOriginalPositions=function(e,t,r){var n=strcmp(e.source,t.source);return 0!==n||0!=(n=e.originalLine-t.originalLine)||0!=(n=e.originalColumn-t.originalColumn)||r||0!=(n=e.generatedColumn-t.generatedColumn)||0!=(n=e.generatedLine-t.generatedLine)?n:strcmp(e.name,t.name)},s.compareByGeneratedPositionsDeflated=function(e,t,r){var n=e.generatedLine-t.generatedLine;return 0!==n||0!=(n=e.generatedColumn-t.generatedColumn)||r||0!==(n=strcmp(e.source,t.source))||0!=(n=e.originalLine-t.originalLine)||0!=(n=e.originalColumn-t.originalColumn)?n:strcmp(e.name,t.name)},s.compareByGeneratedPositionsInflated=function(e,t){var r=e.generatedLine-t.generatedLine;return 0!==r||0!=(r=e.generatedColumn-t.generatedColumn)||0!==(r=strcmp(e.source,t.source))||0!=(r=e.originalLine-t.originalLine)||0!=(r=e.originalColumn-t.originalColumn)?r:strcmp(e.name,t.name)},s.parseSourceMapInput=function(e){return JSON.parse(e.replace(/^\)]}'[^\n]*\n/,""))},s.computeSourceURL=function(e,t,r){if(t=t||"",e&&("/"!==e[e.length-1]&&"/"!==t[0]&&(e+="/"),t=e+t),r){e=urlParse(r);if(!e)throw new Error("sourceMapURL could not be parsed");e.path&&0<=(r=e.path.lastIndexOf("/"))&&(e.path=e.path.substring(0,r+1)),t=join(urlGenerate(e),t)}return normalize(t)}),util;var s,t,o,e}function requireArraySet(){function ArraySet(){this.ce=[],this.fe=s?new Map:Object.create(null)}var a,i,s;return hasRequiredArraySet||(hasRequiredArraySet=1,a=requireUtil(),i=Object.prototype.hasOwnProperty,s="undefined"!=typeof Map,ArraySet.fromArray=function(e,t){for(var r=new ArraySet,n=0,o=e.length;n<o;n++)r.add(e[n],t);return r},ArraySet.prototype.size=function(){return s?this.fe.size:Object.getOwnPropertyNames(this.fe).length},ArraySet.prototype.add=function(e,t){var r=s?e:a.toSetString(e),n=s?this.has(e):i.call(this.fe,r),o=this.ce.length;n&&!t||this.ce.push(e),n||(s?this.fe.set(e,o):this.fe[r]=o)},ArraySet.prototype.has=function(e){return s?this.fe.has(e):(e=a.toSetString(e),i.call(this.fe,e))},ArraySet.prototype.indexOf=function(e){if(s){var t=this.fe.get(e);if(0<=t)return t}else{t=a.toSetString(e);if(i.call(this.fe,t))return this.fe[t]}throw new Error('"'+e+'" is not in the set.')},ArraySet.prototype.at=function(e){if(0<=e&&e<this.ce.length)return this.ce[e];throw new Error("No element indexed by "+e)},ArraySet.prototype.toArray=function(){return this.ce.slice()},arraySet.ArraySet=ArraySet),arraySet}function requireMappingList(){function MappingList(){this.ce=[],this.he=!0,this.pe={generatedLine:-1,generatedColumn:0}}var o;return hasRequiredMappingList||(hasRequiredMappingList=1,o=requireUtil(),MappingList.prototype.unsortedForEach=function(e,t){this.ce.forEach(e,t)},MappingList.prototype.add=function(e){var t,r,n;(r=(t=this.pe).generatedLine)<(n=e.generatedLine)||n==r&&t.generatedColumn<=e.generatedColumn||o.compareByGeneratedPositionsInflated(t,e)<=0?this.pe=e:this.he=!1,this.ce.push(e)},MappingList.prototype.toArray=function(){return this.he||(this.ce.sort(o.compareByGeneratedPositionsInflated),this.he=!0),this.ce},mappingList.MappingList=MappingList),mappingList}function requireSourceMapGenerator(){function SourceMapGenerator(e){this.me=f.getArg(e=e||{},"file",null),this.de=f.getArg(e,"sourceRoot",null),this.ge=f.getArg(e,"skipValidation",!1),this.be=new t,this.ve=new t,this.Ee=new r,this.Se=null}var d,f,t,r;return hasRequiredSourceMapGenerator||(hasRequiredSourceMapGenerator=1,d=requireBase64Vlq(),f=requireUtil(),t=requireArraySet().ArraySet,r=requireMappingList().MappingList,SourceMapGenerator.prototype.ye=3,SourceMapGenerator.fromSourceMap=function(r){var n=r.sourceRoot,o=new SourceMapGenerator({file:r.file,sourceRoot:n});return r.eachMapping(function(e){var t={generated:{line:e.generatedLine,column:e.generatedColumn}};null!=e.source&&(t.source=e.source,null!=n&&(t.source=f.relative(n,t.source)),t.original={line:e.originalLine,column:e.originalColumn},null!=e.name)&&(t.name=e.name),o.addMapping(t)}),r.sources.forEach(function(e){var t=e,t=(null!==n&&(t=f.relative(n,e)),o.be.has(t)||o.be.add(t),r.sourceContentFor(e));null!=t&&o.setSourceContent(e,t)}),o},SourceMapGenerator.prototype.addMapping=function(e){var t=f.getArg(e,"generated"),r=f.getArg(e,"original",null),n=f.getArg(e,"source",null),e=f.getArg(e,"name",null);this.ge||this.we(t,r,n,e),null!=n&&(n=String(n),this.be.has(n)||this.be.add(n)),null!=e&&(e=String(e),this.ve.has(e)||this.ve.add(e)),this.Ee.add({generatedLine:t.line,generatedColumn:t.column,originalLine:null!=r&&r.line,originalColumn:null!=r&&r.column,source:n,name:e})},SourceMapGenerator.prototype.setSourceContent=function(e,t){null!=this.de&&(e=f.relative(this.de,e)),null!=t?(this.Se||(this.Se=Object.create(null)),this.Se[f.toSetString(e)]=t):this.Se&&(delete this.Se[f.toSetString(e)],0===Object.keys(this.Se).length)&&(this.Se=null)},SourceMapGenerator.prototype.applySourceMap=function(r,e,n){var o=e;if(null==e){if(null==r.file)throw new Error('SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map\'s "file" property. Both were omitted.');o=r.file}var a=this.de,i=(null!=a&&(o=f.relative(a,o)),new t),s=new t;this.Ee.unsortedForEach(function(e){e.source===o&&null!=e.originalLine&&null!=(t=r.originalPositionFor({line:e.originalLine,column:e.originalColumn})).source&&(e.source=t.source,null!=n&&(e.source=f.join(n,e.source)),null!=a&&(e.source=f.relative(a,e.source)),e.originalLine=t.line,e.originalColumn=t.column,null!=t.name)&&(e.name=t.name);var t=e.source,t=(null==t||i.has(t)||i.add(t),e.name);null==t||s.has(t)||s.add(t)},this),this.be=i,this.ve=s,r.sources.forEach(function(e){var t=r.sourceContentFor(e);null!=t&&(null!=n&&(e=f.join(n,e)),null!=a&&(e=f.relative(a,e)),this.setSourceContent(e,t))},this)},SourceMapGenerator.prototype.we=function(e,t,r,n){if(t&&"number"!=typeof t.line&&"number"!=typeof t.column)throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if((!(e&&"line"in e&&"column"in e&&0<e.line&&0<=e.column)||t||r||n)&&!(e&&"line"in e&&"column"in e&&t&&"line"in t&&"column"in t&&0<e.line&&0<=e.column&&0<t.line&&0<=t.column&&r))throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:r,original:t,name:n}))},SourceMapGenerator.prototype.xe=function(){for(var e,t,r,n=0,o=1,a=0,i=0,s=0,l=0,u="",c=this.Ee.toArray(),p=0,h=c.length;p<h;p++){if(e="",(t=c[p]).generatedLine!==o)for(n=0;t.generatedLine!==o;)e+=";",o++;else if(0<p){if(!f.compareByGeneratedPositionsInflated(t,c[p-1]))continue;e+=","}e+=d.encode(t.generatedColumn-n),n=t.generatedColumn,null!=t.source&&(r=this.be.indexOf(t.source),e+=d.encode(r-l),l=r,e+=d.encode(t.originalLine-1-i),i=t.originalLine-1,e+=d.encode(t.originalColumn-a),a=t.originalColumn,null!=t.name)&&(r=this.ve.indexOf(t.name),e+=d.encode(r-s),s=r),u+=e}return u},SourceMapGenerator.prototype.Ce=function(e,t){return e.map(function(e){if(!this.Se)return null;null!=t&&(e=f.relative(t,e));e=f.toSetString(e);return Object.prototype.hasOwnProperty.call(this.Se,e)?this.Se[e]:null},this)},SourceMapGenerator.prototype.toJSON=function(){var e={version:this.ye,sources:this.be.toArray(),names:this.ve.toArray(),mappings:this.xe()};return null!=this.me&&(e.file=this.me),null!=this.de&&(e.sourceRoot=this.de),this.Se&&(e.sourcesContent=this.Ce(e.sources,e.sourceRoot)),e},SourceMapGenerator.prototype.toString=function(){return JSON.stringify(this.toJSON())},sourceMapGenerator.SourceMapGenerator=SourceMapGenerator),sourceMapGenerator}function requireBinarySearch(){return hasRequiredBinarySearch||(hasRequiredBinarySearch=1,(l=binarySearch).GREATEST_LOWER_BOUND=1,l.LEAST_UPPER_BOUND=2,l.search=function(e,t,r,n){if(0===t.length)return-1;var o=function recursiveSearch(e,t,r,n,o,a){var i=Math.floor((t-e)/2)+e,s=o(r,n[i],!0);return 0===s?i:0<s?1<t-i?recursiveSearch(i,t,r,n,o,a):a==l.LEAST_UPPER_BOUND?t<n.length?t:-1:i:1<i-e?recursiveSearch(e,i,r,n,o,a):a==l.LEAST_UPPER_BOUND?i:e<0?-1:e}(-1,t.length,e,t,r,n||l.GREATEST_LOWER_BOUND);if(o<0)return-1;for(;0<=o-1&&0===r(t[o],t[o-1],!0);)--o;return o}),binarySearch;var l}function requireQuickSort(){function swap(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}return hasRequiredQuickSort||(hasRequiredQuickSort=1,quickSort.quickSort=function(e,t){!function doQuickSort(e,t,r,n){if(r<n){var o=r-1;swap(e,(s=r,l=n,Math.round(s+Math.random()*(l-s))),n);for(var a=e[n],i=r;i<n;i++)t(e[i],a)<=0&&swap(e,o+=1,i);swap(e,o+1,i);l=o+1;doQuickSort(e,t,r,l-1),doQuickSort(e,t,l+1,n)}var s,l}(e,t,0,e.length-1)}),quickSort}function requireSourceMapConsumer(){function SourceMapConsumer(e,t){var r=e;return new(null!=(r="string"==typeof e?y.parseSourceMapInput(e):r).sections?IndexedSourceMapConsumer:BasicSourceMapConsumer)(r,t)}function BasicSourceMapConsumer(e,t){var r=e,e=("string"==typeof e&&(r=y.parseSourceMapInput(e)),y.getArg(r,"version")),n=y.getArg(r,"sources"),o=y.getArg(r,"names",[]),a=y.getArg(r,"sourceRoot",null),i=y.getArg(r,"sourcesContent",null),s=y.getArg(r,"mappings"),r=y.getArg(r,"file",null);if(e!=this.ye)throw new Error("Unsupported version: "+e);a=a&&y.normalize(a),n=n.map(String).map(y.normalize).map(function(e){return a&&y.isAbsolute(a)&&y.isAbsolute(e)?y.relative(a,e):e}),this.ve=h.fromArray(o.map(String),!0),this.be=h.fromArray(n,!0),this.De=this.be.toArray().map(function(e){return y.computeSourceURL(a,e,t)}),this.sourceRoot=a,this.sourcesContent=i,this.Ee=s,this.Me=t,this.file=r}function Mapping(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}function IndexedSourceMapConsumer(e,o){var t=e,e=("string"==typeof e&&(t=y.parseSourceMapInput(e)),y.getArg(t,"version")),t=y.getArg(t,"sections");if(e!=this.ye)throw new Error("Unsupported version: "+e);this.be=new h,this.ve=new h;var a={line:-1,column:0};this.Ae=t.map(function(e){if(e.url)throw new Error("Support for url field in sections not implemented.");var t=y.getArg(e,"offset"),r=y.getArg(t,"line"),n=y.getArg(t,"column");if(r<a.line||r===a.line&&n<a.column)throw new Error("Section offsets must be ordered and non-overlapping.");return a=t,{generatedOffset:{generatedLine:r+1,generatedColumn:n+1},consumer:new SourceMapConsumer(y.getArg(e,"map"),o)}})}var y,l,h,v,E;return hasRequiredSourceMapConsumer||(hasRequiredSourceMapConsumer=1,y=requireUtil(),l=requireBinarySearch(),h=requireArraySet().ArraySet,v=requireBase64Vlq(),E=requireQuickSort().quickSort,SourceMapConsumer.fromSourceMap=function(e,t){return BasicSourceMapConsumer.fromSourceMap(e,t)},SourceMapConsumer.prototype.ye=3,SourceMapConsumer.prototype.Pe=null,Object.defineProperty(SourceMapConsumer.prototype,"Re",{configurable:!0,enumerable:!0,get:function(){return this.Pe||this._e(this.Ee,this.sourceRoot),this.Pe}}),SourceMapConsumer.prototype.ke=null,Object.defineProperty(SourceMapConsumer.prototype,"Te",{configurable:!0,enumerable:!0,get:function(){return this.ke||this._e(this.Ee,this.sourceRoot),this.ke}}),SourceMapConsumer.prototype.qe=function(e,t){e=e.charAt(t);return";"===e||","===e},SourceMapConsumer.prototype._e=function(e,t){throw new Error("Subclasses must implement _parseMappings")},SourceMapConsumer.GENERATED_ORDER=1,SourceMapConsumer.ORIGINAL_ORDER=2,SourceMapConsumer.GREATEST_LOWER_BOUND=1,SourceMapConsumer.LEAST_UPPER_BOUND=2,SourceMapConsumer.prototype.eachMapping=function(e,t,r){var n,t=t||null;switch(r||SourceMapConsumer.GENERATED_ORDER){case SourceMapConsumer.GENERATED_ORDER:n=this.Re;break;case SourceMapConsumer.ORIGINAL_ORDER:n=this.Te;break;default:throw new Error("Unknown order of iteration.")}var o=this.sourceRoot;n.map(function(e){var t=null===e.source?null:this.be.at(e.source);return{source:y.computeSourceURL(o,t,this.Me),generatedLine:e.generatedLine,generatedColumn:e.generatedColumn,originalLine:e.originalLine,originalColumn:e.originalColumn,name:null===e.name?null:this.ve.at(e.name)}},this).forEach(e,t)},SourceMapConsumer.prototype.allGeneratedPositionsFor=function(e){var t=y.getArg(e,"line"),r={source:y.getArg(e,"source"),originalLine:t,originalColumn:y.getArg(e,"column",0)};if(r.source=this.Le(r.source),r.source<0)return[];var n=[],o=this.He(r,this.Te,"originalLine","originalColumn",y.compareByOriginalPositions,l.LEAST_UPPER_BOUND);if(0<=o){var a=this.Te[o];if(void 0===e.column)for(var i=a.originalLine;a&&a.originalLine===i;)n.push({line:y.getArg(a,"generatedLine",null),column:y.getArg(a,"generatedColumn",null),lastColumn:y.getArg(a,"lastGeneratedColumn",null)}),a=this.Te[++o];else for(var s=a.originalColumn;a&&a.originalLine===t&&a.originalColumn==s;)n.push({line:y.getArg(a,"generatedLine",null),column:y.getArg(a,"generatedColumn",null),lastColumn:y.getArg(a,"lastGeneratedColumn",null)}),a=this.Te[++o]}return n},sourceMapConsumer.SourceMapConsumer=SourceMapConsumer,(BasicSourceMapConsumer.prototype=Object.create(SourceMapConsumer.prototype)).consumer=SourceMapConsumer,BasicSourceMapConsumer.prototype.Le=function(e){var t,r=e;if(null!=this.sourceRoot&&(r=y.relative(this.sourceRoot,r)),this.be.has(r))return this.be.indexOf(r);for(t=0;t<this.De.length;++t)if(this.De[t]==e)return t;return-1},BasicSourceMapConsumer.fromSourceMap=function(e,t){var r=Object.create(BasicSourceMapConsumer.prototype),n=r.ve=h.fromArray(e.ve.toArray(),!0),o=r.be=h.fromArray(e.be.toArray(),!0);r.sourceRoot=e.de,r.sourcesContent=e.Ce(r.be.toArray(),r.sourceRoot),r.file=e.me,r.Me=t,r.De=r.be.toArray().map(function(e){return y.computeSourceURL(r.sourceRoot,e,t)});for(var a=e.Ee.toArray().slice(),i=r.Pe=[],s=r.ke=[],l=0,u=a.length;l<u;l++){var c=a[l],p=new Mapping;p.generatedLine=c.generatedLine,p.generatedColumn=c.generatedColumn,c.source&&(p.source=o.indexOf(c.source),p.originalLine=c.originalLine,p.originalColumn=c.originalColumn,c.name&&(p.name=n.indexOf(c.name)),s.push(p)),i.push(p)}return E(r.ke,y.compareByOriginalPositions),r},BasicSourceMapConsumer.prototype.ye=3,Object.defineProperty(BasicSourceMapConsumer.prototype,"sources",{get:function(){return this.De.slice()}}),BasicSourceMapConsumer.prototype._e=function(e,t){for(var r,n,o,a,i=1,s=0,l=0,u=0,c=0,p=0,h=e.length,d=0,f={},g={},m=[],b=[];d<h;)if(";"===e.charAt(d))i++,d++,s=0;else if(","===e.charAt(d))d++;else{for((r=new Mapping).generatedLine=i,a=d;a<h&&!this.qe(e,a);a++);if(o=f[n=e.slice(d,a)])d+=n.length;else{for(o=[];d<a;)v.decode(e,d,g),d=g.rest,o.push(g.value);if(2===o.length)throw new Error("Found a source, but no line and column");if(3===o.length)throw new Error("Found a source and line, but no column");f[n]=o}r.generatedColumn=s+o[0],s=r.generatedColumn,1<o.length&&(r.source=c+o[1],c+=o[1],r.originalLine=l+o[2],l=r.originalLine,r.originalLine+=1,r.originalColumn=u+o[3],u=r.originalColumn,4<o.length)&&(r.name=p+o[4],p+=o[4]),b.push(r),"number"==typeof r.originalLine&&m.push(r)}E(b,y.compareByGeneratedPositionsDeflated),this.Pe=b,E(m,y.compareByOriginalPositions),this.ke=m},BasicSourceMapConsumer.prototype.He=function(e,t,r,n,o,a){if(e[r]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[r]);if(e[n]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[n]);return l.search(e,t,o,a)},BasicSourceMapConsumer.prototype.computeColumnSpans=function(){for(var e=0;e<this.Re.length;++e){var t=this.Re[e];if(e+1<this.Re.length){var r=this.Re[e+1];if(t.generatedLine===r.generatedLine){t.lastGeneratedColumn=r.generatedColumn-1;continue}}t.lastGeneratedColumn=1/0}},BasicSourceMapConsumer.prototype.originalPositionFor=function(e){var t={generatedLine:y.getArg(e,"line"),generatedColumn:y.getArg(e,"column")},e=this.He(t,this.Re,"generatedLine","generatedColumn",y.compareByGeneratedPositionsDeflated,y.getArg(e,"bias",SourceMapConsumer.GREATEST_LOWER_BOUND));if(0<=e){var r,e=this.Re[e];if(e.generatedLine===t.generatedLine)return null!==(t=y.getArg(e,"source",null))&&(t=this.be.at(t),t=y.computeSourceURL(this.sourceRoot,t,this.Me)),null!==(r=y.getArg(e,"name",null))&&(r=this.ve.at(r)),{source:t,line:y.getArg(e,"originalLine",null),column:y.getArg(e,"originalColumn",null),name:r}}return{source:null,line:null,column:null,name:null}},BasicSourceMapConsumer.prototype.hasContentsOfAllSources=function(){return!!this.sourcesContent&&this.sourcesContent.length>=this.be.size()&&!this.sourcesContent.some(function(e){return null==e})},BasicSourceMapConsumer.prototype.sourceContentFor=function(e,t){if(!this.sourcesContent)return null;var r=this.Le(e);if(0<=r)return this.sourcesContent[r];var n,r=e;if(null!=this.sourceRoot&&(r=y.relative(this.sourceRoot,r)),null!=this.sourceRoot&&(n=y.urlParse(this.sourceRoot))){e=r.replace(/^file:\/\//,"");if("file"==n.scheme&&this.be.has(e))return this.sourcesContent[this.be.indexOf(e)];if((!n.path||"/"==n.path)&&this.be.has("/"+r))return this.sourcesContent[this.be.indexOf("/"+r)]}if(t)return null;throw new Error('"'+r+'" is not in the SourceMap.')},BasicSourceMapConsumer.prototype.generatedPositionFor=function(e){var t=y.getArg(e,"source");if(!((t=this.Le(t))<0)){t={source:t,originalLine:y.getArg(e,"line"),originalColumn:y.getArg(e,"column")},e=this.He(t,this.Te,"originalLine","originalColumn",y.compareByOriginalPositions,y.getArg(e,"bias",SourceMapConsumer.GREATEST_LOWER_BOUND));if(0<=e){e=this.Te[e];if(e.source===t.source)return{line:y.getArg(e,"generatedLine",null),column:y.getArg(e,"generatedColumn",null),lastColumn:y.getArg(e,"lastGeneratedColumn",null)}}}return{line:null,column:null,lastColumn:null}},sourceMapConsumer.BasicSourceMapConsumer=BasicSourceMapConsumer,(IndexedSourceMapConsumer.prototype=Object.create(SourceMapConsumer.prototype)).constructor=SourceMapConsumer,IndexedSourceMapConsumer.prototype.ye=3,Object.defineProperty(IndexedSourceMapConsumer.prototype,"sources",{get:function(){for(var e=[],t=0;t<this.Ae.length;t++)for(var r=0;r<this.Ae[t].consumer.sources.length;r++)e.push(this.Ae[t].consumer.sources[r]);return e}}),IndexedSourceMapConsumer.prototype.originalPositionFor=function(e){var t={generatedLine:y.getArg(e,"line"),generatedColumn:y.getArg(e,"column")},r=l.search(t,this.Ae,function(e,t){return e.generatedLine-t.generatedOffset.generatedLine||e.generatedColumn-t.generatedOffset.generatedColumn}),r=this.Ae[r];return r?r.consumer.originalPositionFor({line:t.generatedLine-(r.generatedOffset.generatedLine-1),column:t.generatedColumn-(r.generatedOffset.generatedLine===t.generatedLine?r.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},IndexedSourceMapConsumer.prototype.hasContentsOfAllSources=function(){return this.Ae.every(function(e){return e.consumer.hasContentsOfAllSources()})},IndexedSourceMapConsumer.prototype.sourceContentFor=function(e,t){for(var r=0;r<this.Ae.length;r++){var n=this.Ae[r].consumer.sourceContentFor(e,!0);if(n)return n}if(t)return null;throw new Error('"'+e+'" is not in the SourceMap.')},IndexedSourceMapConsumer.prototype.generatedPositionFor=function(e){for(var t=0;t<this.Ae.length;t++){var r=this.Ae[t];if(-1!==r.consumer.Le(y.getArg(e,"source"))){var n=r.consumer.generatedPositionFor(e);if(n)return{line:n.line+(r.generatedOffset.generatedLine-1),column:n.column+(r.generatedOffset.generatedLine===n.line?r.generatedOffset.generatedColumn-1:0)}}}return{line:null,column:null}},IndexedSourceMapConsumer.prototype._e=function(e,t){this.Pe=[],this.ke=[];for(var r=0;r<this.Ae.length;r++)for(var n=this.Ae[r],o=n.consumer.Re,a=0;a<o.length;a++){var i=o[a],s=n.consumer.be.at(i.source),s=y.computeSourceURL(n.consumer.sourceRoot,s,this.Me),l=(this.be.add(s),s=this.be.indexOf(s),null),s=(i.name&&(l=n.consumer.ve.at(i.name),this.ve.add(l),l=this.ve.indexOf(l)),{source:s,generatedLine:i.generatedLine+(n.generatedOffset.generatedLine-1),generatedColumn:i.generatedColumn+(n.generatedOffset.generatedLine===i.generatedLine?n.generatedOffset.generatedColumn-1:0),originalLine:i.originalLine,originalColumn:i.originalColumn,name:l});this.Pe.push(s),"number"==typeof s.originalLine&&this.ke.push(s)}E(this.Pe,y.compareByGeneratedPositionsDeflated),E(this.ke,y.compareByOriginalPositions)},sourceMapConsumer.IndexedSourceMapConsumer=IndexedSourceMapConsumer),sourceMapConsumer}function requireSourceNode(){function SourceNode(e,t,r,n,o){this.children=[],this.sourceContents={},this.line=null==e?null:e,this.column=null==t?null:t,this.source=null==r?null:r,this.name=null==o?null:o,this[a]=!0,null!=n&&this.add(n)}var t,c,p,a;return hasRequiredSourceNode||(hasRequiredSourceNode=1,t=requireSourceMapGenerator().SourceMapGenerator,c=requireUtil(),p=/(\r?\n)/,a="$$$isSourceNode$$$",SourceNode.fromStringWithSourceMap=function(e,r,n){function addMappingWithCode(e,t){var r;null===e||void 0===e.source?o.add(t):(r=n?c.join(n,e.source):e.source,o.add(new SourceNode(e.originalLine,e.originalColumn,r,t,e.name)))}function fK(){function getNextLine(){return i<a.length?a[i++]:void 0}return getNextLine()+(getNextLine()||"")}var o=new SourceNode,a=e.split(p),i=0,s=1,l=0,u=null;return r.eachMapping(function(e){if(null!==u){var t;if(!(s<e.generatedLine))return t=(r=a[i]||"").substr(0,e.generatedColumn-l),a[i]=r.substr(e.generatedColumn-l),l=e.generatedColumn,addMappingWithCode(u,t),void(u=e);addMappingWithCode(u,fK()),s++,l=0}for(;s<e.generatedLine;)o.add(fK()),s++;var r;l<e.generatedColumn&&(o.add((r=a[i]||"").substr(0,e.generatedColumn)),a[i]=r.substr(e.generatedColumn),l=e.generatedColumn),u=e},this),i<a.length&&(u&&addMappingWithCode(u,fK()),o.add(a.splice(i).join(""))),r.sources.forEach(function(e){var t=r.sourceContentFor(e);null!=t&&(null!=n&&(e=c.join(n,e)),o.setSourceContent(e,t))}),o},SourceNode.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(e){this.add(e)},this);else{if(!e[a]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);e&&this.children.push(e)}return this},SourceNode.prototype.prepend=function(e){if(Array.isArray(e))for(var t=e.length-1;0<=t;t--)this.prepend(e[t]);else{if(!e[a]&&"string"!=typeof e)throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);this.children.unshift(e)}return this},SourceNode.prototype.walk=function(e){for(var t,r=0,n=this.children.length;r<n;r++)(t=this.children[r])[a]?t.walk(e):""!==t&&e(t,{source:this.source,line:this.line,column:this.column,name:this.name})},SourceNode.prototype.join=function(e){var t,r,n=this.children.length;if(0<n){for(t=[],r=0;r<n-1;r++)t.push(this.children[r]),t.push(e);t.push(this.children[r]),this.children=t}return this},SourceNode.prototype.replaceRight=function(e,t){var r=this.children[this.children.length-1];return r[a]?r.replaceRight(e,t):"string"==typeof r?this.children[this.children.length-1]=r.replace(e,t):this.children.push("".replace(e,t)),this},SourceNode.prototype.setSourceContent=function(e,t){this.sourceContents[c.toSetString(e)]=t},SourceNode.prototype.walkSourceContents=function(e){for(var t=0,r=this.children.length;t<r;t++)this.children[t][a]&&this.children[t].walkSourceContents(e);for(var n=Object.keys(this.sourceContents),t=0,r=n.length;t<r;t++)e(c.fromSetString(n[t]),this.sourceContents[n[t]])},SourceNode.prototype.toString=function(){var t="";return this.walk(function(e){t+=e}),t},SourceNode.prototype.toStringWithSourceMap=function(e){var o={code:"",line:1,column:0},a=new t(e),i=!1,s=null,l=null,u=null,c=null;return this.walk(function(e,t){o.code+=e,null!==t.source&&null!==t.line&&null!==t.column?(s===t.source&&l===t.line&&u===t.column&&c===t.name||a.addMapping({source:t.source,original:{line:t.line,column:t.column},generated:{line:o.line,column:o.column},name:t.name}),s=t.source,l=t.line,u=t.column,c=t.name,i=!0):i&&(a.addMapping({generated:{line:o.line,column:o.column}}),s=null,i=!1);for(var r=0,n=e.length;r<n;r++)10===e.charCodeAt(r)?(o.line++,o.column=0,r+1===n?(s=null,i=!1):i&&a.addMapping({source:t.source,original:{line:t.line,column:t.column},generated:{line:o.line,column:o.column},name:t.name})):o.column++}),this.walkSourceContents(function(e,t){a.setSourceContent(e,t)}),{code:o.code,map:a}},sourceNode.SourceNode=SourceNode),sourceNode}function requireSourceMap(){return hasRequiredSourceMap||(hasRequiredSourceMap=1,sourceMap.SourceMapGenerator=requireSourceMapGenerator().SourceMapGenerator,sourceMap.SourceMapConsumer=requireSourceMapConsumer().SourceMapConsumer,sourceMap.SourceNode=requireSourceNode().SourceNode),sourceMap}function requireCodeGen(){if(!hasRequiredCodeGen){hasRequiredCodeGen=1;var e=codeGen,t=codeGen.exports;function castChunk(e,t,r){if(i.isArray(e)){for(var n=[],o=0,a=e.length;o<a;o++)n.push(t.wrap(e[o],r));return n}return"boolean"==typeof e||"number"==typeof e?e+"":e}function CodeGen(e){this.srcFile=e,this.source=[]}t.te=!0;var i=requireUtils(),r=void 0;try{r=requireSourceMap().SourceNode}catch(e){}r||((r=function(e,t,r,n){this.src="",n&&this.add(n)}).prototype={add:function(e){i.isArray(e)&&(e=e.join("")),this.src+=e},prepend:function(e){i.isArray(e)&&(e=e.join("")),this.src=e+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}),CodeGen.prototype={isEmpty:function(){return!this.source.length},prepend:function(e,t){this.source.unshift(this.wrap(e,t))},push:function(e,t){this.source.push(this.wrap(e,t))},merge:function(){var t=this.empty();return this.each(function(e){t.add(["  ",e,"\n"])}),t},each:function(e){for(var t=0,r=this.source.length;t<r;t++)e(this.source[t])},empty:function(){var e=this.currentLocation||{start:{}};return new r(e.start.line,e.start.column,this.srcFile)},wrap:function(e){var t=arguments.length<=1||void 0===arguments[1]?this.currentLocation||{start:{}}:arguments[1];return e instanceof r?e:(e=castChunk(e,this,t),new r(t.start.line,t.start.column,this.srcFile,e))},functionCall:function(e,t,r){return r=this.generateList(r),this.wrap([e,t?"."+t+"(":"(",r,")"])},quotedString:function(e){return'"'+(e+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(r){var n=this,o=[],e=(Object.keys(r).forEach(function(e){var t=castChunk(r[e],n);"undefined"!==t&&o.push([n.quotedString(e),":",t])}),this.generateList(o));return e.prepend("{"),e.add("}"),e},generateList:function(e){for(var t=this.empty(),r=0,n=e.length;r<n;r++)r&&t.add(","),t.add(castChunk(e[r],this));return t},generateArray:function(e){e=this.generateList(e);return e.prepend("["),e.add("]"),e}},t.default=CodeGen,e.exports=t.default}return codeGen.exports}function requireJavascriptCompiler(){if(!hasRequiredJavascriptCompiler){hasRequiredJavascriptCompiler=1;var e=javascriptCompiler,t=javascriptCompiler.exports;function _interopRequireDefault(e){return e&&e.te?e:{default:e}}function Literal(e){this.value=e}function JavaScriptCompiler(){}t.te=!0;var r=requireBase$1(),h=_interopRequireDefault(requireException()),n=requireUtils(),o=_interopRequireDefault(requireCodeGen());JavaScriptCompiler.prototype={nameLookup:function(e,t){return this.internalNameLookup(e,t)},depthedLookup:function(e){return[this.aliasable("container.lookup"),"(depths, ",JSON.stringify(e),")"]},compilerInfo:function(){var e=r.COMPILER_REVISION;return[e,r.REVISION_CHANGES[e]]},appendToBuffer:function(e,t,r){return n.isArray(e)||(e=[e]),e=this.source.wrap(e,t),this.environment.isSimple?["return ",e,";"]:r?["buffer += ",e,";"]:(e.appendToBuffer=!0,e)},initializeBuffer:function(){return this.quotedString("")},internalNameLookup:function(e,t){return this.lookupPropertyFunctionIsUsed=!0,["lookupProperty(",e,",",JSON.stringify(t),")"]},lookupPropertyFunctionIsUsed:!1,compile:function(e,t,r,n){this.environment=e,this.options=t,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!n,this.name=this.environment.name,this.isChild=!!r,this.context=r||{decorators:[],programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(e,t),this.useDepths=this.useDepths||e.useDepths||e.useDecorators||this.options.compat,this.useBlockParams=this.useBlockParams||e.useBlockParams;for(var o,a=e.opcodes,i=void 0,s=void 0,l=void 0,s=0,l=a.length;s<l;s++)this.source.currentLocation=(o=a[s]).loc,i=i||o.loc,this[o.opcode].apply(this,o.args);if(this.source.currentLocation=i,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new h.default("Compile completed with content left on stack");this.decorators.isEmpty()?this.decorators=void 0:(this.useDecorators=!0,this.decorators.prepend(["var decorators = container.decorators, ",this.lookupPropertyFunctionVarDeclaration(),";\n"]),this.decorators.push("return fn;"),n?this.decorators=Function.apply(this,["fn","props","container","depth0","data","blockParams","depths",this.decorators.merge()]):(this.decorators.prepend("function(fn, props, container, depth0, data, blockParams, depths) {\n"),this.decorators.push("}\n"),this.decorators=this.decorators.merge()));r=this.createFunctionContext(n);if(this.isChild)return r;var u={compiler:this.compilerInfo(),main:r},e=(this.decorators&&(u.main_d=this.decorators,u.useDecorators=!0),this.context),c=e.programs,p=e.decorators;for(s=0,l=c.length;s<l;s++)c[s]&&(u[s]=c[s],p[s])&&(u[s+"_d"]=p[s],u.useDecorators=!0);return this.environment.usePartial&&(u.usePartial=!0),this.options.data&&(u.useData=!0),this.useDepths&&(u.useDepths=!0),this.useBlockParams&&(u.useBlockParams=!0),this.options.compat&&(u.compat=!0),n?u.compilerOptions=this.options:(u.compiler=JSON.stringify(u.compiler),this.source.currentLocation={start:{line:1,column:0}},u=this.objectLiteral(u),t.srcName?(u=u.toStringWithSourceMap({file:t.destName})).map=u.map&&u.map.toString():u=u.toString()),u},preamble:function(){this.lastContext=0,this.source=new o.default(this.options.srcName),this.decorators=new o.default(this.options.srcName)},createFunctionContext:function(e){var r=this,n="",t=this.stackVars.concat(this.registers.list),o=(0<t.length&&(n+=", "+t.join(", ")),0),t=(Object.keys(this.aliases).forEach(function(e){var t=r.aliases[e];t.children&&1<t.referenceCount&&(n+=", alias"+ ++o+"="+e,t.children[0]="alias"+o)}),this.lookupPropertyFunctionIsUsed&&(n+=", "+this.lookupPropertyFunctionVarDeclaration()),["container","depth0","helpers","partials","data"]),a=((this.useBlockParams||this.useDepths)&&t.push("blockParams"),this.useDepths&&t.push("depths"),this.mergeSource(n));return e?(t.push(a),Function.apply(this,t)):this.source.wrap(["function(",t.join(","),") {\n  ",a,"}"])},mergeSource:function(e){var t=this.environment.isSimple,r=!this.forceBuffer,n=void 0,o=void 0,a=void 0,i=void 0;return this.source.each(function(e){e.appendToBuffer?(a?e.prepend("  + "):a=e,i=e):(a&&(o?a.prepend("buffer += "):n=!0,i.add(";"),a=i=void 0),o=!0,t||(r=!1))}),r?a?(a.prepend("return "),i.add(";")):o||this.source.push('return "";'):(e+=", buffer = "+(n?"":this.initializeBuffer()),a?(a.prepend("return buffer + "),i.add(";")):this.source.push("return buffer;")),e&&this.source.prepend("var "+e.substring(2)+(n?"":";\n")),this.source.merge()},lookupPropertyFunctionVarDeclaration:function(){return"\n      lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    }\n    ".trim()},blockValue:function(e){var t=this.aliasable("container.hooks.blockHelperMissing"),r=[this.contextName(0)],e=(this.setupHelperArgs(e,0,r),this.popStack());r.splice(1,0,e),this.push(this.source.functionCall(t,"call",r))},ambiguousBlockValue:function(){var e=this.aliasable("container.hooks.blockHelperMissing"),t=[this.contextName(0)],r=(this.setupHelperArgs("",0,t,!0),this.flushInline(),this.topStack());t.splice(1,0,r),this.pushSource(["if (!",this.lastHelper,") { ",r," = ",this.source.functionCall(e,"call",t),"}"])},appendContent:function(e){this.pendingContent?e=this.pendingContent+e:this.pendingLocation=this.source.currentLocation,this.pendingContent=e},append:function(){var e;this.isInline()?(this.replaceStack(function(e){return[" != null ? ",e,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()))):(e=this.popStack(),this.pushSource(["if (",e," != null) { ",this.appendToBuffer(e,void 0,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",void 0,!0)," }"]))},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("container.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(e){this.lastContext=e},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(e,t,r,n){var o=0;n||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(e[o++])),this.resolvePath("context",e,o,t,r)},lookupBlockParam:function(e,t){this.useBlockParams=!0,this.push(["blockParams[",e[0],"][",e[1],"]"]),this.resolvePath("context",t,1)},lookupData:function(e,t,r){this.pushStackLiteral(e?"container.data(data, "+e+")":"data"),this.resolvePath("data",t,0,!0,r)},resolvePath:function(r,n,o,a,e){var i=this;if(this.options.strict||this.options.assumeObjects)this.push(function(e,t,r,n,o){var a=t.popStack(),i=r.length;for(e&&i--;n<i;n++)a=t.nameLookup(a,r[n],o);return e?[t.aliasable("container.strict"),"(",a,", ",t.quotedString(r[n]),", ",JSON.stringify(t.source.currentLocation)," )"]:a}(this.options.strict&&e,this,n,o,r));else for(var t=n.length;o<t;o++)this.replaceStack(function(e){var t=i.nameLookup(e,n[o],r);return a?[" && ",t]:[" != null ? ",t," : ",e]})},resolvePossibleLambda:function(){this.push([this.aliasable("container.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(e,t){this.pushContext(),this.pushString(t),"SubExpression"!==t&&("string"==typeof e?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(e){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(e?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:{},types:[],contexts:[],ids:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(e.ids)),this.stringParams&&(this.push(this.objectLiteral(e.contexts)),this.push(this.objectLiteral(e.types))),this.push(this.objectLiteral(e.values))},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){this.pushStackLiteral(null!=e?this.programExpression(e):null)},registerDecorator:function(e,t){var r=this.nameLookup("decorators",t,"decorator"),t=this.setupHelperArgs(t,e);this.decorators.push(["fn = ",this.decorators.functionCall(r,"",["fn","props","container",t])," || fn;"])},invokeHelper:function(e,t,r){var n=this.popStack(),e=this.setupHelper(e,t),t=[],r=(r&&t.push(e.name),t.push(n),this.options.strict||t.push(this.aliasable("container.hooks.helperMissing")),["(",this.itemsSeparatedBy(t,"||"),")"]),n=this.source.functionCall(r,"call",e.callParams);this.push(n)},itemsSeparatedBy:function(e,t){var r=[];r.push(e[0]);for(var n=1;n<e.length;n++)r.push(t,e[n]);return r},invokeKnownHelper:function(e,t){e=this.setupHelper(e,t);this.push(this.source.functionCall(e.name,"call",e.callParams))},invokeAmbiguous:function(e,t){this.useRegister("helper");var r=this.popStack(),t=(this.emptyHash(),this.setupHelper(0,e,t)),e=["(","(helper = ",this.lastHelper=this.nameLookup("helpers",e,"helper")," || ",r,")"];this.options.strict||(e[0]="(helper = ",e.push(" != null ? helper : ",this.aliasable("container.hooks.helperMissing"))),this.push(["(",e,t.paramsInit?["),(",t.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",t.callParams)," : helper))"])},invokePartial:function(e,t,r){var n=[],o=this.setupParams(t,1,n);e&&(t=this.popStack(),delete o.name),r&&(o.indent=JSON.stringify(r)),o.helpers="helpers",o.partials="partials",o.decorators="container.decorators",n.unshift(e?t:this.nameLookup("partials",t,"partial")),this.options.compat&&(o.depths="depths"),o=this.objectLiteral(o),n.push(o),this.push(this.source.functionCall("container.invokePartial","",n))},assignToHash:function(e){var t=this.popStack(),r=void 0,n=void 0,o=void 0,a=(this.trackIds&&(o=this.popStack()),this.stringParams&&(n=this.popStack(),r=this.popStack()),this.hash);r&&(a.contexts[e]=r),n&&(a.types[e]=n),o&&(a.ids[e]=o),a.values[e]=t},pushId:function(e,t,r){"BlockParam"===e?this.pushStackLiteral("blockParams["+t[0]+"].path["+t[1]+"]"+(r?" + "+JSON.stringify("."+r):"")):"PathExpression"===e?this.pushString(t):this.pushStackLiteral("SubExpression"===e?"true":"null")},compiler:JavaScriptCompiler,compileChildren:function(e,t){for(var r=e.children,n=void 0,o=void 0,a=0,i=r.length;a<i;a++){var s,n=r[a],o=new this.compiler,l=this.matchExistingProgram(n);null==l?(this.context.programs.push(""),n.index=s=this.context.programs.length,n.name="program"+s,this.context.programs[s]=o.compile(n,t,this.context,!this.precompile),this.context.decorators[s]=o.decorators,this.context.environments[s]=n,this.useDepths=this.useDepths||o.useDepths,this.useBlockParams=this.useBlockParams||o.useBlockParams,n.useDepths=this.useDepths,n.useBlockParams=this.useBlockParams):(n.index=l.index,n.name="program"+l.index,this.useDepths=this.useDepths||l.useDepths,this.useBlockParams=this.useBlockParams||l.useBlockParams)}},matchExistingProgram:function(e){for(var t=0,r=this.context.environments.length;t<r;t++){var n=this.context.environments[t];if(n&&n.equals(e))return n}},programExpression:function(e){e=this.environment.children[e],e=[e.index,"data",e.blockParams];return(this.useBlockParams||this.useDepths)&&e.push("blockParams"),this.useDepths&&e.push("depths"),"container.program("+e.join(", ")+")"},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},push:function(e){return e instanceof Literal||(e=this.source.wrap(e)),this.inlineStack.push(e),e},pushStackLiteral:function(e){this.push(new Literal(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=void 0),e&&this.source.push(e)},replaceStack:function(e){var t=["("],r=void 0,n=void 0,o=void 0;if(!this.isInline())throw new h.default("replaceStack on non-inline");var a=this.popStack(!0),i=(a instanceof Literal?(t=["(",r=[a.value]],o=!0):(n=!0,i=this.incrStack(),t=["((",this.push(i)," = ",a,")"],r=this.topStack()),e.call(this,r));o||this.popStack(),n&&this.stackSlot--,this.push(t.concat(i,")"))},incrStack:function(){return this.stackSlot++,this.stackVars.length<this.stackSlot&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;this.inlineStack=[];for(var t=0,r=e.length;t<r;t++){var n,o=e[t];o instanceof Literal?this.compileStack.push(o):(n=this.incrStack(),this.pushSource([n," = ",o,";"]),this.compileStack.push(n))}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),r=(t?this.inlineStack:this.compileStack).pop();if(!e&&r instanceof Literal)return r.value;if(!t){if(!this.stackSlot)throw new h.default("Invalid stack pop");this.stackSlot--}return r},topStack:function(){var e=this.isInline()?this.inlineStack:this.compileStack,e=e[e.length-1];return e instanceof Literal?e.value:e},contextName:function(e){return this.useDepths&&e?"depths["+e+"]":"depth"+e},quotedString:function(e){return this.source.quotedString(e)},objectLiteral:function(e){return this.source.objectLiteral(e)},aliasable:function(e){var t=this.aliases[e];return t?t.referenceCount++:((t=this.aliases[e]=this.source.wrap(e)).aliasable=!0,t.referenceCount=1),t},setupHelper:function(e,t,r){var n=[];return{params:n,paramsInit:this.setupHelperArgs(t,e,n,r),name:this.nameLookup("helpers",t,"helper"),callParams:[this.aliasable(this.contextName(0)+" != null ? "+this.contextName(0)+" : (container.nullContext || {})")].concat(n)}},setupParams:function(e,t,r){var n,o={},a=[],i=[],s=[],l=!r,e=(l&&(r=[]),o.name=this.quotedString(e),o.hash=this.popStack(),this.trackIds&&(o.hashIds=this.popStack()),this.stringParams&&(o.hashTypes=this.popStack(),o.hashContexts=this.popStack()),this.popStack()),u=this.popStack();(u||e)&&(o.fn=u||"container.noop",o.inverse=e||"container.noop");for(var c=t;c--;)n=this.popStack(),r[c]=n,this.trackIds&&(s[c]=this.popStack()),this.stringParams&&(i[c]=this.popStack(),a[c]=this.popStack());return l&&(o.args=this.source.generateArray(r)),this.trackIds&&(o.ids=this.source.generateArray(s)),this.stringParams&&(o.types=this.source.generateArray(i),o.contexts=this.source.generateArray(a)),this.options.data&&(o.data="data"),this.useBlockParams&&(o.blockParams="blockParams"),o},setupHelperArgs:function(e,t,r,n){e=this.setupParams(e,t,r);return e.loc=JSON.stringify(this.source.currentLocation),e=this.objectLiteral(e),n?(this.useRegister("options"),r.push("options"),["options=",e]):r?(r.push(e),""):e}};for(var a="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),i=JavaScriptCompiler.RESERVED_WORDS={},s=0,l=a.length;s<l;s++)i[a[s]]=!0;JavaScriptCompiler.isValidJavaScriptVariableName=function(e){return!JavaScriptCompiler.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)},t.default=JavaScriptCompiler,e.exports=t.default}return javascriptCompiler.exports}function requireHandlebars(){function _interopRequireDefault(e){return e&&e.te?e:{default:e}}function create(){var r=l();return r.compile=function(e,t){return a.compile(e,t,r)},r.precompile=function(e,t){return a.precompile(e,t,r)},r.AST=n.default,r.Compiler=a.Compiler,r.JavaScriptCompiler=i.default,r.Parser=o.parser,r.parse=o.parse,r.parseWithoutProcessing=o.parseWithoutProcessing,r}return hasRequiredHandlebars||(hasRequiredHandlebars=1,(t=(e=handlebars).exports).te=!0,u=_interopRequireDefault(requireHandlebars_runtime()),n=_interopRequireDefault(requireAst()),o=requireBase(),a=requireCompiler(),i=_interopRequireDefault(requireJavascriptCompiler()),r=_interopRequireDefault(requireVisitor()),s=_interopRequireDefault(requireNoConflict()),l=u.default.create,(u=create()).create=create,s.default(u),u.Visitor=r.default,t.default=u.default=u,e.exports=t.default),handlebars.exports;var e,t,n,o,a,i,r,s,l,u}function process(e=document){Debug.debug("Processing with FP_SELECTOR:",ProcessingChain.FP_SELECTOR),e!==document&&e.matches(ProcessingChain.FP_SELECTOR)?ProcessingChain.processElement(e):(e=e.querySelectorAll(ProcessingChain.FP_SELECTOR),Debug.debug("Found elements to process:",e.length),e.forEach(e=>ProcessingChain.processElement(e)))}const Debug={level:1,levels:{ERROR:0,WARN:1,INFO:2,DEBUG:3},log:function(e,...t){if(e<=this.level){var r=["ERROR","WARN","INFO","DEBUG"][e];switch(r){case"ERROR":console.error(`FlowPlater [${r}]:`,...t);break;case"WARN":console.warn(`FlowPlater [${r}]:`,...t);break;case"DEBUG":console.debug(`FlowPlater [${r}]:`,...t);break;default:console.log(`FlowPlater [${r}]:`,...t)}}},error:function(...e){this.log(this.levels.ERROR,...e)},warn:function(...e){this.log(this.levels.WARN,...e)},info:function(...e){this.log(this.levels.INFO,...e)},debug:function(...e){this.log(this.levels.DEBUG,...e)}};class FlowPlaterError extends Error{constructor(e,t){super(e),this.name="FlowPlaterError",void 0!==t&&(this.stack=t)}}class TemplateError extends FlowPlaterError{constructor(e,t){super(`Template Error${void 0!==t?" in "+t:""}: `+e),this.name="TemplateError"}}const EventSystem=function(){const a=new Map;return{subscribe(e,t,r=null){return e&&"string"==typeof e||new FlowPlaterError("Invalid event name. Event name must be a non-empty string.",(new Error).stack),t&&"function"==typeof t||new FlowPlaterError(`Invalid callback for event "${e}". Callback must be a function.`,(new Error).stack),a.has(e)||a.set(e,[]),a.get(e).push({callback:t,context:r}),Debug.debug("Subscribed to event: "+e),()=>this.unsubscribe(e,t)},unsubscribe(e,t){var r;e&&"string"==typeof e||new FlowPlaterError("Invalid event name. Event name must be a non-empty string. If you are trying to unsubscribe from all events, use unsubscribeAll() instead.",(new Error).stack),a.has(e)&&(r=a.get(e),a.set(e,r.filter(e=>e.callback!==t)))},unsubscribeAll(){a.clear(),Debug.info("Cleared all event subscribers")},publish(r,n=null){if(a.has(r)&&(a.get(r).forEach(({callback:e,context:t})=>{try{e.call(t,n)}catch(e){Debug.error(`Error in event subscriber for ${r}:`,e)}}),n)&&n.instanceName){const o=n.instanceName+":"+r;a.has(o)&&a.get(o).forEach(({callback:e,context:t})=>{try{e.call(t,n)}catch(e){Debug.error(`Error in instance event subscriber for ${o}:`,e)}})}}}}(),Performance={marks:{},start:function(e){this.marks[e]=performance.now()},end:function(e){var t;if(this.marks[e])return t=performance.now()-this.marks[e],delete this.marks[e],Debug.debug(`${e} took ${t.toFixed(2)}ms`),t}},_state={templateCache:{},instances:{},groups:{},length:0,initialized:!1,defaults:{animation:!1,debug:!1},config:{},i:{}},_readyState={isReady:!1,queue:[],plugins:new Set,hasPluginsRegistered:!1,processQueue(){for(Debug.debug(`Processing ${this.queue.length} queued operations`);0<this.queue.length;){var e=this.queue.shift();try{e()}catch(e){Debug.error("Error processing queued operation:",e)}}},enqueue(e){if(this.isReady)try{e()}catch(e){Debug.error("Error executing operation:",e)}else this.queue.push(e)},markReady(){0!==this.plugins.size||this.hasPluginsRegistered||Debug.info("No plugins registered, proceeding with initialization"),this.isReady=!0,this.processQueue()},registerPlugin(e){this.hasPluginsRegistered=!0,this.plugins.add(e),Debug.debug(`Plugin registered: ${e}, total plugins: `+this.plugins.size)},unregisterPlugin(e){var t=this.plugins.delete(e);return t?(Debug.debug(`Plugin unregistered: ${e}, remaining plugins: `+this.plugins.size),0===this.plugins.size&&(this.hasPluginsRegistered=!1,Debug.debug("All plugins unregistered, reset plugin registration state"))):Debug.warn("Attempted to unregister non-existent plugin: "+e),t},reset(e=!0){this.queue=[],this.plugins.clear(),this.hasPluginsRegistered=!1,e?Debug.info("ReadyState reset but maintains ready status for new plugins"):(this.isReady=!1,Debug.info("ReadyState completely reset, FlowPlater needs re-initialization"))},cleanup(){this.reset(!1),Debug.info("FlowPlater ReadyState cleaned up completely")}},AttributeMatcher={INHERITABLE_ATTRIBUTES:{"hx-":["boost","push-url","select","select-oob","swap","target","vals","confirm","disable","disabled-elt","encoding","ext","headers","include","indicator","params","prompt","replace-url","request","sync","vars"],"fp-":["prepend","append","persist","target"]},o(){return Object.keys(this.INHERITABLE_ATTRIBUTES)},u:e=>e.replace(/^(hx-|fp-)/,"").replace(/^data-/,""),h(e){var t=this.u(e),r=[];for(const e of this.o())r.push(""+e+t),r.push("data-"+e+t);return r},m(e,t,r=null){for(const r of this.h(t)){const t=e.getAttribute(r);if(null!==t)return t}return r},v(t,e){return this.h(e).some(e=>t.hasAttribute(e))},findMatchingElements(t,e=null,r=!0,n=document,o=!0,a=!1){var i=this.h(t);let s=i.map(e=>`[${e}]`).join(",");if(null!=e){const t=r?`="${e}"`:`*="${e}"`;s=i.map(e=>`[${e}${t}]`).join(",")}i=Array.from(n.querySelectorAll(s));if(o&&n instanceof Element){const o=this.m(n,t);null===o||null!=e&&(r?o!==e:!o.includes(e))||i.unshift(n)}return null!=e&&a?i[0]:i},findClosestParent(t,e,r=null,n=!0){if(!t)return Debug.error("Attribute name is required"),null;if(!e)return Debug.error("Element is required to find closest parent ("+t+")"),null;var o=this.u(t),a=this.h(o);let i=a.map(e=>`[${e}]`).join(",");if(null!=r){const t=n?`="${r}"`:`*="${r}"`;i=a.map(e=>`[${e}${t}]`).join(",")}n=e.closest(i);if(n&&this.isInheritable(o)){const t=this.m(n,"disinherit");if(t&&("*"===t||t.split(" ").includes(o)))return null}return n},getElementWithAttribute(e,t=document,r=!0){return r&&t instanceof Element&&this.v(t,e)?t:(r=this.h(e).map(e=>`[${e}]`).join(","),t.querySelector(r))},S(e){var t=e.parentElement;return!t&&e.parentNode instanceof ShadowRoot?e.parentNode:t},C:(e,t=!1)=>e.getRootNode?e.getRootNode({composed:t}):document,D(e,t){for(;e&&!t(e);)e=this.S(e);return e||null},M:(e,t)=>e.replace(/^data-/,"").replace(/^hx-/,"").replace(/^fp-/,"")===t,A(e,t,r){var n=this.m(t,r),o=this.m(t,"disinherit"),a=this.m(t,"inherit");if(e!==t){if(htmx.config.disableInheritance)return a&&("*"===a||a.split(" ").includes(r))?n:null;if(o&&("*"===o||o.split(" ").includes(r)))return"unset"}return n},findInheritedAttribute(t,e){const r=this.u(e);let n=null;return this.D(t,e=>{e=this.A(t,e,r);return!!e&&(n=e,!0)}),"unset"===n?null:n},findAttribute(e,t){var r=this.u(t);for(const t of this.o()){var n=this.m(e,""+t+r);if(n)return n}return this.findInheritedAttribute(e,r)||null},P(e){return e?!!this.isInheritable(e)||(Debug.info(`Attribute ${e} is not inheritable`),!1):(Debug.error("Attribute name is required"),!1)},addInheritableAttribute(e,t){this.INHERITABLE_ATTRIBUTES[e]||(this.INHERITABLE_ATTRIBUTES[e]=[]),this.INHERITABLE_ATTRIBUTES[e].push(t)},removeInheritableAttribute(e,t){return!!this.INHERITABLE_ATTRIBUTES[e]&&-1!==(t=this.INHERITABLE_ATTRIBUTES[e].indexOf(t))&&(this.INHERITABLE_ATTRIBUTES[e].splice(t,1),!0)},isInheritable(e){e=this.u(e);return Object.values(this.INHERITABLE_ATTRIBUTES).flat().includes(e)}},VersionManager={parseVersion:e=>e.split(".").map(Number),compareVersions(e,t){var r=this.parseVersion(e),n=this.parseVersion(t);for(let e=0;e<3;e++){if(r[e]>n[e])return 1;if(r[e]<n[e])return-1}return 0},satisfiesVersion(e,t){var r;return!(!e||!t)&&([r,e]=e.split("@"),!e||0<=this.compareVersions(t,e))}},PluginManager={plugins:new Map,globalMethods:new Map,instanceMethods:new Map,customTransformers:new Map,registerPlugin(t,e={}){let r;if(!(r="string"==typeof t?window[t]:t))throw new FlowPlaterError("Plugin not found: "+t);if("function"!=typeof r)throw new FlowPlaterError("Plugin must be a valid function");const n=r(e),o=["name","enabled","priority","version"];for(const t of o)if(!(t in n.config))throw new FlowPlaterError(`Plugin config must contain '${t}'`);if(!/^\d+\.\d+\.\d+$/.test(n.config.version))throw new FlowPlaterError(`Plugin version must be in format 'x.y.z' (got ${n.config.version})`);if(this.plugins.has(n.config.name))throw new FlowPlaterError(`Plugin ${n.config.name} already registered`);if(n.config.dependencies)for(const t of n.config.dependencies){const[e,r]=t.split("@"),o=this.getPlugin(e);if(!o)throw new FlowPlaterError(`Required dependency '${e}' not found for plugin `+n.config.name);if(!VersionManager.satisfiesVersion(t,o.config.version))throw new FlowPlaterError(`Plugin ${n.config.name} requires ${e} version ${r||"any"}, but found version `+o.config.version)}if(n.config.optionalDependencies)for(const t of n.config.optionalDependencies){const[e,r]=t.split("@"),o=this.getPlugin(e);o&&!VersionManager.satisfiesVersion(t,o.config.version)&&Debug.warn(`Optional dependency '${e}' version mismatch for plugin ${n.config.name}. Required: ${r||"any"}, Found: `+o.config.version)}if(n.inheritableAttributes&&Array.isArray(n.inheritableAttributes)&&n.inheritableAttributes.forEach(e=>{AttributeMatcher.addInheritableAttribute("fp-",e)}),_readyState.registerPlugin(n.config.name),n.globalMethods)for(const[t,e]of Object.entries(n.globalMethods)){if("function"!=typeof e)throw new FlowPlaterError(`Global method ${t} must be a function`);if(this.globalMethods.has(t)){const e=this.globalMethods.get(t);throw new FlowPlaterError(`Global method ${t} already registered by plugin `+e.plugin)}this.globalMethods.set(t,{method:e,plugin:n.config.name}),"undefined"!=typeof window&&window.FlowPlater&&(window.FlowPlater[t]=(...e)=>this.executeGlobalMethod(t,...e))}if(n.instanceMethods)for(const[t,e]of Object.entries(n.instanceMethods)){if("function"!=typeof e)throw new FlowPlaterError(`Instance method ${t} must be a function`);if(this.instanceMethods.has(t)){const e=this.instanceMethods.get(t);throw new FlowPlaterError(`Instance method ${t} already registered by plugin `+e.plugin)}this.instanceMethods.set(t,{method:e,plugin:n.config.name})}if(n.helpers&&"object"==typeof n.helpers)for(const[t,e]of Object.entries(n.helpers))if("function"==typeof e)try{Handlebars.registerHelper(t.toLowerCase(),e)}catch(e){Debug.error(`Plugin ${n.config.name} failed registering helper ${t}:`,e)}else Debug.warn(`Plugin ${n.config.name} contains invalid helper ${t}:`,e);if(this.plugins.set(n.config.name,n),_readyState.isReady){if(n.config?.enabled&&"function"==typeof n.init&&n.init(),this.updateExistingInstances(),n.hooks?.initComplete)try{n.hooks.initComplete(window.FlowPlater,Object.values(_state.instances))}catch(t){Debug.error(`Plugin ${n.config.name} failed executing initComplete:`,t)}}else _readyState.queue.push(()=>{if(n.config?.enabled&&"function"==typeof n.init&&n.init(),this.updateExistingInstances(),n.hooks?.initComplete)try{n.hooks.initComplete(window.FlowPlater,Object.values(_state.instances))}catch(e){Debug.error(`Plugin ${n.config.name} failed executing initComplete:`,e)}});return n},updateExistingInstances(){Object.values(_state.instances).forEach(t=>{for(const[r,e]of this.instanceMethods.entries())t[r]||(t[r]=(...e)=>this.executeInstanceMethod(r,t,...e))})},getPlugin(e){return this.plugins.get(e)},getAllPlugins(){return Array.from(this.plugins.values())},getEnabledPlugins(){return this.getAllPlugins().filter(e=>e.config?.enabled)},removePlugin(e){const t=this.getPlugin(e);if(!t)return!1;t.inheritableAttributes&&Array.isArray(t.inheritableAttributes)&&t.inheritableAttributes.forEach(e=>{AttributeMatcher.removeInheritableAttribute("fp-",e)});const r=new Set;for(const[t,n]of this.instanceMethods.entries())n.plugin===e&&r.add(t);for(const[t,r]of this.globalMethods.entries())r.plugin===e&&(this.globalMethods.delete(t),"undefined"!=typeof window)&&window.FlowPlater&&delete window.FlowPlater[t];for(const[t,r]of this.instanceMethods.entries())r.plugin===e&&this.instanceMethods.delete(t);return Object.values(_state.instances).forEach(t=>{r.forEach(e=>{delete t[e]})}),_readyState.unregisterPlugin(e),this.plugins.delete(e)},disablePlugin(e){e=this.getPlugin(e);return!!e&&!(e.config.enabled=!1)},enablePlugin(e){e=this.getPlugin(e);return!!e&&(e.config.enabled=!0,"function"!=typeof e.init||e.state?.initialized||(e.init(),e.state.initialized=!0),!0)},pluginConfig(e){e=this.getPlugin(e);return e?e.config:null},getSortedPlugins(){return this.getEnabledPlugins().sort((e,t)=>(t.config?.priority||0)-(e.config?.priority||0))},R(e){if(("object"!=typeof e||null===e)&&"string"==typeof e)try{JSON.parse(e)}catch(e){return"html"}return"json"},applyTransformations(o,e,a,i="json"){if(!o||"object"!=typeof o)return Debug.error("Invalid instance provided to applyTransformations"),e;Debug.debug("[Transform] Starting "+a,{instance:o.instanceName,isEvent:e instanceof Event,dataType:typeof e,isProxy:e&&"object"==typeof e&&"toJSON"in e});e=this.getSortedPlugins().reduce((e,t)=>{if(t.transformers&&"function"==typeof t.transformers[a])try{Debug.debug(`[Transform] Applying ${t.config.name}'s `+a,{dataType:typeof e,isEvent:e instanceof Event});var r=(0,t.transformers[a])?.(o,e,i);return null==r?(Debug.warn(`Plugin ${t.config.name} returned undefined/null for ${a}, using original data`),e):e instanceof Event&&r instanceof Event?(Object.assign(e.detail,r.detail),e):(Debug.debug(`[Transform] ${t.config.name}'s transform result:`,{resultType:typeof r,isEvent:r instanceof Event,isProxy:r&&"object"==typeof r&&"toJSON"in r}),r)}catch(e){Debug.error(`Plugin ${t.config.name} failed executing ${a} transformation:`,e)}return e},e);const s=this.customTransformers.get(a)||[];return 0<s.length&&Debug.debug(`[Transform] Applying ${s.length} custom transformers for `+a),e=s.reduce((t,e,r)=>{try{Debug.debug(`[Transform] Applying custom transformer ${r+1}/`+s.length,{dataType:typeof t,isEvent:t instanceof Event});var n=e.call(null,o,t,i);return null==n?(Debug.warn(`Custom transformer returned undefined/null for ${a}, using original data`),t):t instanceof Event&&n instanceof Event?(Object.assign(t.detail,n.detail),t):(Debug.debug(`[Transform] Custom transformer ${r+1} result:`,{resultType:typeof n,isEvent:n instanceof Event,isProxy:n&&"object"==typeof n&&"toJSON"in n}),n)}catch(e){return Debug.error(`Custom transformer failed executing ${a} transformation:`,e),t}},e),Debug.debug("[Transform] Completed "+a,{finalDataType:typeof e,isEvent:e instanceof Event,isProxy:e&&"object"==typeof e&&"toJSON"in e}),e},addTransformer(e,t){if("function"!=typeof t)throw new FlowPlaterError("Transformer must be a function");var r=t.toString();return r.includes("instance")&&r.includes("data")||Debug.warn("Transformer function should accept (instance, data, dataType) parameters"),this.customTransformers.has(e)||this.customTransformers.set(e,[]),this.customTransformers.get(e).push(t),Debug.debug("Added custom transformer for "+e),this},removeTransformer(e,t){var r;return!!this.customTransformers.has(e)&&-1!==(t=(r=this.customTransformers.get(e)).indexOf(t))&&(r.splice(t,1),0===r.length&&this.customTransformers.delete(e),Debug.debug("Removed custom transformer for "+e),!0)},clearTransformers(e){return e?(this.customTransformers.delete(e),Debug.debug("Cleared custom transformers for "+e)):(this.customTransformers.clear(),Debug.debug("Cleared all custom transformers")),this},executeHook(e,...t){Debug.debug("[PLUGIN] Executing hook:",e,t);const r=this.getSortedPlugins();let n=t[0];for(const o of r)if(o.hooks?.[e])try{const r=o.hooks?.[e],a=r?.(...t);void 0!==a?(n=a,t[0]=n):(Debug.warn(`Plugin ${o.config.name} returned undefined for `+e,t[0]),n=t[0])}catch(t){Debug.error(`Plugin ${o.config.name} failed executing ${e}:`,t)}return n},executeGlobalMethod(e,...t){var r=this.globalMethods.get(e);if(!r)throw new FlowPlaterError(`Global method ${e} not found`);e=this.getPlugin(r.plugin);if(e&&e.config?.enabled)return r.method.call(e,...t);throw new FlowPlaterError(`Plugin ${r.plugin} is not enabled`)},executeInstanceMethod(e,t,...r){var n=this.instanceMethods.get(e);if(!n)throw new FlowPlaterError(`Instance method ${e} not found`);e=this.getPlugin(n.plugin);if(e&&e.config?.enabled)return n.method(t,...r);throw new FlowPlaterError(`Plugin ${n.plugin} is not enabled`)},async destroyPlugin(e){var t=this.getPlugin(e);return!!t&&("function"==typeof t.destroy&&await t.destroy(),this.removePlugin(e))},async destroyAll(){var e=this.getAllPlugins();await Promise.all(e.map(e=>"function"==typeof e.destroy?e.destroy():null)),e.forEach(e=>_readyState.unregisterPlugin(e.config.name)),this.plugins.clear(),this.globalMethods.clear(),this.instanceMethods.clear(),Debug.info("All plugins destroyed, FlowPlater remains ready for new plugins")}},customTagList=[{tag:"fpselect",replaceWith:"select"}];let currentCustomTags=customTagList;const defaultConfig={debug:{level:window.location.hostname.endsWith(".webflow.io")||window.location.hostname.endsWith(".canvas.webflow.com")||window.location.hostname.endsWith("localhost")?3:1},selectors:{fp:["template","get","post","put","delete","patch","persist","instance"]},templates:{cacheSize:100,precompile:!0},animation:{enabled:!0,duration:300},htmx:{timeout:1e4,swapStyle:"innerHTML",selfRequestsOnly:!1,ignoreTitle:!0},customTags:customTagList,storage:{enabled:!1,ttl:2592e3},persistForm:!0,allowExecute:!0},ConfigManager=(_state.config=JSON.parse(JSON.stringify(defaultConfig)),{setConfig(e={}){"storage"in e&&(e.storage=normalizeStorageConfig(e.storage,defaultConfig.storage)),_state.config=deepMerge(JSON.parse(JSON.stringify(_state.config)),e),Debug.level=_state.config.debug.level,"undefined"!=typeof htmx&&(htmx.config.timeout=_state.config.htmx.timeout,htmx.config.defaultSwapStyle=_state.config.htmx.swapStyle,htmx.config.selfRequestsOnly=_state.config.htmx.selfRequestsOnly,htmx.config.ignoreTitle=_state.config.htmx.ignoreTitle),e.customTags&&setCustomTags(e.customTags),Debug.info("FlowPlater configuration updated:",this.getConfig())},getConfig:()=>JSON.parse(JSON.stringify(_state.config)),getDefaultConfig:()=>JSON.parse(JSON.stringify(defaultConfig))}),memoizedCompile=(Debug.level=_state.config.debug.level,memoize(function(t){Performance.start("compile:"+t);const l=Handlebars.helpers,e=t.startsWith("#")?t:"#"+t;var r=document.querySelector(e);if(Debug.debug("Trying to compile template: "+t),!r)return Debug.error("Template not found: "+t),Performance.end("compile:"+t),null;if(!_state.templateCache[t]||AttributeMatcher.v(r,"dynamic")&&"false"!==AttributeMatcher.m(r,"dynamic")){Debug.debug("compiling template: "+t);r=function processNode(e){let s="";return e.childNodes.forEach(n=>{if(n.nodeType===Node.TEXT_NODE)s+=n.textContent;else if(n.nodeType===Node.ELEMENT_NODE){var o=n;let r=o.tagName.toLowerCase(),e=AttributeMatcher.m(o,"tag");if(e&&(r=e),o.hasAttribute("fp")||r in l){const n=r,l=o.getAttribute("fp"),t=l?l.split(" ").map(e=>e.replace(/&quot;/g,'"')).join(" "):"",a=processNode(o);switch(n){case"log":case"lookup":case"execute":s+=a?`{{${n} ${a} ${t}}}`:`{{${n} ${t}}}`;break;case"comment":s+=`{{!-- ${t} --}}`;break;case"if":const l=t.replace(/"/g,'\\"');s+=`{{#${n} "${l}"}}${a}{{/${n}}}`;break;case"else":s+=`{{${n}}}`+a;break;case"math":a&&Debug.warn(`FlowPlater: The <${n}> helper does not accept inner content.`),s+=`{{#${n} "${t}"}}`;break;default:s+=`{{#${n} ${t}}}${a}{{/${n}}}`}}else if("else"===o.tagName){const n=processNode(o);s+=`{{${o.tagName.toLowerCase()}}}`+n}else if("template"===o.tagName||"fptemplate"===o.tagName||AttributeMatcher.v(o,"template"))s+=o.outerHTML;else{const n=processNode(o),l=function(e){let t=e.tagName.toLowerCase(),r=AttributeMatcher.m(e,"tag"),n=(r&&(t=r),currentCustomTags.forEach(e=>{t===e.tag&&(t=e.replaceWith)}),"");for(var o of e.attributes)n+=` ${o.name}="${o.value}"`;return`<${t}${n}>`}(o),i=AttributeMatcher.m(o,"val");let e=n,t=(i&&(e=`{{{default ${i} "${n.replace(/"/g,'\\"')}"}}}`),r);currentCustomTags.forEach(e=>{t===e.tag&&(t=e.replaceWith)}),s+=""+l+e+`</${t}>`}}}),s}(r);Debug.debug("Compiling Handlebars template: "+r);try{var n,o=Handlebars.compile(r),a=ConfigManager.getConfig().templates?.cacheSize||100;return Object.keys(_state.templateCache).length>=a&&(n=Object.keys(_state.templateCache)[0],delete _state.templateCache[n],Debug.info("Cache limit reached. Removed template: "+n)),_state.templateCache[t]=o,Performance.end("compile:"+t),o}catch(e){return Debug.error("Template not valid: "+r+" | Error: "+e.message),Performance.end("compile:"+t),null}}return Performance.end("compile:"+t),_state.templateCache[t]})),FormStateManager={isRestoringFormStates:!1,restoreFormStates(e,t){try{var r;this.isRestoringFormStates?Debug.debug("Already restoring form states, skipping"):(this.isRestoringFormStates=!0,r=e.getElementsByTagName("form"),Array.from(r).forEach(e=>this.restoreSingleFormState(e,t||"unknown")))}catch(e){Debug.error("Error restoring form states: "+e.message)}finally{this.isRestoringFormStates=!1}},restoreSingleFormState(e,t){if(!e.id)return!1;const r=this.handleFormStorage(e,{},"load");if(!r)return Debug.debug("No stored state found for form: "+e.id),!1;const n=this.collectDebugInfo(e,"restore",{restoredElements:[],customVisualUpdates:[],skippedElements:[],storageType:this.shouldUseLocalStorage(e)?"localStorage":"sessionStorage"});return this.processFormElements(e,e=>{e.name in r&&(n.restoredElements.push({name:e.name,value:r[e.name]}),this.restoreElementValue(e,r[e.name]))}),Debug.debug("Form state restoration summary for "+e.id,{storageType:n.storageType,source:t||"unknown",restoredElements:n.restoredElements.map(e=>({name:e.name,value:e.value})),updatedCustomVisualStates:n.customVisualUpdates,skippedElements:n.skippedElements}),EventSystem.publish("formState:afterRestore",{formId:e.id,formElement:e,state:r,source:t||"unknown"}),!0},clearFormState(e){try{var t=document.getElementById(e);t&&(this.handleFormStorage(t,{},"clear"),EventSystem.publish("formState:clear",{formId:e,formElement:t}))}catch(e){Debug.error("Error clearing form state: "+e.message)}},collectDebugInfo(e,t,r={}){return{formId:e.id,type:t,persistenceEnabled:this.isPersistenceEnabledForElement(e),restoredElements:r.restoredElements||[],customVisualUpdates:r.customVisualUpdates||[],skippedElements:r.skippedElements||[],storageType:r.storageType}},handleFormStorage(e,t,r="save"){var n=this.shouldUseLocalStorage(e),o="fp_form_"+e.id;if("save"===r)n?saveToLocalStorage(e.id,t,"form"):sessionStorage.setItem(o,JSON.stringify(t));else{if("load"===r)return n?loadFromLocalStorage(e.id,"form"):JSON.parse(sessionStorage.getItem(o)||"{}");"clear"===r&&(n&&localStorage.removeItem(o),sessionStorage.removeItem(o))}},processFormElements(e,t){Array.from(e.elements).forEach(e=>{e.name&&"file"!==e.type&&this.isPersistenceEnabledForElement(e)&&t(e)})},restoreElementValue(e,t){"checkbox"===e.type||"radio"===e.type?(e.checked="true"===t,this.updateCustomVisualState(e)):e instanceof HTMLSelectElement&&e.multiple?Array.from(e.options).forEach(e=>{e.selected=t.includes(e.value)}):e.value=t},updateCustomVisualState(e){var t=e.closest("checkbox"===e.type?".w-checkbox":".w-radio");t&&(t=t.querySelector(`.w-${e.type}-input`))&&(t.checked=e.checked)},isPersistenceEnabledForElement(e){e=AttributeMatcher.findAttribute(e,"persist");return null!==e?"false"!==e:!1!==ConfigManager.getConfig().persistForm},shouldUseLocalStorage:e=>AttributeMatcher.v(e,"persist-local")||!0===ConfigManager.getConfig().storage?.enabled,shouldRestoreForm(e){const t=AttributeMatcher.findMatchingElements("persist","true",!0,e);if(t&&0<t.length)return!0;if("FORM"===e.tagName&&AttributeMatcher.v(e,"persist"))return"false"!==AttributeMatcher.m(e,"persist");var r=e.closest("form");if(r){if("false"===AttributeMatcher.m(r,"persist"))return!1;const e=r.elements;for(const t of e)if(t.name&&"file"!==t.type&&!AttributeMatcher.findClosestParent("persist",t,"false",!0))return!0}r=e.getElementsByTagName("form");for(const e of r)if(this.shouldRestoreForm(e))return!0;return!1}},GroupManager={getOrCreateGroup(n,e={}){var t=_state.groups[n];if(t)return 0<Object.keys(e).length&&(deepMerge(t.data,e),Debug.debug("[GroupManager] Merged initialData into existing group: "+n,e)),t;let r={};if(ConfigManager.getConfig().storage?.enabled)try{const e=loadFromLocalStorage(n,"group");e?(Debug.info("[GroupManager] Loaded group data from storage for: "+n),r=e):Debug.debug("[GroupManager] No group data found in storage for: "+n)}catch(e){Debug.error(`[GroupManager] Error loading group ${n} from storage: `+e.message)}else Debug.debug("[GroupManager] Storage is disabled, skipping loadFromLocalStorage for: "+n);0<Object.keys(e).length&&(r=deepMerge(r,e),Debug.debug("[GroupManager] Merged initialData onto base for new group: "+n,e)),Debug.info(`[GroupManager] Creating new group: ${n} with base data`,r);const o={name:n,elements:[],addElement:e=>{o.elements.push(e)},removeElement:t=>{o.elements=o.elements.filter(e=>e!==t)},instances:new Set,L:!1,H:new Map,data:{},getData:()=>JSON.parse(JSON.stringify(_state.groups[n].data)),update:e=>{deepMerge(o.data,e)},refresh:()=>{o.update(o.data)},destroy:()=>{delete _state.groups[n]}};return o.data=createDeepProxy(r,async()=>{if(!o.L)try{o.L=!0,Debug.info("[Group Update] Updating all instances in group: "+n);var e=Array.from(o.instances).filter(e=>e.template&&"function"==typeof e.template&&!e.O).map(async t=>{try{const e=PluginManager.applyTransformations(t,o.getData(),"transformDataBeforeRender","json"),r=t.template(e);if(o.H.get(t.instanceName)!==r)return PluginManager.executeHook("updateData",t,{newData:o.data,source:"group"}),EventSystem.publish("updateData",{instanceName:t.instanceName,groupName:n,newData:o.data,source:"group"}),Debug.debug("[Group Update] Updating DOM for "+t.instanceName),t.q().then(()=>{o.H.set(t.instanceName,r)})}catch(e){Debug.error(`Error updating ${t.instanceName}:`,e)}});await Promise.all(e),ConfigManager.getConfig().storage?.enabled&&(Debug.debug("[Group Update] Saving group data for "+n),saveToLocalStorage(n,o.data,"group"))}finally{o.L=!1}}),_state.groups[n]=o,Debug.info("[GroupManager] Created and stored new group: "+n),o},getGroup:e=>_state.groups[e]||null,getAllGroups:()=>_state.groups,updateGroup(e,t){e=this.getGroup(e);return e&&e.data&&"object"==typeof t?(deepMerge(e.data,t),e):null},removeGroup(e){this.getGroup(e)&&(delete _state.groups[e],Debug.info("Removed group: "+e))},removeAllGroups(){_state.groups={},Debug.info("Removed all groups")},addInstanceToGroup(e,t){var r=this.getOrCreateGroup(t);if(r){if(e.groupName=t,r.instances.add(e),e.template&&"function"==typeof e.template){const t=PluginManager.applyTransformations(e,r.getData(),"transformDataBeforeRender","json");try{var n=e.template(t);r.H.set(e.instanceName,n)}catch(e){Debug.error("Error rendering template for group member: "+e.message)}}else Debug.debug("Skipping initial render for group member: template not ready for "+e.instanceName);Debug.debug(`Added instance ${e.instanceName} to group `+t)}},removeInstanceFromGroup(e){var t;e.groupName&&((t=_state.groups[e.groupName])&&(t.instances.delete(e),t.H.delete(e.instanceName),Debug.debug(`Removed instance ${e.instanceName} from group `+e.groupName),0===t.instances.size)&&(delete _state.groups[e.groupName],Debug.info("Removed empty group: "+e.groupName)),delete e.groupName)}},InstanceManager={getOrCreateInstance(l,e={}){if(AttributeMatcher.v(l,"indexed"))return Debug.debug("Element already indexed: "+(l.id||AttributeMatcher.m(l,"instance"))),_state.instances[AttributeMatcher.m(l,"instance")||l.id];const t=AttributeMatcher.m(l,"instance")||l.id;if(!t)return Debug.error("No instance name found for element"),null;var r=AttributeMatcher.m(l,"group");let u=_state.instances[t];if(u)u.elements.includes(l)||u.elements.push(l),l.setAttribute("fp-indexed","true"),Debug.debug("Added element to existing instance: "+t),r&&!u.groupName&&(u.groupName=r,Debug.info(`Added existing instance ${t} to group `+r));else{if(!AttributeMatcher.v(l,"template")){const l=AttributeMatcher.findMatchingElements("template")?.find(e=>AttributeMatcher.m(e,"instance")===t);return l?(Debug.debug("Found parent template element for instance "+t),this.getOrCreateInstance(l,e)):(Debug.error("No template element found for instance "+t),null)}var e={instanceName:t,elements:[l],template:null,templateId:AttributeMatcher.m(l,"template")||"",data:e,cleanup:()=>{u.groupName&&GroupManager.removeInstanceFromGroup(u),u.elements=[]}},n=instanceMethods(t);u=Object.assign(e,n);for(const[l]of PluginManager.instanceMethods.entries())u[l]=(...e)=>PluginManager.executeInstanceMethod(l,u,...e);_state.instances[t]=u,PluginManager.executeHook("newInstance",u),Debug.info("Created new instance: "+t),AttributeMatcher.findMatchingElements("instance",t).forEach(n=>{if(n!==l){const l=AttributeMatcher.findInheritedAttribute(n,"target");if(l){let r=[];switch(!0){case"this"===l:r=[n];break;case l.startsWith("closest "):const s=l.substring(8),u=n.closest(s);u&&(r=[u]);break;case l.startsWith("find "):var o=l.substring(5),o=n.querySelector(o);o&&(r=[o]);break;case"next"===l:o=n.nextElementSibling;o&&(r=[o]);break;case l.startsWith("next "):var a=l.substring(5);let e=n.nextElementSibling;for(;e;){if(e.matches(a)){r=[e];break}e=e.nextElementSibling}break;case"previous"===l:o=n.previousElementSibling;o&&(r=[o]);break;case l.startsWith("previous "):var i=l.substring(9);let t=n.previousElementSibling;for(;t;){if(t.matches(i)){r=[t];break}t=t.previousElementSibling}break;default:r=Array.from(document.querySelectorAll(l))}r.forEach(e=>{u.elements.includes(e)||u.elements.push(e),e.setAttribute("fp-indexed","true")})}else u.elements.includes(n)||u.elements.push(n);n.setAttribute("fp-indexed","true")}}),l.setAttribute("fp-indexed","true"),r&&(u.groupName=r,Debug.info(`Instance ${t} will be added to group `+r))}return u},updateInstanceData(e,t){e&&e.data?deepMerge(e.data,t):Debug.error("Cannot update data: Instance or instance.data is invalid.")}};Lexer.categories={op:"[+*/^]|-(?!\\d)",num:"-?\\d+(?:\\.\\d+)?%?",group:"[\\[()\\]]",sep:",",ident:"\\b(ans|pi|e)\\b",func:"\\b(sqrt|abs|log|ln|sin|cos|tan|min|max)\\b"},Lexer.lang=[Lexer.categories.op,Lexer.categories.num,Lexer.categories.group,Lexer.categories.sep,Lexer.categories.ident,Lexer.categories.func].join("|"),Lexer.cat={INT:"num",IDENT:"ident",PCNT:"num",FUNC:"func",SEP:"sep"};class Calc{constructor(){Object.defineProperty(this,"stack",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"w",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"l",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.stack=[],this.w=null,this.l=null}B(){var e=this.l.next();return e.done?null:e.value}exec(e){try{if(this.l=Lexer(e),this.w=this.B(),!this.e())throw new SyntaxError(this.w?this.w.token:"Unexpected end of expression");if(null!==this.w)throw new SyntaxError("Unexpected token: "+this.w.token);return Calc.ans=this.stack.pop()}catch(e){throw Debug.error("Error in expression evaluation:",e),e}}j(e){return this.w&&e===this.w.token}z(){var e;return!!this.U(this.V,"abs","|","|")||(this.w&&["INT","IDENT","PCNT"].some(e=>Lexer.cat[e]===this.w.category)?(this.stack.push(Calc.W(this.w)),this.w=this.B(),!0):this.w&&this.w.category===Lexer.cat.FUNC?(e=this.w.token,this.w=this.B(),"min"===e||"max"===e?this.G(this.V,e):this.U(this.V,e)):!!this.U(this.V,"abs","|","|"))}G(e,t,r="(",n=")"){if(this.w&&this.w.token===r){this.w=this.B();for(var o=[];null!==this.w&&this.e()&&(o.push(this.stack.pop()),this.w)&&"sep"===this.w.category;)this.w=this.B();if(this.w&&this.w.token===n)return this.w=this.B(),e instanceof Function&&e.call(this,t,o),!0}return!1}J(e,t){return e.call(this)&&t.call(this)}X(e,t,r,n){if(this.w&&e.some(e=>e===this.w.token)){var e=this.w.token,o=this.stack.pop();if(this.w=this.B(),t.call(this))return t=this.stack.pop(),this.stack.push(Calc.K(e)(o,t)),r.call(this)}else if(!this.w||n.some(e=>e===this.w.token))return!0;return!1}e(){if(!this.t())return!1;for(;this.w&&("+"===this.w.token||"-"===this.w.token);){var e=this.w.token;if(this.w=this.B(),!this.t())return!1;var t=this.stack.pop(),r=this.stack.pop();this.stack.push(Calc.K(e)(r,t))}return!0}t(){let e=this.f();for(;this.w&&("*"===this.w.token||"/"===this.w.token);){const e=this.w.token;if(this.w=this.B(),!this.f())return!1;var t=this.stack.pop(),r=this.stack.pop();this.stack.push(Calc.K(e)(r,t))}return e}f(){var e;return this.w&&"-"===this.w.token?(this.w=this.B(),!!this.z()&&(e=this.stack.pop(),this.stack.push(-e),!0)):this.z()}ep(){return this.X(["+","-"],this.p,this.ep,[")","|",","])}p(){return this.J(this.x,this.pp)}pp(){return this.X(["*","/"],this.x,this.pp,["+","-",")","|",","])}x(){return this.J(this.z,this.xp)}xp(){return this.X(["^"],this.z,this.xp,["*","/","+","-",")","|",","])}U(e,t,r="(",n=")"){return!(!this.w||this.w.token!==r||(this.w=this.B(),!this.e())||!this.w||this.w.token!==n||(this.w=this.B(),e instanceof Function&&e.call(this,t),0))}V(e,t){if(t)this.stack.push(Calc.Y(e).apply(null,t));else{const t=this.stack.pop();if(void 0===t)throw new Error(`Function ${e} requires an argument`);this.stack.push(Calc.Y(e)(t))}}static Y(e){switch(e){case"sqrt":return Math.sqrt;case"log":return Math.log10;case"ln":return Math.log;case"abs":return Math.abs;case"min":return Math.min;case"max":return Math.max;case"sin":return Math.sin;case"cos":return Math.cos;case"tan":return Math.tan;default:throw new Error("Unknown function: "+e)}}static W(e){var t;return e.category===Lexer.cat.INT||e.category===Lexer.cat.PCNT?(t=parseFloat(e.token),e.token.endsWith("%")&&(t/=100)):e.category===Lexer.cat.IDENT&&("pi"===e.token?t=Math.PI:"e"===e.token?t=Math.E:"ans"===e.token&&(t=this.ans)),t}static K(e){switch(e){case"+":return(e,t)=>e+t;case"-":return(e,t)=>e-t;case"*":return(e,t)=>e*t;case"/":return(e,t)=>e/t;case"^":return(e,t)=>Math.pow(e,t);default:throw new Error("Unknown operator: "+e)}}}Calc.ans=0;const ALLOWED_FUNCTIONS=new Map,RequestHandler={processingElements:new Map,currentRequestId:0,generateRequestId(){return`fp-${Date.now()}-`+this.currentRequestId++},handleRequest(e,t,r){if(e&&AttributeMatcher.v(e,"template")){var n=this.processingElements.get(e);switch(t=t||this.generateRequestId(),r){case"start":n&&n.requestId===t||(this.processingElements.set(e,{requestId:t,timestamp:Date.now(),processed:!1}),Debug.debug("Added element to processing set",e,t));break;case"process":return!(!n||n.requestId!==t||(n.processed=!0,this.processingElements.set(e,n),Debug.debug(`Marked request ${t} as processed for `+(e.id||"unknown")),0));case"cleanup":n&&n.requestId===t?(this.processingElements.delete(e),Debug.debug("Cleaned up after request",e,t)):Debug.debug("Skipping cleanup - request mismatch",{current:n?.requestId,received:t})}}},cleanupStale(){var e,t,r=Date.now();for([e,t]of this.processingElements.entries())1e4<r-t.timestamp&&(this.processingElements.delete(e),Debug.debug("Cleaned up stale processing entry",e,t.requestId))},setupEventListeners(){document.body.addEventListener("htmx:beforeRequest",e=>{const t=e.detail.elt,r=e.detail.requestId||this.generateRequestId();e.detail.requestId=r,this.handleRequest(t,r,"start");let n=null,o=null;for(const[e,r]of Object.entries(_state.instances))if(Array.from(r.elements).some(e=>e.contains(t))){n=r,o=e;break}n&&EventSystem.publish("requestStart",{instanceName:o,...e.detail})}),document.body.addEventListener("htmx:beforeSwap",e=>{var t=e.detail.requestId,r=this.processingElements.get(e.detail.elt);r&&r.requestId!==t&&(e.preventDefault(),Debug.debug("Prevented swap - request ID mismatch"))}),document.body.addEventListener("htmx:responseError",e=>{e.detail.failed&&this.handleRequest(e.detail.elt,e.detail.requestId,"cleanup")}),setInterval(()=>this.cleanupStale(),1e4),window.addEventListener("unload",()=>{this.processingElements.clear()})}},htmxAttributes=["boost","get","post","on","push-url","select","select-oob","swap","swap-oob","target","trigger","vals","confirm","delete","disable","disabled-elt","disinherit","encoding","ext","headers","history","history-elt","include","indicator","params","patch","preserve","prompt","put","replace-url","request","sync","validate","vars"];var htmx$2=function(){function parseInterval(e){if(null!=e)return e="ms"==e.slice(-2)?parseFloat(e.slice(0,-2)):"s"==e.slice(-1)?1e3*parseFloat(e.slice(0,-1)):"m"==e.slice(-1)?1e3*parseFloat(e.slice(0,-1))*60:parseFloat(e),isNaN(e)?void 0:e}function getRawAttribute(e,t){return e instanceof Element&&e.getAttribute(t)}function hasAttribute(e,t){return!!e.hasAttribute&&(e.hasAttribute(t)||e.hasAttribute("data-"+t))}function getAttributeValue(e,t){return getRawAttribute(e,t)||getRawAttribute(e,"data-"+t)}function parentElt(e){var t=e.parentElement;return!t&&e.parentNode instanceof ShadowRoot?e.parentNode:t}function getDocument(){return document}function getRootNode(e,t){return e.getRootNode?e.getRootNode({composed:t}):getDocument()}function getClosestMatch(e,t){for(;e&&!t(e);)e=parentElt(e);return e||null}function getAttributeValueWithDisinheritance(e,t,r){var n=getAttributeValue(t,r),o=getAttributeValue(t,"hx-disinherit"),a=getAttributeValue(t,"hx-inherit");if(e!==t){if(htmx.config.disableInheritance)return a&&("*"===a||0<=a.split(" ").indexOf(r))?n:null;if(o&&("*"===o||0<=o.split(" ").indexOf(r)))return"unset"}return n}function getClosestAttributeValue(t,r){let n=null;if(getClosestMatch(t,function(e){return!!(n=getAttributeValueWithDisinheritance(t,asElement(e),r))}),"unset"!==n)return n}function matches(e,t){var r=e instanceof Element&&(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector);return r&&r.call(e,t)}function getStartTag(e){e=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i.exec(e);return e?e[1].toLowerCase():""}function parseHTML(e){return(new DOMParser).parseFromString(e,"text/html")}function takeChildrenFor(e,t){for(;0<t.childNodes.length;)e.append(t.childNodes[0])}function duplicateScript(e){const t=getDocument().createElement("script");return forEach(e.attributes,function(e){t.setAttribute(e.name,e.value)}),t.textContent=e.textContent,t.async=!1,htmx.config.inlineScriptNonce&&(t.nonce=htmx.config.inlineScriptNonce),t}function isJavaScriptScriptNode(e){return e.matches("script")&&("text/javascript"===e.type||"module"===e.type||""===e.type)}function normalizeScriptTags(e){Array.from(e.querySelectorAll("script")).forEach(e=>{if(isJavaScriptScriptNode(e)){var t=duplicateScript(e),r=e.parentNode;try{r.insertBefore(t,e)}catch(e){logError(e)}finally{e.remove()}}})}function makeFragment(e){const t=(e=e.toString()).replace(/<head(\s[^>]*)?>[\s\S]*?<\/head>/i,""),r=getStartTag(t);let n;if("html"===r){n=new DocumentFragment;const t=parseHTML(e);takeChildrenFor(n,t.body),n.title=t.title}else if("body"===r){n=new DocumentFragment;const e=parseHTML(t);takeChildrenFor(n,e.body),n.title=e.title}else{const e=parseHTML('<body><template class="internal-htmx-wrapper">'+t+"</template></body>");(n=e.querySelector("template").content).title=e.title;var o=n.querySelector("title");o&&o.parentNode===n&&(o.remove(),n.title=o.innerText)}return n&&(htmx.config.allowScriptTags?normalizeScriptTags(n):n.querySelectorAll("script").forEach(e=>e.remove())),n}function maybeCall(e){e&&e()}function isType(e,t){return Object.prototype.toString.call(e)==="[object "+t+"]"}function isFunction(e){return"function"==typeof e}function isRawObject(e){return isType(e,"Object")}function getInternalData(e){var t="htmx-internal-data",r=e[t];return r||(e[t]={})}function toArray(t){var r=[];if(t)for(let e=0;e<t.length;e++)r.push(t[e]);return r}function forEach(t,r){if(t)for(let e=0;e<t.length;e++)r(t[e])}function isScrolledIntoView(e){e=e.getBoundingClientRect();return e.top<window.innerHeight&&0<=e.bottom}function bodyContains(e){return e.getRootNode({composed:!0})===document}function splitOnWhitespace(e){return e.trim().split(/\s+/)}function mergeObjects(e,t){for(const r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}function parseJSON(e){try{return JSON.parse(e)}catch(e){return logError(e),null}}function canAccessLocalStorage(){var e="htmx:localStorageTest";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}}function normalizePath(t){try{var e=new URL(t);return/^\/$/.test(t=e?e.pathname+e.search:t)?t:t.replace(/\/+$/,"")}catch(e){return t}}function internalEval(str){return maybeEval(getDocument().body,function(){return eval(str)})}function onLoadHelper(t){return htmx.on("htmx:load",function(e){t(e.detail.elt)})}function logAll(){htmx.logger=function(e,t,r){console&&console.log(t,e,r)}}function logNone(){htmx.logger=null}function find(e,t){return"string"!=typeof e?e.querySelector(t):find(getDocument(),e)}function findAll(e,t){return"string"!=typeof e?e.querySelectorAll(t):findAll(getDocument(),e)}function getWindow(){return window}function removeElement(e,t){e=resolveTarget(e),t?getWindow().setTimeout(function(){removeElement(e),e=null},t):parentElt(e).removeChild(e)}function asElement(e){return e instanceof Element?e:null}function asHtmlElement(e){return e instanceof HTMLElement?e:null}function asString(e){return"string"==typeof e?e:null}function asParentNode(e){return e instanceof Element||e instanceof Document||e instanceof DocumentFragment?e:null}function addClassToElement(e,t,r){(e=asElement(resolveTarget(e)))&&(r?getWindow().setTimeout(function(){addClassToElement(e,t),e=null},r):e.classList&&e.classList.add(t))}function removeClassFromElement(e,t,r){let n=asElement(resolveTarget(e));n&&(r?getWindow().setTimeout(function(){removeClassFromElement(n,t),n=null},r):n.classList&&(n.classList.remove(t),0===n.classList.length)&&n.removeAttribute("class"))}function toggleClassOnElement(e,t){(e=resolveTarget(e)).classList.toggle(t)}function takeClassForElement(e,t){forEach((e=resolveTarget(e)).parentElement.children,function(e){removeClassFromElement(e,t)}),addClassToElement(asElement(e),t)}function closest(e,t){if((e=asElement(resolveTarget(e)))&&e.closest)return e.closest(t);do{if(null==e||matches(e,t))return e}while(e=e&&asElement(parentElt(e)));return null}function startsWith(e,t){return e.substring(0,t.length)===t}function endsWith(e,t){return e.substring(e.length-t.length)===t}function normalizeSelector(e){e=e.trim();return startsWith(e,"<")&&endsWith(e,"/>")?e.substring(1,e.length-2):e}function querySelectorAllExt(t,n,r){if(0===n.indexOf("global "))return querySelectorAllExt(t,n.slice(7),!0);t=resolveTarget(t);const o=[];{let t=0,r=0;for(let e=0;e<n.length;e++){const i=n[e];","!==i||0!==t?"<"===i?t++:"/"===i&&e<n.length-1&&">"===n[e+1]&&t--:(o.push(n.substring(r,e)),r=e+1)}r<n.length&&o.push(n.substring(r))}const a=[],i=[];for(;0<o.length;){const n=normalizeSelector(o.shift());let e;0===n.indexOf("closest ")?e=closest(asElement(t),normalizeSelector(n.substr(8))):0===n.indexOf("find ")?e=find(asParentNode(t),normalizeSelector(n.substr(5))):"next"===n||"nextElementSibling"===n?e=asElement(t).nextElementSibling:0===n.indexOf("next ")?e=scanForwardQuery(t,normalizeSelector(n.substr(5)),!!r):"previous"===n||"previousElementSibling"===n?e=asElement(t).previousElementSibling:0===n.indexOf("previous ")?e=scanBackwardsQuery(t,normalizeSelector(n.substr(9)),!!r):"document"===n?e=document:"window"===n?e=window:"body"===n?e=document.body:"root"===n?e=getRootNode(t,!!r):"host"===n?e=t.getRootNode().host:i.push(n),e&&a.push(e)}if(0<i.length){const n=i.join(","),o=asParentNode(getRootNode(t,!!r));a.push(...toArray(o.querySelectorAll(n)))}return a}function querySelectorExt(e,t){return("string"!=typeof e?querySelectorAllExt(e,t):querySelectorAllExt(getDocument().body,e))[0]}function resolveTarget(e,t){return"string"==typeof e?find(asParentNode(t)||document,e):e}function processEventArgs(e,t,r,n){return isFunction(t)?{target:getDocument().body,event:asString(e),listener:t,options:r}:{target:resolveTarget(e),event:asString(t),listener:r,options:n}}function addEventListenerImpl(t,r,n,o){return ready(function(){var e=processEventArgs(t,r,n,o);e.target.addEventListener(e.event,e.listener,e.options)}),isFunction(r)?r:n}function removeEventListenerImpl(t,r,n){return ready(function(){var e=processEventArgs(t,r,n);e.target.removeEventListener(e.event,e.listener)}),isFunction(r)?r:n}function findAttributeTargets(e,t){var r=getClosestAttributeValue(e,t);if(r)return"this"===r?[findThisElement(e,t)]:0===(e=querySelectorAllExt(e,r)).length?(logError('The selector "'+r+'" on '+t+" returned no matches!"),[DUMMY_ELT]):e}function findThisElement(e,t){return asElement(getClosestMatch(e,function(e){return null!=getAttributeValue(asElement(e),t)}))}function getTarget(e){var t=getClosestAttributeValue(e,"hx-target");return t?"this"===t?findThisElement(e,"hx-target"):querySelectorExt(e,t):getInternalData(e).boosted?getDocument().body:e}function shouldSettleAttribute(t){var r=htmx.config.attributesToSettle;for(let e=0;e<r.length;e++)if(t===r[e])return 1}function cloneAttributes(t,r){forEach(t.attributes,function(e){!r.hasAttribute(e.name)&&shouldSettleAttribute(e.name)&&t.removeAttribute(e.name)}),forEach(r.attributes,function(e){shouldSettleAttribute(e.name)&&t.setAttribute(e.name,e.value)})}function isInlineSwap(t,e){var r=getExtensions(e);for(let e=0;e<r.length;e++){var n=r[e];try{if(n.isInlineSwap(t))return 1}catch(t){logError(t)}}return"outerHTML"===t}function oobSwap(e,o,a,t){t=t||getDocument();let r="#"+getRawAttribute(o,"id"),i="outerHTML";"true"!==e&&(0<e.indexOf(":")?(i=e.substring(0,e.indexOf(":")),r=e.substring(e.indexOf(":")+1)):i=e),o.removeAttribute("hx-swap-oob"),o.removeAttribute("data-hx-swap-oob");t=querySelectorAllExt(t,r,!1);return t?(forEach(t,function(e){let t;var r=o.cloneNode(!0);(t=getDocument().createDocumentFragment()).appendChild(r);const n={shouldSwap:!0,target:e,fragment:t=isInlineSwap(i,e)?t:asParentNode(r)};triggerEvent(e,"htmx:oobBeforeSwap",n)&&(e=n.target,n.shouldSwap&&(handlePreservedElements(t),swapWithStyle(i,e,e,t,a),restorePreservedElements()),forEach(a.elts,function(e){triggerEvent(e,"htmx:oobAfterSwap",n)}))}),o.parentNode.removeChild(o)):(o.parentNode.removeChild(o),triggerErrorEvent(getDocument().body,"htmx:oobErrorNoTarget",{content:o})),e}function restorePreservedElements(){const e=find("#--htmx-preserve-pantry--");if(e){for(const t of[...e.children]){const e=find("#"+t.id);e.parentNode.moveBefore(t,e),e.remove()}e.remove()}}function handlePreservedElements(e){forEach(findAll(e,"[hx-preserve], [data-hx-preserve]"),function(e){var t=getAttributeValue(e,"id"),t=getDocument().getElementById(t);if(null!=t)if(e.moveBefore){let e=find("#--htmx-preserve-pantry--");null==e&&(getDocument().body.insertAdjacentHTML("afterend","<div id='--htmx-preserve-pantry--'></div>"),e=find("#--htmx-preserve-pantry--")),e.moveBefore(t,null)}else e.parentNode.replaceChild(t,e)})}function handleAttributes(o,e,a){forEach(e.querySelectorAll("[id]"),function(e){var t=getRawAttribute(e,"id");if(t&&0<t.length){var t=t.replace("'","\\'"),r=e.tagName.replace(":","\\:"),n=asParentNode(o),r=n&&n.querySelector(r+"[id='"+t+"']");if(r&&r!==n){const o=e.cloneNode();cloneAttributes(e,r),a.tasks.push(function(){cloneAttributes(e,o)})}}})}function makeAjaxLoadTask(e){return function(){removeClassFromElement(e,htmx.config.addedClass),processNode(asElement(e)),processFocus(asParentNode(e)),triggerEvent(e,"htmx:load")}}function processFocus(e){var t="[autofocus]",e=asHtmlElement(matches(e,t)?e:e.querySelector(t));null!=e&&e.focus()}function insertNodesBefore(e,t,r,n){for(handleAttributes(e,r,n);0<r.childNodes.length;){var o=r.firstChild;addClassToElement(asElement(o),htmx.config.addedClass),e.insertBefore(o,t),o.nodeType!==Node.TEXT_NODE&&o.nodeType!==Node.COMMENT_NODE&&n.tasks.push(makeAjaxLoadTask(o))}}function stringHash(e,t){let r=0;for(;r<e.length;)t=(t<<5)-t+e.charCodeAt(r++)|0;return t}function attributeHash(t){let r=0;if(t.attributes)for(let e=0;e<t.attributes.length;e++){var n=t.attributes[e];n.value&&(r=stringHash(n.name,r),r=stringHash(n.value,r))}return r}function deInitOnHandlers(t){var r=getInternalData(t);if(r.onHandlers){for(let e=0;e<r.onHandlers.length;e++){var n=r.onHandlers[e];removeEventListenerImpl(t,n.event,n.listener)}delete r.onHandlers}}function deInitNode(e){const t=getInternalData(e);t.timeout&&clearTimeout(t.timeout),t.listenerInfos&&forEach(t.listenerInfos,function(e){e.on&&removeEventListenerImpl(e.on,e.trigger,e.listener)}),deInitOnHandlers(e),forEach(Object.keys(t),function(e){"firstInitCompleted"!==e&&delete t[e]})}function cleanUpElement(e){triggerEvent(e,"htmx:beforeCleanupElement"),deInitNode(e),e.children&&forEach(e.children,function(e){cleanUpElement(e)})}function swapOuterHTML(t,e,r){if(t instanceof Element&&"BODY"===t.tagName)return swapInnerHTML(t,e,r);let n;var o=t.previousSibling,a=parentElt(t);if(a){for(insertNodesBefore(a,t,e,r),n=null==o?a.firstChild:o.nextSibling,r.elts=r.elts.filter(function(e){return e!==t});n&&n!==t;)n instanceof Element&&r.elts.push(n),n=n.nextSibling;cleanUpElement(t),t instanceof Element?t.remove():t.parentNode.removeChild(t)}}function swapAfterBegin(e,t,r){return insertNodesBefore(e,e.firstChild,t,r)}function swapBeforeBegin(e,t,r){return insertNodesBefore(parentElt(e),e,t,r)}function swapBeforeEnd(e,t,r){return insertNodesBefore(e,null,t,r)}function swapAfterEnd(e,t,r){return insertNodesBefore(parentElt(e),e.nextSibling,t,r)}function swapDelete(e){cleanUpElement(e);var t=parentElt(e);if(t)return t.removeChild(e)}function swapInnerHTML(e,t,r){var n=e.firstChild;if(insertNodesBefore(e,n,t,r),n){for(;n.nextSibling;)cleanUpElement(n.nextSibling),e.removeChild(n.nextSibling);cleanUpElement(n),e.removeChild(n)}}function swapWithStyle(t,r,n,o,a){switch(t){case"none":return;case"outerHTML":return swapOuterHTML(n,o,a);case"afterbegin":return swapAfterBegin(n,o,a);case"beforebegin":return swapBeforeBegin(n,o,a);case"beforeend":return swapBeforeEnd(n,o,a);case"afterend":return swapAfterEnd(n,o,a);case"delete":return swapDelete(n);default:var i=getExtensions(r);for(let e=0;e<i.length;e++){var s=i[e];try{const r=s.handleSwap(t,n,o,a);if(r){if(Array.isArray(r))for(let e=0;e<r.length;e++){const n=r[e];n.nodeType!==Node.TEXT_NODE&&n.nodeType!==Node.COMMENT_NODE&&a.tasks.push(makeAjaxLoadTask(n))}return}}catch(t){logError(t)}}"innerHTML"===t?swapInnerHTML(n,o,a):swapWithStyle(htmx.config.defaultSwapStyle,r,n,o,a)}}function findAndSwapOobElements(e,r,n){e=findAll(e,"[hx-swap-oob], [data-hx-swap-oob]");return forEach(e,function(e){var t;htmx.config.allowNestedOobSwaps||null===e.parentElement?null!=(t=getAttributeValue(e,"hx-swap-oob"))&&oobSwap(t,e,r,n):(e.removeAttribute("hx-swap-oob"),e.removeAttribute("data-hx-swap-oob"))}),0<e.length}function swap(n,e,o,t){function Sj(){var e;forEach(s.tasks,function(e){e.call()}),forEach(s.elts,function(e){e.classList&&e.classList.remove(htmx.config.settlingClass),triggerEvent(e,"htmx:afterSettle",t.eventInfo)}),t.anchor&&(e=asElement(resolveTarget("#"+t.anchor)))&&e.scrollIntoView({block:"start",behavior:"auto"}),updateScrollState(s.elts,o),t.afterSettleCallback&&t.afterSettleCallback()}t=t||{},n=resolveTarget(n);const a=t.contextElement?getRootNode(t.contextElement,!1):getDocument(),r=document.activeElement;let i={};try{i={elt:r,start:r?r.selectionStart:null,end:r?r.selectionEnd:null}}catch(n){}const s=makeSettleInfo(n);if("textContent"===o.swapStyle)n.textContent=e;else{let r=makeFragment(e);if(s.title=r.title,t.selectOOB){const n=t.selectOOB.split(",");for(let t=0;t<n.length;t++){const o=n[t].split(":",2);let e=o[0].trim();0===e.indexOf("#")&&(e=e.substring(1));const i=o[1]||"true",l=r.querySelector("#"+e);l&&oobSwap(i,l,s,a)}}if(findAndSwapOobElements(r,s,a),forEach(findAll(r,"template"),function(e){e.content&&findAndSwapOobElements(e.content,s,a)&&e.remove()}),t.select){const n=getDocument().createDocumentFragment();forEach(r.querySelectorAll(t.select),function(e){n.appendChild(e)}),r=n}handlePreservedElements(r),swapWithStyle(o.swapStyle,t.contextElement,n,r,s),restorePreservedElements()}if(i.elt&&!bodyContains(i.elt)&&getRawAttribute(i.elt,"id")){const n=document.getElementById(getRawAttribute(i.elt,"id")),e={preventScroll:void 0!==o.focusScroll?!o.focusScroll:!htmx.config.defaultFocusScroll};if(n){if(i.start&&n.setSelectionRange)try{n.setSelectionRange(i.start,i.end)}catch(n){}n.focus(e)}}n.classList.remove(htmx.config.swappingClass),forEach(s.elts,function(e){e.classList&&e.classList.add(htmx.config.settlingClass),triggerEvent(e,"htmx:afterSwap",t.eventInfo)}),t.afterSwapCallback&&t.afterSwapCallback(),o.ignoreTitle||handleTitle(s.title),0<o.settleDelay?getWindow().setTimeout(Sj,o.settleDelay):Sj()}function handleTriggerHeader(t,r,n){r=t.getResponseHeader(r);if(0===r.indexOf("{")){const t=parseJSON(r);for(const r in t)if(t.hasOwnProperty(r)){let e=t[r];isRawObject(e)?n=void 0!==e.target?e.target:n:e={value:e},triggerEvent(n,r,e)}}else{const t=r.split(",");for(let e=0;e<t.length;e++)triggerEvent(n,t[e].trim(),[])}}function tokenizeString(e){var t=[];let r=0;for(;r<e.length;){if(SYMBOL_START.exec(e.charAt(r))){for(var n=r;SYMBOL_CONT.exec(e.charAt(r+1));)r++;t.push(e.substring(n,r+1))}else if(-1!==STRINGISH_START.indexOf(e.charAt(r))){var o=e.charAt(r),n=r;for(r++;r<e.length&&e.charAt(r)!==o;)"\\"===e.charAt(r)&&r++,r++;t.push(e.substring(n,r+1))}else{const n=e.charAt(r);t.push(n)}r++}return t}function isPossibleRelativeReference(e,t,r){return SYMBOL_START.exec(e.charAt(0))&&"true"!==e&&"false"!==e&&"this"!==e&&e!==r&&"."!==t}function maybeGenerateConditional(n,o,a){if("["===o[0]){o.shift();let e=1,t=" return (function("+a+"){ return (",r=null;for(;0<o.length;){var i=o[0];if("]"===i){if(0==--e){null===r&&(t+="true"),o.shift(),t+=")})";try{const o=maybeEval(n,function(){return Function(t)()},function(){return!0});return o.source=t,o}catch(n){return triggerErrorEvent(getDocument().body,"htmx:syntax:error",{error:n,source:t}),null}}}else"["===i&&e++;isPossibleRelativeReference(i,r,a)?t+="(("+a+"."+i+") ? ("+a+"."+i+") : (window."+i+"))":t+=i,r=o.shift()}}}function consumeUntil(e,t){let r="";for(;0<e.length&&!t.test(e[0]);)r+=e.shift();return r}function consumeCSSSelector(e){let t;return 0<e.length&&COMBINED_SELECTOR_START.test(e[0])?(e.shift(),t=consumeUntil(e,COMBINED_SELECTOR_END).trim(),e.shift()):t=consumeUntil(e,WHITESPACE_OR_COMMA),t}function parseAndCacheTrigger(e,t,r){var n,o=[],a=tokenizeString(t);do{consumeUntil(a,NOT_WHITESPACE);const t=a.length,r=consumeUntil(a,/[,\[\s]/);if(""!==r)if("every"===r){const t={trigger:"every"};consumeUntil(a,NOT_WHITESPACE),t.pollInterval=parseInterval(consumeUntil(a,/[,\[\s]/)),consumeUntil(a,NOT_WHITESPACE),(n=maybeGenerateConditional(e,a,"event"))&&(t.eventFilter=n),o.push(t)}else{const t={trigger:r};for((n=maybeGenerateConditional(e,a,"event"))&&(t.eventFilter=n),consumeUntil(a,NOT_WHITESPACE);0<a.length&&","!==a[0];){const r=a.shift();if("changed"===r)t.changed=!0;else if("once"===r)t.once=!0;else if("consume"===r)t.consume=!0;else if("delay"===r&&":"===a[0])a.shift(),t.delay=parseInterval(consumeUntil(a,WHITESPACE_OR_COMMA));else if("from"===r&&":"===a[0]){if(a.shift(),COMBINED_SELECTOR_START.test(a[0]))var i=consumeCSSSelector(a);else if("closest"===(i=consumeUntil(a,WHITESPACE_OR_COMMA))||"find"===i||"next"===i||"previous"===i){a.shift();const e=consumeCSSSelector(a);0<e.length&&(i+=" "+e)}t.from=i}else"target"===r&&":"===a[0]?(a.shift(),t.target=consumeCSSSelector(a)):"throttle"===r&&":"===a[0]?(a.shift(),t.throttle=parseInterval(consumeUntil(a,WHITESPACE_OR_COMMA))):"queue"===r&&":"===a[0]?(a.shift(),t.queue=consumeUntil(a,WHITESPACE_OR_COMMA)):"root"===r&&":"===a[0]?(a.shift(),t[r]=consumeCSSSelector(a)):"threshold"===r&&":"===a[0]?(a.shift(),t[r]=consumeUntil(a,WHITESPACE_OR_COMMA)):triggerErrorEvent(e,"htmx:syntax:error",{token:a.shift()});consumeUntil(a,NOT_WHITESPACE)}o.push(t)}a.length===t&&triggerErrorEvent(e,"htmx:syntax:error",{token:a.shift()}),consumeUntil(a,NOT_WHITESPACE)}while(","===a[0]&&a.shift());return r&&(r[t]=o),o}function getTriggerSpecs(e){var t,r=getAttributeValue(e,"hx-trigger");let n=[];return r&&(t=htmx.config.triggerSpecsCache,n=t&&t[r]||parseAndCacheTrigger(e,r,t)),0<n.length?n:matches(e,"form")?[{trigger:"submit"}]:!matches(e,'input[type="button"], input[type="submit"]')&&matches(e,INPUT_SELECTOR)?[{trigger:"change"}]:[{trigger:"click"}]}function cancelPolling(e){getInternalData(e).cancelled=!0}function processPolling(e,t,r){const n=getInternalData(e);n.timeout=getWindow().setTimeout(function(){bodyContains(e)&&!0!==n.cancelled&&(maybeFilterEvent(r,e,makeEvent("hx:poll:trigger",{triggerSpec:r,target:e}))||t(e),processPolling(e,t,r))},r.pollInterval)}function isLocalLink(e){return location.hostname===e.hostname&&getRawAttribute(e,"href")&&0!==getRawAttribute(e,"href").indexOf("#")}function eltIsDisabled(e){return closest(e,htmx.config.disableSelector)}function boostElement(t,o,e){if(t instanceof HTMLAnchorElement&&isLocalLink(t)&&(""===t.target||"_self"===t.target)||"FORM"===t.tagName&&"dialog"!==String(getRawAttribute(t,"method")).toLowerCase()){let r,n;if(o.boosted=!0,"A"===t.tagName)r="get",n=getRawAttribute(t,"href");else{const o=getRawAttribute(t,"method");r=o?o.toLowerCase():"get",null!=(n=getRawAttribute(t,"action"))&&""!==n||(n=getDocument().location.href),"get"===r&&n.includes("?")&&(n=n.replace(/\?[^#]+/,""))}e.forEach(function(e){addEventListener(t,function(e,t){e=asElement(e);eltIsDisabled(e)?cleanUpElement(e):issueAjaxRequest(r,n,e,t)},o,e,!0)})}}function shouldCancel(e,t){t=asElement(t);if(t&&("submit"===e.type||"click"===e.type)){if("FORM"===t.tagName)return!0;if(matches(t,'input[type="submit"], button')&&(matches(t,"[form]")||null!==closest(t,"form")))return!0;if(t instanceof HTMLAnchorElement&&t.href&&("#"===t.getAttribute("href")||0!==t.getAttribute("href").indexOf("#")))return!0}return!1}function ignoreBoostedAnchorCtrlClick(e,t){return getInternalData(e).boosted&&e instanceof HTMLAnchorElement&&"click"===t.type&&(t.ctrlKey||t.metaKey)}function maybeFilterEvent(e,t,r){var n=e.eventFilter;if(n)try{return!0!==n.call(t,r)}catch(e){const t=n.source;return triggerErrorEvent(getDocument().body,"htmx:eventFilter:error",{error:e,source:t}),1}}function addEventListener(o,a,e,i,s){const l=getInternalData(o);var t=i.from?querySelectorAllExt(o,i.from):[o];i.changed&&("lastValue"in l||(l.lastValue=new WeakMap),t.forEach(function(e){l.lastValue.has(i)||l.lastValue.set(i,new WeakMap),l.lastValue.get(i).set(e,e.value)})),forEach(t,function(r){const n=function(e){if(bodyContains(o)){if(!ignoreBoostedAnchorCtrlClick(o,e)&&((s||shouldCancel(e,o))&&e.preventDefault(),!maybeFilterEvent(i,o,e))){var t=getInternalData(e);if(t.triggerSpec=i,null==t.handledFor&&(t.handledFor=[]),t.handledFor.indexOf(o)<0&&(t.handledFor.push(o),i.consume&&e.stopPropagation(),!i.target||!e.target||matches(asElement(e.target),i.target))){if(i.once){if(l.triggeredOnce)return;l.triggeredOnce=!0}if(i.changed){const o=event.target,a=o.value,e=l.lastValue.get(i);if(e.has(o)&&e.get(o)===a)return;e.set(o,a)}l.delayed&&clearTimeout(l.delayed),l.throttle||(0<i.throttle?l.throttle||(triggerEvent(o,"htmx:trigger"),a(o,e),l.throttle=getWindow().setTimeout(function(){l.throttle=null},i.throttle)):0<i.delay?l.delayed=getWindow().setTimeout(function(){triggerEvent(o,"htmx:trigger"),a(o,e)},i.delay):(triggerEvent(o,"htmx:trigger"),a(o,e)))}}}else r.removeEventListener(i.trigger,n)};null==e.listenerInfos&&(e.listenerInfos=[]),e.listenerInfos.push({trigger:i.trigger,listener:n,on:r}),r.addEventListener(i.trigger,n)})}function initScrollHandler(){scrollHandler||(scrollHandler=function(){windowIsScrolling=!0},window.addEventListener("scroll",scrollHandler),window.addEventListener("resize",scrollHandler),setInterval(function(){windowIsScrolling&&(windowIsScrolling=!1,forEach(getDocument().querySelectorAll("[hx-trigger*='revealed'],[data-hx-trigger*='revealed']"),function(e){maybeReveal(e)}))},200))}function maybeReveal(e){!hasAttribute(e,"data-hx-revealed")&&isScrolledIntoView(e)&&(e.setAttribute("data-hx-revealed","true"),getInternalData(e).initHash?triggerEvent(e,"revealed"):e.addEventListener("htmx:afterProcessNode",function(){triggerEvent(e,"revealed")},{once:!0}))}function loadImmediately(e,t,r,n){function Bk(){r.loaded||(r.loaded=!0,triggerEvent(e,"htmx:trigger"),t(e))}0<n?getWindow().setTimeout(Bk,n):Bk()}function processVerbs(t,o,e){let a=!1;return forEach(VERBS,function(r){if(hasAttribute(t,"hx-"+r)){const n=getAttributeValue(t,"hx-"+r);a=!0,o.path=n,o.verb=r,e.forEach(function(e){addTriggerHandler(t,e,o,function(e,t){e=asElement(e);closest(e,htmx.config.disableSelector)?cleanUpElement(e):issueAjaxRequest(r,n,e,t)})})}}),a}function addTriggerHandler(r,e,t,n){var o;"revealed"===e.trigger?(initScrollHandler(),addEventListener(r,n,t,e),maybeReveal(asElement(r))):"intersect"===e.trigger?(o={},e.root&&(o.root=querySelectorExt(r,e.root)),e.threshold&&(o.threshold=parseFloat(e.threshold)),new IntersectionObserver(function(t){for(let e=0;e<t.length;e++)if(t[e].isIntersecting){triggerEvent(r,"intersect");break}},o).observe(asElement(r)),addEventListener(asElement(r),n,t,e)):t.firstInitCompleted||"load"!==e.trigger?0<e.pollInterval?(t.polling=!0,processPolling(asElement(r),n,e)):addEventListener(r,n,t,e):maybeFilterEvent(e,r,makeEvent("load",{elt:r}))||loadImmediately(asElement(r),n,t,e.delay)}function shouldProcessHxOn(e){const t=asElement(e);if(t){var r=t.attributes;for(let e=0;e<r.length;e++){const t=r[e].name;if(startsWith(t,"hx-on:")||startsWith(t,"data-hx-on:")||startsWith(t,"hx-on-")||startsWith(t,"data-hx-on-"))return 1}}}function processHXOnRoot(e,t){shouldProcessHxOn(e)&&t.push(asElement(e));for(var r,n=HX_ON_QUERY.evaluate(e);r=n.iterateNext();)t.push(asElement(r))}function findHxOnWildcardElements(e){var t=[];if(e instanceof DocumentFragment)for(const r of e.childNodes)processHXOnRoot(r,t);else processHXOnRoot(e,t);return t}function findElementsToProcess(e){if(e.querySelectorAll){var t=[];for(const e in extensions){var r=extensions[e];r.getSelectors&&(r=r.getSelectors())&&t.push(r)}return e.querySelectorAll(VERB_SELECTOR+", [hx-boost] a, [data-hx-boost] a, a[hx-boost], a[data-hx-boost], form, [type='submit'], [hx-ext], [data-hx-ext], [hx-trigger], [data-hx-trigger]"+t.flat().map(e=>", "+e).join(""))}return[]}function maybeSetLastButtonClicked(e){var t=closest(asElement(e.target),"button, input[type='submit']"),e=getRelatedFormData(e);e&&(e.lastButtonClicked=t)}function maybeUnsetLastButtonClicked(e){e=getRelatedFormData(e);e&&(e.lastButtonClicked=null)}function getRelatedFormData(e){var e=closest(asElement(e.target),"button, input[type='submit']");return e&&(e=resolveTarget("#"+getRawAttribute(e,"form"),e.getRootNode())||closest(e,"form"))?getInternalData(e):void 0}function initButtonTracking(e){e.addEventListener("click",maybeSetLastButtonClicked),e.addEventListener("focusin",maybeSetLastButtonClicked),e.addEventListener("focusout",maybeUnsetLastButtonClicked)}function addHxOnEventHandler(t,e,r){function wl(e){maybeEval(t,function(){eltIsDisabled(t)||(o=o||new Function("event",r)).call(t,e)})}var n=getInternalData(t);let o;Array.isArray(n.onHandlers)||(n.onHandlers=[]),t.addEventListener(e,wl),n.onHandlers.push({event:e,listener:wl})}function processHxOnWildcard(t){deInitOnHandlers(t);for(let e=0;e<t.attributes.length;e++){var r=t.attributes[e].name,n=t.attributes[e].value;if(startsWith(r,"hx-on")||startsWith(r,"data-hx-on")){var o=r.indexOf("-on")+3,a=r.slice(o,o+1);if("-"===a||":"===a){let e=r.slice(o+1);startsWith(e,":")?e="htmx"+e:startsWith(e,"-")?e="htmx:"+e.slice(1):startsWith(e,"htmx-")&&(e="htmx:"+e.slice(5)),addHxOnEventHandler(t,e,n)}}}}function initNode(t){if(closest(t,htmx.config.disableSelector))return cleanUpElement(t);const r=getInternalData(t),e=attributeHash(t);var n;r.initHash!==e&&(deInitNode(t),r.initHash=e,triggerEvent(t,"htmx:beforeProcessNode"),n=getTriggerSpecs(t),processVerbs(t,r,n)||("true"===getClosestAttributeValue(t,"hx-boost")?boostElement(t,r,n):hasAttribute(t,"hx-trigger")&&n.forEach(function(e){addTriggerHandler(t,e,r,function(){})})),("FORM"===t.tagName||"submit"===getRawAttribute(t,"type")&&hasAttribute(t,"form"))&&initButtonTracking(t),r.firstInitCompleted=!0,triggerEvent(t,"htmx:afterProcessNode"))}function processNode(e){closest(e=resolveTarget(e),htmx.config.disableSelector)?cleanUpElement(e):(initNode(e),forEach(findElementsToProcess(e),function(e){initNode(e)}),forEach(findHxOnWildcardElements(e),processHxOnWildcard))}function kebabEventName(e){return e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}function makeEvent(e,t){let r;return window.CustomEvent&&"function"==typeof window.CustomEvent?r=new CustomEvent(e,{bubbles:!0,cancelable:!0,composed:!0,detail:t}):(r=getDocument().createEvent("CustomEvent")).initCustomEvent(e,!0,!0,t),r}function triggerErrorEvent(e,t,r){triggerEvent(e,t,mergeObjects({error:t},r))}function ignoreEventForLogging(e){return"htmx:afterProcessNode"===e}function withExtensions(e,t){forEach(getExtensions(e),function(e){try{t(e)}catch(e){logError(e)}})}function logError(e){console.error?console.error(e):console.log&&console.log("ERROR: ",e)}function triggerEvent(e,t,r){e=resolveTarget(e),(r=null==r?{}:r).elt=e;const n=makeEvent(t,r);htmx.logger&&!ignoreEventForLogging(t)&&htmx.logger(e,t,r),r.error&&(logError(r.error),triggerEvent(e,"htmx:error",{errorInfo:r}));let o=e.dispatchEvent(n);r=kebabEventName(t);if(o&&r!==t){const t=makeEvent(r,n.detail);o=o&&e.dispatchEvent(t)}return withExtensions(asElement(e),function(e){o=o&&!1!==e.onEvent(t,n)&&!n.defaultPrevented}),o}function getHistoryElement(){return getDocument().querySelector("[hx-history-elt],[data-hx-history-elt]")||getDocument().body}function saveToHistoryCache(t,e){if(canAccessLocalStorage()){var e=cleanInnerHtmlForHistory(e),r=getDocument().title,n=window.scrollY;if(htmx.config.historyCacheSize<=0)return localStorage.removeItem("htmx-history-cache");t=normalizePath(t);var o=parseJSON(localStorage.getItem("htmx-history-cache"))||[];for(let e=0;e<o.length;e++)if(o[e].url===t){o.splice(e,1);break}e={url:t,content:e,title:r,scroll:n};for(triggerEvent(getDocument().body,"htmx:historyItemCreated",{item:e,cache:o}),o.push(e);o.length>htmx.config.historyCacheSize;)o.shift();for(;0<o.length;)try{localStorage.setItem("htmx-history-cache",JSON.stringify(o));break}catch(t){triggerErrorEvent(getDocument().body,"htmx:historyCacheError",{cause:t,cache:o}),o.shift()}}}function getCachedHistory(t){if(canAccessLocalStorage()){t=normalizePath(t);var r=parseJSON(localStorage.getItem("htmx-history-cache"))||[];for(let e=0;e<r.length;e++)if(r[e].url===t)return r[e]}return null}function cleanInnerHtmlForHistory(e){const t=htmx.config.requestClass,r=e.cloneNode(!0);return forEach(findAll(r,"."+t),function(e){removeClassFromElement(e,t)}),forEach(findAll(r,"[data-disabled-by-htmx]"),function(e){e.removeAttribute("disabled")}),r.innerHTML}function saveCurrentPageToHistory(){var e=getHistoryElement(),t=currentPathForHistory||location.pathname+location.search;let r;try{r=getDocument().querySelector('[hx-history="false" i],[data-hx-history="false" i]')}catch(e){r=getDocument().querySelector('[hx-history="false"],[data-hx-history="false"]')}r||(triggerEvent(getDocument().body,"htmx:beforeHistorySave",{path:t,historyElt:e}),saveToHistoryCache(t,e)),htmx.config.historyEnabled&&history.replaceState({htmx:!0},getDocument().title,window.location.href)}function pushUrlIntoHistory(e){htmx.config.getCacheBusterParam&&(endsWith(e=e.replace(/org\.htmx\.cache-buster=[^&]*&?/,""),"&")||endsWith(e,"?"))&&(e=e.slice(0,-1)),htmx.config.historyEnabled&&history.pushState({htmx:!0},"",e),currentPathForHistory=e}function replaceUrlInHistory(e){htmx.config.historyEnabled&&history.replaceState({htmx:!0},"",e),currentPathForHistory=e}function settleImmediately(e){forEach(e,function(e){e.call(void 0)})}function loadHistoryFromServer(o){const e=new XMLHttpRequest,a={path:o,xhr:e};triggerEvent(getDocument().body,"htmx:historyCacheMiss",a),e.open("GET",o,!0),e.setRequestHeader("HX-Request","true"),e.setRequestHeader("HX-History-Restore-Request","true"),e.setRequestHeader("HX-Current-URL",getDocument().location.href),e.onload=function(){var e,t,r,n;200<=this.status&&this.status<400?(triggerEvent(getDocument().body,"htmx:historyCacheMissLoad",a),t=(e=makeFragment(this.response)).querySelector("[hx-history-elt],[data-hx-history-elt]")||e,n=makeSettleInfo(r=getHistoryElement()),handleTitle(e.title),handlePreservedElements(e),swapInnerHTML(r,t,n),restorePreservedElements(),settleImmediately(n.tasks),currentPathForHistory=o,triggerEvent(getDocument().body,"htmx:historyRestore",{path:o,cacheMiss:!0,serverResponse:this.response})):triggerErrorEvent(getDocument().body,"htmx:historyCacheMissLoadError",a)},e.send()}function restoreHistory(e){saveCurrentPageToHistory();const t=getCachedHistory(e=e||location.pathname+location.search);var r,n,o;t?(r=makeFragment(t.content),o=makeSettleInfo(n=getHistoryElement()),handleTitle(t.title),handlePreservedElements(r),swapInnerHTML(n,r,o),restorePreservedElements(),settleImmediately(o.tasks),getWindow().setTimeout(function(){window.scrollTo(0,t.scroll)},0),currentPathForHistory=e,triggerEvent(getDocument().body,"htmx:historyRestore",{path:e,item:t})):htmx.config.refreshOnHistoryMiss?window.location.reload(!0):loadHistoryFromServer(e)}function addRequestIndicatorClasses(e){var t=findAttributeTargets(e,"hx-indicator");return forEach(t=null==t?[e]:t,function(e){var t=getInternalData(e);t.requestCount=(t.requestCount||0)+1,e.classList.add.call(e.classList,htmx.config.requestClass)}),t}function disableElements(e){e=findAttributeTargets(e,"hx-disabled-elt");return forEach(e=null==e?[]:e,function(e){var t=getInternalData(e);t.requestCount=(t.requestCount||0)+1,e.setAttribute("disabled",""),e.setAttribute("data-disabled-by-htmx","")}),e}function removeRequestIndicators(e,t){forEach(e.concat(t),function(e){e=getInternalData(e);e.requestCount=(e.requestCount||1)-1}),forEach(e,function(e){0===getInternalData(e).requestCount&&e.classList.remove.call(e.classList,htmx.config.requestClass)}),forEach(t,function(e){0===getInternalData(e).requestCount&&(e.removeAttribute("disabled"),e.removeAttribute("data-disabled-by-htmx"))})}function haveSeenNode(t,r){for(let e=0;e<t.length;e++)if(t[e].isSameNode(r))return 1}function shouldInclude(e){return""!==e.name&&null!=e.name&&!e.disabled&&!closest(e,"fieldset[disabled]")&&"button"!==e.type&&"submit"!==e.type&&"image"!==e.tagName&&"reset"!==e.tagName&&"file"!==e.tagName&&("checkbox"!==e.type&&"radio"!==e.type||e.checked)}function addValueToFormData(t,e,r){null!=t&&null!=e&&(Array.isArray(e)?e.forEach(function(e){r.append(t,e)}):r.append(t,e))}function removeValueFromFormData(t,r,n){if(null!=t&&null!=r){let e=n.getAll(t);e=Array.isArray(r)?e.filter(e=>r.indexOf(e)<0):e.filter(e=>e!==r),n.delete(t),forEach(e,e=>n.append(t,e))}}function processInputValue(t,r,n,o,a){if(null!=o&&!haveSeenNode(t,o)){if(t.push(o),shouldInclude(o)){const t=getRawAttribute(o,"name");let e=o.value;o instanceof HTMLSelectElement&&o.multiple&&(e=toArray(o.querySelectorAll("option:checked")).map(function(e){return e.value})),addValueToFormData(t,e=o instanceof HTMLInputElement&&o.files?toArray(o.files):e,r),a&&validateElement(o,n)}o instanceof HTMLFormElement&&(forEach(o.elements,function(e){0<=t.indexOf(e)?removeValueFromFormData(e.name,e.value,r):t.push(e),a&&validateElement(e,n)}),new FormData(o).forEach(function(e,t){e instanceof File&&""===e.name||addValueToFormData(t,e,r)}))}}function validateElement(e,t){e.willValidate&&(triggerEvent(e,"htmx:validation:validate"),e.checkValidity()||(t.push({elt:e,message:e.validationMessage,validity:e.validity}),triggerEvent(e,"htmx:validation:failed",{message:e.validationMessage,validity:e.validity})))}function overrideFormData(r,e){for(const t of e.keys())r.delete(t);return e.forEach(function(e,t){r.append(t,e)}),r}function getInputValues(e,t){const r=[],n=new FormData,o=new FormData,a=[],i=getInternalData(e);i.lastButtonClicked&&!bodyContains(i.lastButtonClicked)&&(i.lastButtonClicked=null);let s=e instanceof HTMLFormElement&&!0!==e.noValidate||"true"===getAttributeValue(e,"hx-validate");if(i.lastButtonClicked&&(s=s&&!0!==i.lastButtonClicked.formNoValidate),"get"!==t&&processInputValue(r,o,a,closest(e,"form"),s),processInputValue(r,n,a,e,s),i.lastButtonClicked||"BUTTON"===e.tagName||"INPUT"===e.tagName&&"submit"===getRawAttribute(e,"type")){const t=i.lastButtonClicked||e;addValueToFormData(getRawAttribute(t,"name"),t.value,o)}return forEach(findAttributeTargets(e,"hx-include"),function(e){processInputValue(r,n,a,asElement(e),s),matches(e,"form")||forEach(asParentNode(e).querySelectorAll(INPUT_SELECTOR),function(e){processInputValue(r,n,a,e,s)})}),overrideFormData(n,o),{errors:a,formData:n,values:formDataProxy(n)}}function appendParam(e,t,r){""!==e&&(e+="&"),"[object Object]"===String(r)&&(r=JSON.stringify(r));r=encodeURIComponent(r);return e+(encodeURIComponent(t)+"=")+r}function urlEncode(e){e=formDataFromObject(e);let r="";return e.forEach(function(e,t){r=appendParam(r,t,e)}),r}function getHeaders(e,t,r){t={"HX-Request":"true","HX-Trigger":getRawAttribute(e,"id"),"HX-Trigger-Name":getRawAttribute(e,"name"),"HX-Target":getAttributeValue(t,"id"),"HX-Current-URL":getDocument().location.href};return getValuesForElement(e,"hx-headers",!1,t),void 0!==r&&(t["HX-Prompt"]=r),getInternalData(e).boosted&&(t["HX-Boosted"]="true"),t}function filterValues(r,n){var e=getClosestAttributeValue(n,"hx-params");if(e){if("none"===e)return new FormData;if("*"===e)return r;if(0===e.indexOf("not "))return forEach(e.slice(4).split(","),function(e){e=e.trim(),r.delete(e)}),r;{const n=new FormData;return forEach(e.split(","),function(t){t=t.trim(),r.has(t)&&r.getAll(t).forEach(function(e){n.append(t,e)})}),n}}return r}function isAnchorLink(e){return getRawAttribute(e,"href")&&0<=getRawAttribute(e,"href").indexOf("#")}function getSwapSpecification(t,e){const r=e||getClosestAttributeValue(t,"hx-swap"),n={swapStyle:getInternalData(t).boosted?"innerHTML":htmx.config.defaultSwapStyle,swapDelay:htmx.config.defaultSwapDelay,settleDelay:htmx.config.defaultSettleDelay};if(htmx.config.scrollIntoViewOnBoost&&getInternalData(t).boosted&&!isAnchorLink(t)&&(n.show="top"),r){const t=splitOnWhitespace(r);if(0<t.length)for(let e=0;e<t.length;e++){const r=t[e];if(0===r.indexOf("swap:"))n.swapDelay=parseInterval(r.slice(5));else if(0===r.indexOf("settle:"))n.settleDelay=parseInterval(r.slice(7));else if(0===r.indexOf("transition:"))n.transition="true"===r.slice(11);else if(0===r.indexOf("ignoreTitle:"))n.ignoreTitle="true"===r.slice(12);else if(0===r.indexOf("scroll:")){const t=(a=r.slice(7).split(":")).pop();var o=0<a.length?a.join(":"):null;n.scroll=t,n.scrollTarget=o}else if(0===r.indexOf("show:")){var a;const t=(a=r.slice(5).split(":")).pop();o=0<a.length?a.join(":"):null,n.show=t,n.showTarget=o}else if(0===r.indexOf("focus-scroll:")){const t=r.slice(13);n.focusScroll="true"==t}else 0==e?n.swapStyle=r:logError("Unknown modifier in hx-swap: "+r)}}return n}function usesFormData(e){return"multipart/form-data"===getClosestAttributeValue(e,"hx-encoding")||matches(e,"form")&&"multipart/form-data"===getRawAttribute(e,"enctype")}function encodeParamsForBody(t,r,n){let o=null;return withExtensions(r,function(e){null==o&&(o=e.encodeParameters(t,n,r))}),null!=o?o:usesFormData(r)?overrideFormData(new FormData,formDataFromObject(n)):urlEncode(n)}function makeSettleInfo(e){return{tasks:[],elts:[e]}}function updateScrollState(e,t){var r,n=e[0],e=e[e.length-1];t.scroll&&(r=null,t.scrollTarget&&(r=asElement(querySelectorExt(n,t.scrollTarget))),"top"===t.scroll&&(n||r)&&((r=r||n).scrollTop=0),"bottom"===t.scroll)&&(e||r)&&((r=r||e).scrollTop=r.scrollHeight),t.show&&(r=null,t.showTarget&&(r=asElement(querySelectorExt(n,"window"===t.showTarget?"body":t.showTarget))),"top"===t.show&&(n||r)&&(r=r||n).scrollIntoView({block:"start",behavior:htmx.config.scrollBehavior}),"bottom"===t.show)&&(e||r)&&(r=r||e).scrollIntoView({block:"end",behavior:htmx.config.scrollBehavior})}function getValuesForElement(n,e,o,a){if(null==a&&(a={}),null==n)return a;var i=getAttributeValue(n,e);if(i){let e,t=i.trim(),r=o;if("unset"===t)return null;0===t.indexOf("javascript:")?(t=t.slice(11),r=!0):0===t.indexOf("js:")&&(t=t.slice(3),r=!0),0!==t.indexOf("{")&&(t="{"+t+"}"),e=r?maybeEval(n,function(){return Function("return ("+t+")")()},{}):parseJSON(t);for(const n in e)e.hasOwnProperty(n)&&null==a[n]&&(a[n]=e[n])}return getValuesForElement(asElement(parentElt(n)),e,o,a)}function maybeEval(e,t,r){return htmx.config.allowEval?t():(triggerErrorEvent(e,"htmx:evalDisallowedError"),r)}function getHXVarsForElement(e,t){return getValuesForElement(e,"hx-vars",!0,t)}function getHXValsForElement(e,t){return getValuesForElement(e,"hx-vals",!1,t)}function getExpressionVars(e){return mergeObjects(getHXVarsForElement(e),getHXValsForElement(e))}function safelySetHeaderValue(t,r,n){if(null!==n)try{t.setRequestHeader(r,n)}catch(e){t.setRequestHeader(r,encodeURIComponent(n)),t.setRequestHeader(r+"-URI-AutoEncoded","true")}}function getPathFromResponse(t){if(t.responseURL&&"undefined"!=typeof URL)try{var e=new URL(t.responseURL);return e.pathname+e.search}catch(e){triggerErrorEvent(getDocument().body,"htmx:badResponseUrl",{url:t.responseURL})}}function hasHeader(e,t){return t.test(e.getAllResponseHeaders())}function ajaxHelper(t,r,n){if(t=t.toLowerCase(),n){if(n instanceof Element||"string"==typeof n)return issueAjaxRequest(t,r,null,null,{targetOverride:resolveTarget(n)||DUMMY_ELT,returnPromise:!0});{let e=resolveTarget(n.target);return(n.target&&!e||n.source&&!e&&!resolveTarget(n.source))&&(e=DUMMY_ELT),issueAjaxRequest(t,r,resolveTarget(n.source),n.event,{handler:n.handler,headers:n.headers,values:n.values,targetOverride:e,swapOverride:n.swap,select:n.select,returnPromise:!0})}}return issueAjaxRequest(t,r,null,null,{returnPromise:!0})}function hierarchyForElt(e){for(var t=[];e;)t.push(e),e=e.parentElement;return t}function verifyPath(e,t,r){let n,o;return n="function"==typeof URL?(o=new URL(t,document.location.href),document.location.origin===o.origin):startsWith(o=t,document.location.origin),(!htmx.config.selfRequestsOnly||n)&&triggerEvent(e,"htmx:validateUrl",mergeObjects({url:o,sameHost:n},r))}function formDataFromObject(e){if(e instanceof FormData)return e;const t=new FormData;for(const r in e)e.hasOwnProperty(r)&&(e[r]&&"function"==typeof e[r].forEach?e[r].forEach(function(e){t.append(r,e)}):"object"!=typeof e[r]||e[r]instanceof Blob?t.append(r,e[r]):t.append(r,JSON.stringify(e[r])));return t}function formDataArrayProxy(n,o,e){return new Proxy(e,{get:function(t,e){return"number"==typeof e?t[e]:"length"===e?t.length:"push"===e?function(e){t.push(e),n.append(o,e)}:"function"==typeof t[e]?function(){t[e].apply(t,arguments),n.delete(o),t.forEach(function(e){n.append(o,e)})}:t[e]&&1===t[e].length?t[e][0]:t[e]},set:function(e,t,r){return e[t]=r,n.delete(o),e.forEach(function(e){n.append(o,e)}),!0}})}function formDataProxy(n){return new Proxy(n,{get:function(e,t){if("symbol"==typeof t){const r=Reflect.get(e,t);return"function"==typeof r?function(){return r.apply(n,arguments)}:r}if("toJSON"===t)return()=>Object.fromEntries(n);if(t in e)return"function"==typeof e[t]?function(){return n[t].apply(n,arguments)}:e[t];const r=n.getAll(t);return 0===r.length?void 0:1===r.length?r[0]:formDataArrayProxy(e,t,r)},set:function(t,r,e){return"string"==typeof r&&(t.delete(r),e&&"function"==typeof e.forEach?e.forEach(function(e){t.append(r,e)}):"object"!=typeof e||e instanceof Blob?t.append(r,e):t.append(r,JSON.stringify(e)),!0)},deleteProperty:function(e,t){return"string"==typeof t&&e.delete(t),!0},ownKeys:function(e){return Reflect.ownKeys(Object.fromEntries(e))},getOwnPropertyDescriptor:function(e,t){return Reflect.getOwnPropertyDescriptor(Object.fromEntries(e),t)}})}function issueAjaxRequest(a,i,s,l,u,c){let p=null,h=null;var d;(u=null!=u?u:{}).returnPromise&&"undefined"!=typeof Promise&&(d=new Promise(function(e,t){p=e,h=t})),null==s&&(s=getDocument().body);const f=u.handler||handleAjaxResponse,g=u.select||null;if(bodyContains(s)){var m=u.targetOverride||asElement(getTarget(s));if(null==m||m==DUMMY_ELT)triggerErrorEvent(s,"htmx:targetError",{target:getAttributeValue(s,"hx-target")}),maybeCall(h);else{let o=getInternalData(s);var b=o.lastButtonClicked;if(b){const s=getRawAttribute(b,"formaction"),l=(null!=s&&(i=s),getRawAttribute(b,"formmethod"));null!=l&&"dialog"!==l.toLowerCase()&&(a=l)}b=getClosestAttributeValue(s,"hx-confirm");if(void 0===c&&!1===triggerEvent(s,"htmx:confirm",{target:m,elt:s,path:i,verb:a,triggeringEvent:l,etc:u,issueRequest:function(e){return issueAjaxRequest(a,i,s,l,u,!!e)},question:b}))maybeCall(p);else{let e=s,t=getClosestAttributeValue(s,"hx-sync"),r=null,n=!1;if(t){const a=t.split(":"),i=a[0].trim();if(e="this"===i?findThisElement(s,"hx-sync"):asElement(querySelectorExt(s,i)),t=(a[1]||"drop").trim(),o=getInternalData(e),"drop"===t&&o.xhr&&!0!==o.abortable)return maybeCall(p),d;if("abort"===t){if(o.xhr)return maybeCall(p),d;n=!0}else"replace"===t?triggerEvent(e,"htmx:abort"):0===t.indexOf("queue")&&(r=(t.split(" ")[1]||"last").trim())}if(o.xhr){if(!o.abortable){if(null==r){if(l){const a=getInternalData(l);a&&a.triggerSpec&&a.triggerSpec.queue&&(r=a.triggerSpec.queue)}null==r&&(r="last")}return null==o.queuedRequests&&(o.queuedRequests=[]),"first"===r&&0===o.queuedRequests.length||"all"===r?o.queuedRequests.push(function(){issueAjaxRequest(a,i,s,l,u)}):"last"===r&&(o.queuedRequests=[],o.queuedRequests.push(function(){issueAjaxRequest(a,i,s,l,u)})),maybeCall(p),d}triggerEvent(e,"htmx:abort")}const C=new XMLHttpRequest,A=(o.xhr=C,o.abortable=n,function(){o.xhr=null,o.abortable=!1,null!=o.queuedRequests&&0<o.queuedRequests.length&&o.queuedRequests.shift()()}),P=getClosestAttributeValue(s,"hx-prompt");if(P){var y=prompt(P);if(null===y||!triggerEvent(s,"htmx:prompt",{prompt:y,target:m}))return maybeCall(p),A(),d}if(!b||c||confirm(b)){let t=getHeaders(s,m,y);"get"===a||usesFormData(s)||(t["Content-Type"]="application/x-www-form-urlencoded"),u.headers&&(t=mergeObjects(t,u.headers));c=getInputValues(s,a),b=c.errors,y=c.formData,c=(u.values&&overrideFormData(y,formDataFromObject(u.values)),overrideFormData(y,formDataFromObject(getExpressionVars(s))));let r=filterValues(c,s);htmx.config.getCacheBusterParam&&"get"===a&&r.set("org.htmx.cache-buster",getRawAttribute(m,"id")||"true"),null!=i&&""!==i||(i=getDocument().location.href);var v,y=getValuesForElement(s,"hx-request"),E=getInternalData(s).boosted,c={boosted:E,useUrlParams:0<=htmx.config.methodsThatUseUrlParams.indexOf(a),formData:r,parameters:formDataProxy(r),unfilteredFormData:c,unfilteredParameters:formDataProxy(c),headers:t,target:m,verb:a,errors:b,withCredentials:u.credentials||y.credentials||htmx.config.withCredentials,timeout:u.timeout||y.timeout||htmx.config.timeout,path:i,triggeringEvent:l};if(triggerEvent(s,"htmx:configRequest",c))if(i=c.path,a=c.verb,t=c.headers,r=formDataFromObject(c.parameters),v=c.useUrlParams,(b=c.errors)&&0<b.length)triggerEvent(s,"htmx:validation:halted",c),maybeCall(p),A();else{var S,x,b=i.split("#"),w=b[1];let e=i;if(v&&(e=b[0],!r.keys().next().done)&&(e.indexOf("?")<0?e+="?":e+="&",e+=urlEncode(r),w)&&(e+="#"+w),verifyPath(s,e,c)){if(C.open(a.toUpperCase(),e,!0),C.overrideMimeType("text/html"),C.withCredentials=c.withCredentials,C.timeout=c.timeout,!y.noHeaders)for(const a in t)t.hasOwnProperty(a)&&safelySetHeaderValue(C,a,t[a]);const k={xhr:C,target:m,requestConfig:c,etc:u,boosted:E,select:g,pathInfo:{requestPath:i,finalRequestPath:e,responsePath:null,anchor:w}};C.onload=function(){try{var t=hierarchyForElt(s);if(k.pathInfo.responsePath=getPathFromResponse(C),f(s,k),!0!==k.keepIndicators&&removeRequestIndicators(S,x),triggerEvent(s,"htmx:afterRequest",k),triggerEvent(s,"htmx:afterOnLoad",k),!bodyContains(s)){let e=null;for(;0<t.length&&null==e;){const s=t.shift();bodyContains(s)&&(e=s)}e&&(triggerEvent(e,"htmx:afterRequest",k),triggerEvent(e,"htmx:afterOnLoad",k))}maybeCall(p),A()}catch(e){throw triggerErrorEvent(s,"htmx:onLoadError",mergeObjects({error:e},k)),e}},C.onerror=function(){removeRequestIndicators(S,x),triggerErrorEvent(s,"htmx:afterRequest",k),triggerErrorEvent(s,"htmx:sendError",k),maybeCall(h),A()},C.onabort=function(){removeRequestIndicators(S,x),triggerErrorEvent(s,"htmx:afterRequest",k),triggerErrorEvent(s,"htmx:sendAbort",k),maybeCall(h),A()},C.ontimeout=function(){removeRequestIndicators(S,x),triggerErrorEvent(s,"htmx:afterRequest",k),triggerErrorEvent(s,"htmx:timeout",k),maybeCall(h),A()},triggerEvent(s,"htmx:beforeRequest",k)?(S=addRequestIndicatorClasses(s),x=disableElements(s),forEach(["loadstart","loadend","progress","abort"],function(t){forEach([C,C.upload],function(e){e.addEventListener(t,function(e){triggerEvent(s,"htmx:xhr:"+t,{lengthComputable:e.lengthComputable,loaded:e.loaded,total:e.total})})})}),triggerEvent(s,"htmx:beforeSend",k),b=v?null:encodeParamsForBody(C,s,r),C.send(b)):(maybeCall(p),A())}else triggerErrorEvent(s,"htmx:invalidPath",c),maybeCall(h)}else maybeCall(p),A()}else maybeCall(p),A()}}}else maybeCall(p);return d}function determineHistoryUpdates(e,t){var r=t.xhr;let n=null,o=null;if(hasHeader(r,/HX-Push:/i)?(n=r.getResponseHeader("HX-Push"),o="push"):hasHeader(r,/HX-Push-Url:/i)?(n=r.getResponseHeader("HX-Push-Url"),o="push"):hasHeader(r,/HX-Replace-Url:/i)&&(n=r.getResponseHeader("HX-Replace-Url"),o="replace"),n)return"false"===n?{}:{type:o,path:n};var r=t.pathInfo.finalRequestPath,a=t.pathInfo.responsePath,i=getClosestAttributeValue(e,"hx-push-url"),s=getClosestAttributeValue(e,"hx-replace-url"),e=getInternalData(e).boosted;let l=null,u=null;return i?(l="push",u=i):s?(l="replace",u=s):e&&(l="push",u=a||r),u&&"false"!==u?("true"===u&&(u=a||r),t.pathInfo.anchor&&-1===u.indexOf("#")&&(u=u+"#"+t.pathInfo.anchor),{type:l,path:u}):{}}function codeMatches(e,t){return new RegExp(e.code).test(t.toString(10))}function resolveResponseHandling(e){for(var t=0;t<htmx.config.responseHandling.length;t++){var r=htmx.config.responseHandling[t];if(codeMatches(r,e.status))return r}return{swap:!1}}function handleTitle(e){var t;e&&((t=find("title"))?t.innerHTML=e:window.document.title=e)}function handleAjaxResponse(i,s){const l=s.xhr;let u=s.target;var t=s.etc,c=s.select;if(triggerEvent(i,"htmx:beforeOnLoad",s))if(hasHeader(l,/HX-Trigger:/i)&&handleTriggerHeader(l,"HX-Trigger",i),hasHeader(l,/HX-Location:/i)){saveCurrentPageToHistory();let e=l.getResponseHeader("HX-Location");0===e.indexOf("{")&&(p=parseJSON(e),e=p.path,delete p.path),ajaxHelper("get",e,p).then(function(){pushUrlIntoHistory(e)})}else{var p=hasHeader(l,/HX-Refresh:/i)&&"true"===l.getResponseHeader("HX-Refresh");if(hasHeader(l,/HX-Redirect:/i))s.keepIndicators=!0,location.href=l.getResponseHeader("HX-Redirect"),p&&location.reload();else if(p)s.keepIndicators=!0,location.reload();else{hasHeader(l,/HX-Retarget:/i)&&(s.target="this"===l.getResponseHeader("HX-Retarget")?i:asElement(querySelectorExt(i,l.getResponseHeader("HX-Retarget"))));const f=determineHistoryUpdates(i,s),g=resolveResponseHandling(l),r=g.swap;let e=!!g.error,o=htmx.config.ignoreTitle||g.ignoreTitle,a=g.select;g.target&&(s.target=asElement(querySelectorExt(i,g.target)));var p=t.swapOverride,h=(null==p&&g.swapOverride&&(p=g.swapOverride),hasHeader(l,/HX-Retarget:/i)&&(s.target="this"===l.getResponseHeader("HX-Retarget")?i:asElement(querySelectorExt(i,l.getResponseHeader("HX-Retarget")))),hasHeader(l,/HX-Reswap:/i)&&(p=l.getResponseHeader("HX-Reswap")),l.response),t=mergeObjects({shouldSwap:r,serverResponse:h,isError:e,ignoreTitle:o,selectOverride:a,swapOverride:p},s);if((!g.event||triggerEvent(u,g.event,t))&&triggerEvent(u,"htmx:beforeSwap",t)){if(u=t.target,h=t.serverResponse,e=t.isError,o=t.ignoreTitle,a=t.selectOverride,p=t.swapOverride,s.target=u,s.failed=e,s.successful=!e,t.shouldSwap){286===l.status&&cancelPolling(i),withExtensions(i,function(e){h=e.transformResponse(h,l,i)}),f.type&&saveCurrentPageToHistory();var d=getSwapSpecification(i,p);d.hasOwnProperty("ignoreTitle")||(d.ignoreTitle=o),u.classList.add(htmx.config.swappingClass);let r=null,n=null;c&&(a=c),hasHeader(l,/HX-Reselect:/i)&&(a=l.getResponseHeader("HX-Reselect"));const m=getClosestAttributeValue(i,"hx-select-oob"),g=getClosestAttributeValue(i,"hx-select");let e=function(){try{f.type&&(triggerEvent(getDocument().body,"htmx:beforeHistoryUpdate",mergeObjects({history:f},s)),"push"===f.type?(pushUrlIntoHistory(f.path),triggerEvent(getDocument().body,"htmx:pushedIntoHistory",{path:f.path})):(replaceUrlInHistory(f.path),triggerEvent(getDocument().body,"htmx:replacedInHistory",{path:f.path}))),swap(u,h,d,{select:a||g,selectOOB:m,eventInfo:s,anchor:s.pathInfo.anchor,contextElement:i,afterSwapCallback:function(){if(hasHeader(l,/HX-Trigger-After-Swap:/i)){let e=i;bodyContains(i)||(e=getDocument().body),handleTriggerHeader(l,"HX-Trigger-After-Swap",e)}},afterSettleCallback:function(){if(hasHeader(l,/HX-Trigger-After-Settle:/i)){let e=i;bodyContains(i)||(e=getDocument().body),handleTriggerHeader(l,"HX-Trigger-After-Settle",e)}maybeCall(r)}})}catch(e){throw triggerErrorEvent(i,"htmx:swapError",s),maybeCall(n),e}},t=htmx.config.globalViewTransitions;if((d.hasOwnProperty("transition")?d.transition:t)&&triggerEvent(i,"htmx:beforeTransition",s)&&"undefined"!=typeof Promise&&document.startViewTransition){const i=new Promise(function(e,t){r=e,n=t}),s=e;e=function(){document.startViewTransition(function(){return s(),i})}}0<d.swapDelay?getWindow().setTimeout(e,d.swapDelay):e()}e&&triggerErrorEvent(i,"htmx:responseError",mergeObjects({error:"Response Status Error Code "+l.status+" from "+s.pathInfo.requestPath},s))}}}}function extensionBase(){return{init:function(e){return null},getSelectors:function(){return null},onEvent:function(e,t){return!0},transformResponse:function(e,t,r){return e},isInlineSwap:function(e){return!1},handleSwap:function(e,t,r,n){return!1},encodeParameters:function(e,t,r){return null}}}function defineExtension(e,t){t.init&&t.init(internalAPI),extensions[e]=mergeObjects(extensionBase(),t)}function removeExtension(e){delete extensions[e]}function getExtensions(e,t,r){if(null==t&&(t=[]),null==e)return t;null==r&&(r=[]);var n=getAttributeValue(e,"hx-ext");return n&&forEach(n.split(","),function(e){if("ignore:"!=(e=e.replace(/ /g,"")).slice(0,7)){if(r.indexOf(e)<0){const r=extensions[e];r&&t.indexOf(r)<0&&t.push(r)}}else r.push(e.slice(7))}),getExtensions(asElement(parentElt(e)),t,r)}function ready(e){isReady||"complete"===getDocument().readyState?e():getDocument().addEventListener("DOMContentLoaded",e)}function insertIndicatorStyles(){var e;!1!==htmx.config.includeIndicatorStyles&&(e=htmx.config.inlineStyleNonce?` nonce="${htmx.config.inlineStyleNonce}"`:"",getDocument().head.insertAdjacentHTML("beforeend","<style"+e+">      ."+htmx.config.indicatorClass+"{opacity:0}      ."+htmx.config.requestClass+" ."+htmx.config.indicatorClass+"{opacity:1; transition: opacity 200ms ease-in;}      ."+htmx.config.requestClass+"."+htmx.config.indicatorClass+"{opacity:1; transition: opacity 200ms ease-in;}      </style>"))}function getMetaConfig(){var e=getDocument().querySelector('meta[name="htmx-config"]');return e?parseJSON(e.content):null}function mergeMetaConfig(){var e=getMetaConfig();e&&(htmx.config=mergeObjects(htmx.config,e))}const htmx={onLoad:null,process:null,on:null,off:null,trigger:null,ajax:null,find:null,findAll:null,closest:null,values:function(e,t){return getInputValues(e,t||"post").values},remove:null,addClass:null,removeClass:null,toggleClass:null,takeClass:null,swap:null,defineExtension:null,removeExtension:null,logAll:null,logNone:null,logger:null,config:{historyEnabled:!0,historyCacheSize:10,refreshOnHistoryMiss:!1,defaultSwapStyle:"innerHTML",defaultSwapDelay:0,defaultSettleDelay:20,includeIndicatorStyles:!0,indicatorClass:"htmx-indicator",requestClass:"htmx-request",addedClass:"htmx-added",settlingClass:"htmx-settling",swappingClass:"htmx-swapping",allowEval:!0,allowScriptTags:!0,inlineScriptNonce:"",inlineStyleNonce:"",attributesToSettle:["class","style","width","height"],withCredentials:!1,timeout:0,wsReconnectDelay:"full-jitter",wsBinaryType:"blob",disableSelector:"[hx-disable], [data-hx-disable]",scrollBehavior:"instant",defaultFocusScroll:!1,getCacheBusterParam:!1,globalViewTransitions:!1,methodsThatUseUrlParams:["get","delete"],selfRequestsOnly:!0,ignoreTitle:!1,scrollIntoViewOnBoost:!0,triggerSpecsCache:null,disableInheritance:!1,responseHandling:[{code:"204",swap:!1},{code:"[23]..",swap:!0},{code:"[45]..",swap:!1,error:!0}],allowNestedOobSwaps:!0},parseInterval:null,ee:null,version:"2.0.4"},internalAPI=(htmx.onLoad=onLoadHelper,htmx.process=processNode,htmx.on=addEventListenerImpl,htmx.off=removeEventListenerImpl,htmx.trigger=triggerEvent,htmx.ajax=ajaxHelper,htmx.find=find,htmx.findAll=findAll,htmx.closest=closest,htmx.remove=removeElement,htmx.addClass=addClassToElement,htmx.removeClass=removeClassFromElement,htmx.toggleClass=toggleClassOnElement,htmx.takeClass=takeClassForElement,htmx.swap=swap,htmx.defineExtension=defineExtension,htmx.removeExtension=removeExtension,htmx.logAll=logAll,htmx.logNone=logNone,htmx.parseInterval=parseInterval,htmx.ee=internalEval,{addTriggerHandler:addTriggerHandler,bodyContains:bodyContains,canAccessLocalStorage:canAccessLocalStorage,findThisElement:findThisElement,filterValues:filterValues,swap:swap,hasAttribute:hasAttribute,getAttributeValue:getAttributeValue,getClosestAttributeValue:getClosestAttributeValue,getClosestMatch:getClosestMatch,getExpressionVars:getExpressionVars,getHeaders:getHeaders,getInputValues:getInputValues,getInternalData:getInternalData,getSwapSpecification:getSwapSpecification,getTriggerSpecs:getTriggerSpecs,getTarget:getTarget,makeFragment:makeFragment,mergeObjects:mergeObjects,makeSettleInfo:makeSettleInfo,oobSwap:oobSwap,querySelectorExt:querySelectorExt,settleImmediately:settleImmediately,shouldCancel:shouldCancel,triggerEvent:triggerEvent,triggerErrorEvent:triggerErrorEvent,withExtensions:withExtensions}),VERBS=["get","post","put","delete","patch"],VERB_SELECTOR=VERBS.map(function(e){return"[hx-"+e+"], [data-hx-"+e+"]"}).join(", ");var scanForwardQuery=function(t,e,r){var n=asParentNode(getRootNode(t,r)).querySelectorAll(e);for(let e=0;e<n.length;e++){const r=n[e];if(r.compareDocumentPosition(t)===Node.DOCUMENT_POSITION_PRECEDING)return r}},scanBackwardsQuery=function(t,e,r){var n=asParentNode(getRootNode(t,r)).querySelectorAll(e);for(let e=n.length-1;0<=e;e--){const r=n[e];if(r.compareDocumentPosition(t)===Node.DOCUMENT_POSITION_FOLLOWING)return r}};const DUMMY_ELT=getDocument().createElement("output"),WHITESPACE_OR_COMMA=/[\s,]/,SYMBOL_START=/[_$a-zA-Z]/,SYMBOL_CONT=/[_$a-zA-Z0-9]/,STRINGISH_START=['"',"'","/"],NOT_WHITESPACE=/[^\s]/,COMBINED_SELECTOR_START=/[{(]/,COMBINED_SELECTOR_END=/[})]/,INPUT_SELECTOR="input, textarea, select";let windowIsScrolling=!1,scrollHandler=null;const HX_ON_QUERY=(new XPathEvaluator).createExpression('.//*[@*[ starts-with(name(), "hx-on:") or starts-with(name(), "data-hx-on:") or starts-with(name(), "hx-on-") or starts-with(name(), "data-hx-on-") ]]');let currentPathForHistory=location.pathname+location.search;const extensions={};var isReady=!1;return getDocument().addEventListener("DOMContentLoaded",function(){isReady=!0}),ready(function(){mergeMetaConfig(),insertIndicatorStyles();let e=getDocument().body;processNode(e);const t=getDocument().querySelectorAll("[hx-trigger='restored'],[data-hx-trigger='restored']"),r=(e.addEventListener("htmx:abort",function(e){e=getInternalData(e.target);e&&e.xhr&&e.xhr.abort()}),window.onpopstate?window.onpopstate.bind(window):null);window.onpopstate=function(e){e.state&&e.state.htmx?(restoreHistory(),forEach(t,function(e){triggerEvent(e,"htmx:restored",{document:getDocument(),triggerEvent:triggerEvent})})):r&&r(e)},getWindow().setTimeout(function(){triggerEvent(e,"htmx:load",{}),e=null},0)}),htmx}(),htmxLib=htmx$2,handlebars={exports:{}},handlebars_runtime={exports:{}},base$1={},utils={},hasRequiredUtils,exception={exports:{}},hasRequiredException,helpers$1={},blockHelperMissing={exports:{}},hasRequiredBlockHelperMissing,each={exports:{}},hasRequiredEach,helperMissing={exports:{}},hasRequiredHelperMissing,_if={exports:{}},hasRequired_if,log={exports:{}},hasRequiredLog,lookup={exports:{}},hasRequiredLookup,_with={exports:{}},hasRequired_with,hasRequiredHelpers$1,decorators={},inline={exports:{}},hasRequiredInline,hasRequiredDecorators,logger={exports:{}},hasRequiredLogger,protoAccess={},createNewLookupObject={},hasRequiredCreateNewLookupObject,hasRequiredProtoAccess,hasRequiredBase$1,safeString={exports:{}},hasRequiredSafeString,runtime={},wrapHelper={},hasRequiredWrapHelper,hasRequiredRuntime,noConflict={exports:{}},hasRequiredNoConflict,hasRequiredHandlebars_runtime,ast={exports:{}},hasRequiredAst,base={},parser={exports:{}},hasRequiredParser,whitespaceControl={exports:{}},visitor={exports:{}},hasRequiredVisitor,hasRequiredWhitespaceControl,helpers={},hasRequiredHelpers,hasRequiredBase,compiler={},hasRequiredCompiler,javascriptCompiler={exports:{}},codeGen={exports:{}},sourceMap={},sourceMapGenerator={},base64Vlq={},base64={},hasRequiredBase64,hasRequiredBase64Vlq,util={},hasRequiredUtil,arraySet={},hasRequiredArraySet,mappingList={},hasRequiredMappingList,hasRequiredSourceMapGenerator,sourceMapConsumer={},binarySearch={},hasRequiredBinarySearch,quickSort={},hasRequiredQuickSort,hasRequiredSourceMapConsumer,sourceNode={},hasRequiredSourceNode,hasRequiredSourceMap,hasRequiredCodeGen,hasRequiredJavascriptCompiler,hasRequiredHandlebars,handlebarsExports=requireHandlebars(),Handlebars$1=getDefaultExportFromCjs(handlebarsExports);const htmx$1=htmxLib,VERSION=("undefined"!=typeof window&&(window.htmx=htmx$1,window.Handlebars=Handlebars$1,registerHelpers()),"1.5.0"),AUTHOR="JWSLS",LICENSE="Flowplater standard licence",ProcessingChain=(ConfigManager.setConfig(ConfigManager.getDefaultConfig()),RequestHandler.setupEventListeners(),defineHtmxExtension(),{processors:[{name:"customTags",process:replaceCustomTags},{name:"htmxAttributes",process:translateCustomHTMXAttributes},{name:"htmxExtensionAttribute",process:addHtmxExtensionAttribute},{name:"urlAffixes",process:processUrlAffixes},{name:"animation",process:setupAnimation},{name:"preload",process:processPreload},{name:"htmxProcess",process:e=>(htmx$1.process(e),e)}],get FP_SELECTOR(){return ConfigManager.getConfig().selectors.fp.map(e=>AttributeMatcher.h(e).map(e=>`[${e}]`).join(",")).join(",")},processElement:function(e){e.Z&&e.Z();let o={success:!0,errors:[],warnings:[],finalElement:e};return o.finalElement=this.processors.reduce((t,r,n)=>{if(!t)return o.errors.push({phase:r.name,error:"Element became undefined at processor index "+n,processor:this.processors[n-1]}),o.success=!1,e;try{return r.process(t)}catch(e){const n=e;return o.errors.push({phase:r.name,error:n.message,stack:n.stack}),Debug.error(`Error in processor ${r.name}: `+n.message,n),e instanceof TemplateError&&o.warnings.push({phase:r.name,message:"Falling back to original template"}),t}},e),0<o.errors.length&&EventSystem.publish("processingChain:error",o),0<o.warnings.length&&EventSystem.publish("processingChain:warning",o),o.finalElement}}),FlowPlaterObj={compileTemplate:compileTemplate,render:render,getInstance:getInstance,getInstances:getInstances,getOrCreateInstance(e,t={}){var r=AttributeMatcher.findMatchingElements("instance",e,!1,document,!1,!0);return r?InstanceManager.getOrCreateInstance(r,t):(Debug.error("Element not found for instance: "+e),null)},PluginManager:PluginManager,getGroup:e=>GroupManager.getGroup(e),getOrCreateGroup:(e,t={})=>GroupManager.getOrCreateGroup(e,t),getGroups:()=>GroupManager.getAllGroups(),updateGroup:(e,t)=>GroupManager.updateGroup(e,t),removeGroup:e=>GroupManager.removeGroup(e),removeAllGroups:()=>GroupManager.removeAllGroups(),log(e,...t){return t.unshift("[PLUGIN]"),Debug.log(e,...t),this},logLevels:Debug.levels,registerPlugin(e,t={}){return this.PluginManager.registerPlugin(e,t)},removePlugin(e){return this.PluginManager.removePlugin(e)},removeAllPlugins(){return this.PluginManager.destroyAll()},getPlugin(e){return this.PluginManager.getPlugin(e)},getAllPlugins(){return this.PluginManager.getSortedPlugins()},enablePlugin(e){return this.PluginManager.enablePlugin(e)},disablePlugin(e){return this.PluginManager.disablePlugin(e)},pluginConfig(e){return this.PluginManager.pluginConfig(e)},on:(...e)=>EventSystem.subscribe(...e),off:(...e)=>EventSystem.unsubscribe(...e),emit:(...e)=>EventSystem.publish(...e),debug(e){return ConfigManager.setConfig({debug:{level:e}}),this},templateCache:{set(e,t){var r=ConfigManager.getConfig().templates.cacheSize,n=_state.templateCache;if(Object.keys(n).length>=r){const e=Object.keys(n)[0];delete n[e],Debug.info("Cache limit reached. Removed template: "+e)}return n[e]=t},get:e=>e?_state.templateCache[e]:_state.templateCache,isCached:e=>!!_state.templateCache[e],clear(e){e?(delete _state.templateCache[e],Debug.info("Cleared template cache for: "+e)):(_state.templateCache={},Debug.info("Cleared entire template cache"))},size:()=>Object.keys(_state.templateCache).length},init(e=document,o={render:!0}){var t;return _state.initialized?(Performance.start("init-element"),Debug.info("Re-initializing FlowPlater for element:",e),e!==document&&process(e),Performance.end("init-element")):(Performance.start("init"),Debug.info("Initializing FlowPlater..."),t=AttributeMatcher.findMatchingElements("template"),(Array.isArray(t)?t.filter(Boolean):t?[t]:[]).forEach(t=>{var e=AttributeMatcher.m(t,"template");if(e="self"!==e&&""!==e?e:t.id){var r=document.querySelector(e);if(r){Debug.info("replacing template content",r);const t=r.getElementsByTagName("script"),o=Array.from(t).map(e=>e.innerHTML);Array.from(t).forEach((e,t)=>{e.innerHTML=`##FP_SCRIPT_${t}##`}),r.innerHTML=r.innerHTML.replace(/\[\[(.*?)\]\]/g,"{{$1}}"),Array.from(r.getElementsByTagName("script")).forEach((e,t)=>{e.innerHTML=o[t]})}if(compileTemplate(e,!0),o.render){r=["get","post","put","patch","delete"].some(e=>AttributeMatcher.v(t,e))||["trigger","boost","ws","sse"].some(e=>AttributeMatcher.v(t,e));if(Debug.debug(`[Template ${e}] Has request method: `+r,t),render({template:e,data:{},target:t,skipRender:r}),r&&ConfigManager.getConfig().storage?.enabled){const o=AttributeMatcher.m(t,"instance")||t.id||e,n=loadFromLocalStorage(o,"instance");n?(Debug.info(`Found stored data for instance: ${o}, rendering with stored data`),render({template:e,data:n,target:t,instanceName:o,skipRender:!1,isStoredDataRender:!0})):Debug.debug(`Skipping initial render for instance: ${o} - no stored data found`)}}}else Debug.error("No template ID found for element: "+t.id,t,"Make sure your template has an ID attribute")}),process(e),_state.initialized=!0,_readyState.isReady=!0,Debug.info("FlowPlater initialized successfully"),Performance.end("init"),_readyState.processQueue(),EventSystem.publish("initialized"),this.PluginManager.executeHook("initComplete",this,_state.instances)),this},ready(e){return _readyState.isReady?e(this):_readyState.queue.push(()=>e(this)),this},cleanup(e){var t;return e?(t=_state.instances[e])&&(t.elements.forEach(e=>{e.Z&&e.Z(),e.removeEventListeners&&e.removeEventListeners()}),delete _state.instances[e],Debug.info("Cleaned up instance: "+e)):(Object.keys(_state.instances).forEach(e=>{this.cleanup(e)}),_state.initialized=!1,Debug.info("Cleaned up all instances")),this},version:VERSION,author:AUTHOR,license:LICENSE,setCustomTags:setCustomTags,config:function(e={}){return ConfigManager.setConfig(e),this},getConfig:function(){return ConfigManager.getConfig()},registerTag:function(e,t){return Handlebars$1.registerHelper(e,t),this.templateCache.clear(),Object.keys(_state.instances).forEach(e=>{e=_state.instances[e];e.templateId&&(e.template=compileTemplate(e.templateId,!0))}),Debug.info("Registered Handlebars helper: "+e),this},trigger:function(t,e=document,r={}){"string"!=typeof e?(EventSystem.publish(t,{element:e,detail:r}),e&&htmx$1.trigger(e,t,r)):document.querySelectorAll(e).forEach(e=>{EventSystem.publish(t,{element:e,detail:r}),htmx$1.trigger(e,t,r)})},destroy:function(){Object.keys(_state.instances).forEach(e=>{this.cleanup(e)}),_state.templateCache={},_state.instances={},EventSystem.unsubscribeAll(),Debug.info("Cleaned up all instances")},create:function(e,t={refresh:!0}){var r;if(Performance.start("createInstance:"+e),Debug.info("Creating FlowPlater instance: "+e),!(r=e.startsWith("#")?document.getElementById(e.slice(1)):AttributeMatcher.findMatchingElements("instance",e,!1,document,!1,!0)))throw new FlowPlaterError("Could not find element for instance: "+e);var n=AttributeMatcher.m(r,"template"),n=(n&&this.templateCache.clear(n),this.init(r),getInstance(e));if(n)return this.PluginManager.executeHook("newInstance",n),t.refresh&&n.refresh(),Debug.info("Instance created successfully: "+e),Performance.end("createInstance:"+e),n;throw new FlowPlaterError("Failed to create instance: "+e)},findAttribute:(e,t)=>AttributeMatcher.findAttribute(e,t),addTransformer(e,t){return this.PluginManager.addTransformer(e,t),this},removeTransformer(e,t){return this.PluginManager.removeTransformer(e,t)},clearTransformers(e){return this.PluginManager.clearTransformers(e),this}};let initialConfig=ConfigManager.getDefaultConfig();const metaElement=document.querySelector('meta[name="fp-config"]');if(metaElement)try{const e=JSON.parse(metaElement.content);initialConfig=deepMerge(initialConfig,e)}catch(e){Debug.error("Error parsing fp-config meta tag content:",metaElement.content,e)}return ConfigManager.setConfig(initialConfig),EventSystem.publish("loaded"),"complete"===document.readyState||"loading"!==document.readyState?FlowPlaterObj.init():document.addEventListener("DOMContentLoaded",()=>FlowPlaterObj.init()),FlowPlaterObj}();