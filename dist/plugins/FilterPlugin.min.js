var FilterPlugin=function(){"use strict";const r={TEMPLATE:{CACHE_SIZE:100,PRECOMPILE:!0,ANONYMOUS_INSTANCE_NAME:"anonymous",SELF_TEMPLATE_ID:"self"},ANIMATION:{ENABLED:!0,DURATION:300},DEBUG:{LEVEL:1,DEVELOPMENT_LEVEL:3},HTMX:{TIMEOUT:1e4,SWAP_STYLE:"innerHTML",SELF_REQUESTS_ONLY:!1,IGNORE_TITLE:!0,DEFAULT_TRIGGER:"mouseover",SWAP_DELAY:0,SETTLE_DELAY:0,TRANSITION:!1},STORAGE:{ENABLED:!1,TTL:2592e3,INFINITE_TTL:-1},PERFORMANCE:{BATCH_DOM_UPDATES:!0,BATCHING_DELAY:0,DEBOUNCE_DELAY:0},FORMS:{PERSIST_FORMS:!0,DEFAULT_SOURCE:"unknown",TRIGGER_EVENTS:"change",EXCLUDED_INPUT_TYPES:["file"],CHECKBOX_RADIO_TYPES:["checkbox","radio"],TEXT_INPUT_TYPES:["text"],FORM_INPUT_TYPES:["INPUT","SELECT","TEXTAREA"]},PLUGINS:{DEFAULT_PRIORITY:0,DEFAULT_VERSION:"1.0.0",DEBUG:!1},CART:{ENABLED:!0,PRIORITY:50,DATA_ATTRIBUTE:"product",GROUP_NAME:"cart",REQUIRED_KEYS:["id","name"],CURRENCY:{NAME:"USD",SYMBOL:"$",PRECISION:2,SEPARATOR:",",DECIMAL:"."},TAX_RATES:[{name:"VAT",value:1.21}],LOCALE:"en-US",STOCK:{INFINITE:1/0,MIN_AMOUNT:0}},FILTER:{ENABLED:!0,PRIORITY:0,DEFAULT_SELECT_OPTION:"Select tags...",PRESERVE_DEFAULT:!1},DATA_EXTRACTOR:{VALUE_SOURCES:{ATTRIBUTE:"attribute",TEXT:"text"}},PROXY:{DEFAULT_URL:""},MATH:{OPERATORS:{ADD:"+",SUBTRACT:"-",MULTIPLY:"*",DIVIDE:"/"}},DOM:{UPDATE_COUNTER_INITIAL:0,UNKNOWN_ELEMENT_ID:"unknown",INTEGRITY_CHECK_ENABLED:!0,VOID_ELEMENTS:["area","base","br","col","embed","hr","img","input","link","meta","param","source","track","wbr"],SVG_NAMESPACE:"http://www.w3.org/2000/svg",SVG_ELEMENTS:["svg","circle","ellipse","line","polygon","polyline","rect","path","g","text","tspan","defs","use","symbol","marker","clipPath","mask","pattern","image","foreignObject"],WEBFLOW_CLASSES:["w-checkbox","w-radio","w-checkbox-input","w-radio-input","w-form","w-input","w-select","w-textarea"],SIMILARITY_THRESHOLD:.5,LENGTH_RATIO_THRESHOLD:.5},INSTANCES:{DUPLICATE_INIT_WINDOW:100},EVENTS:{HTTP_METHODS:["get","post","put","patch","delete"],HTTP_TRIGGER_ATTRIBUTES:["trigger","boost","ws","sse"]},HELPERS:{EACH:{START_AT:0,SORT_KEY:"",DESCENDING:!1,SORT_BEFORE_LIMIT:!0},COMPARISON:{DEFAULT_OPERATOR:"=="}},CONTENT_TYPES:{UNKNOWN:"unknown",JSON:"json",HTML:"html",XML:"xml"},ERRORS:{XML_PARSER_ERROR:"Unknown parser error"},URL:{WEBFLOW_DOMAINS:[".webflow.io",".canvas.webflow.com"],LOCALHOST:"localhost"},SELECTORS:{FP_ATTRIBUTES:["template","get","post","put","delete","patch","persist","instance","data","local","group","target","swap","trigger","dynamic"],TEMPLATE_ELEMENTS:["template","fptemplate"],EXTENSION_ATTRIBUTE:"hx-ext"},SECURITY:{ALLOW_EXECUTE:!0,FORBIDDEN_REGISTRATIONS:new Set(["if","unless","each","with","lookup","log","blockHelperMissing","helperMissing"])}},a={templateCache:{},instances:{},groups:{},length:0,initialized:!1,defaults:{animation:!1,debug:!1},config:{},_initTracking:{}},p={level:1,levels:{ERROR:0,WARN:1,INFO:2,DEBUG:3},log:function(e){this.level},error:function(...e){this.log(this.levels.ERROR,...e)},warn:function(...e){this.log(this.levels.WARN,...e)},info:function(...e){this.log(this.levels.INFO,...e)},debug:function(...e){this.log(this.levels.DEBUG,...e)}};function n(e,t){if(t){if(!e)return t;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&((!Array.isArray(e[r])||!Array.isArray(t[r]))&&r in e&&"object"==typeof e[r]&&"object"==typeof t[r]&&null!==e[r]&&null!==t[r]?n(e[r],t[r]):e[r]=t[r])}return e}const i={debug:{level:r.URL.WEBFLOW_DOMAINS.some(e=>window.location.hostname.endsWith(e))||window.location.hostname.includes(r.URL.LOCALHOST)?r.DEBUG.DEVELOPMENT_LEVEL:r.DEBUG.LEVEL},selectors:{fp:r.SELECTORS.FP_ATTRIBUTES},templates:{cacheSize:r.TEMPLATE.CACHE_SIZE,precompile:r.TEMPLATE.PRECOMPILE},animation:{enabled:r.ANIMATION.ENABLED,duration:r.ANIMATION.DURATION},htmx:{timeout:r.HTMX.TIMEOUT,swapStyle:r.HTMX.SWAP_STYLE,selfRequestsOnly:r.HTMX.SELF_REQUESTS_ONLY,ignoreTitle:r.HTMX.IGNORE_TITLE},customTags:[{tag:"fpselect",replaceWith:"select"}],storage:{enabled:r.STORAGE.ENABLED,ttl:r.STORAGE.TTL},performance:{batchDomUpdates:r.PERFORMANCE.BATCH_DOM_UPDATES,batchingDelay:r.PERFORMANCE.BATCHING_DELAY},persistForm:r.FORMS.PERSIST_FORMS,allowExecute:r.SECURITY.ALLOW_EXECUTE};a.config=JSON.parse(JSON.stringify(i));let t=[],l=!1;function o(e){var t,r;"storage"in e&&(e.storage=(t=e.storage,r=i.storage,"boolean"==typeof t?{enabled:t,ttl:r.ttl}:"number"==typeof t?-1===t?{enabled:!0,ttl:-1}:{enabled:0<t,ttl:0<t?t:r.ttl}:"object"==typeof t&&null!==t?{enabled:!!t.enabled,ttl:("number"==typeof t.ttl?t:r).ttl}:r)),a.config=n(JSON.parse(JSON.stringify(a.config)),e),p.level=a.config.debug.level,"undefined"!=typeof htmx&&(htmx.config.timeout=a.config.htmx.timeout,htmx.config.defaultSwapStyle=a.config.htmx.swapStyle,htmx.config.selfRequestsOnly=a.config.htmx.selfRequestsOnly,htmx.config.ignoreTitle=a.config.htmx.ignoreTitle),e.customTags&&e.customTags}const T={setDefaultConfig(e){o(e)},setConfig(e={}){l?(o(e),p.info("FlowPlater configuration updated:",this.getConfig())):t.push(e)},submitQueuedConfig(){0<t.length&&(o(t.reduce((e,t)=>n(e,t),{})),p.info("FlowPlater configuration updated:",this.getConfig()),t=[]),l=!0},getConfig(){return JSON.parse(JSON.stringify(a.config))},getDefaultConfig(){return JSON.parse(JSON.stringify(i))}};function A(e,t){return t instanceof Map?{_dataType:"Map",value:Array.from(t.entries())}:t}function g(e,t){return"object"==typeof t&&null!==t&&"Map"===t._dataType?new Map(t.value):t}p.level=a.config.debug.level;const s={INHERITABLE_ATTRIBUTES:{"hx-":["boost","push-url","select","select-oob","swap","target","vals","confirm","disable","disabled-elt","encoding","ext","headers","include","indicator","params","prompt","replace-url","request","sync","vars"],"fp-":["prepend","append","persist","target"]},_prefixes(){return Object.keys(this.INHERITABLE_ATTRIBUTES)},_normalizeAttributeName(e){return e.replace(/^(hx-|fp-)/,"").replace(/^data-/,"")},_getAllAttributeNames(e){var t=this._normalizeAttributeName(e),r=[];for(const a of this._prefixes())r.push(""+a+t),r.push("data-"+a+t);return r},_getRawAttribute(e,t,r=null){for(const n of this._getAllAttributeNames(t)){var a=e.getAttribute(n);if(null!==a)return a}return r},_hasAttribute(t,e){return this._getAllAttributeNames(e).some(e=>t.hasAttribute(e))},findMatchingElements(e,t=null,r=!0,a=document,n=!0,i=!1){var l=this._getAllAttributeNames(e);let o=l.map(e=>`[${e}]`).join(",");if(null!=t){const s=r?`="${t}"`:`*="${t}"`;o=l.map(e=>`[${e}${s}]`).join(",")}l=Array.from(a.querySelectorAll(o));return n&&a instanceof Element&&(null===(n=this._getRawAttribute(a,e))||null!=t&&(r?n!==t:!n.includes(t))||l.unshift(a)),null!=t&&i?l[0]:l},findClosestParent(e,t,r=null,a=!0){if(!e)return p.error("Attribute name is required"),null;if(!t)return p.error("Element is required to find closest parent ("+e+")"),null;var e=this._normalizeAttributeName(e),n=this._getAllAttributeNames(e);let i=n.map(e=>`[${e}]`).join(",");if(null!=r){const l=a?`="${r}"`:`*="${r}"`;i=n.map(e=>`[${e}${l}]`).join(",")}a=t.closest(i);if(a&&this.isInheritable(e)){r=this._getRawAttribute(a,"disinherit");if(r&&("*"===r||r.split(" ").includes(e)))return null}return a},getElementWithAttribute(e,t=document,r=!0){return r&&t instanceof Element&&this._hasAttribute(t,e)?t:(r=this._getAllAttributeNames(e).map(e=>`[${e}]`).join(","),t.querySelector(r))},_parentElement(e){var t=e.parentElement;return!t&&e.parentNode instanceof ShadowRoot?e.parentNode:t},_getRootNode(e,t=!1){return e.getRootNode?e.getRootNode({composed:t}):document},_getClosestMatch(e,t){for(;e&&!t(e);)e=this._parentElement(e);return e||null},_attributeMatchesNormalizedName(e,t){return e.replace(/^data-/,"").replace(/^hx-/,"").replace(/^fp-/,"")===t},_getAttributeValueWithInheritance(e,t,r){var a=this._getRawAttribute(t,r),n=this._getRawAttribute(t,"disinherit"),i=this._getRawAttribute(t,"inherit");if(e!==t){if(htmx.config.disableInheritance)return i&&("*"===i||i.split(" ").includes(r))?a:null;if(n&&("*"===n||n.split(" ").includes(r)))return"unset"}return a},findInheritedAttribute(t,e){const r=this._normalizeAttributeName(e);let a=null;return this._getClosestMatch(t,e=>{e=this._getAttributeValueWithInheritance(t,e,r);return!!e&&(a=e,!0)}),"unset"===a?null:a},findAttribute(e,t){var r=this._normalizeAttributeName(t);for(const n of this._prefixes()){var a=this._getRawAttribute(e,""+n+r);if(a)return a}return this.findInheritedAttribute(e,r)||null},_validateAttributeName(e){return e?!!this.isInheritable(e)||(p.info(`Attribute ${e} is not inheritable`),!1):(p.error("Attribute name is required"),!1)},addInheritableAttribute(e,t){this.INHERITABLE_ATTRIBUTES[e]||(this.INHERITABLE_ATTRIBUTES[e]=[]),this.INHERITABLE_ATTRIBUTES[e].push(t)},removeInheritableAttribute(e,t){return!!this.INHERITABLE_ATTRIBUTES[e]&&-1!==(t=this.INHERITABLE_ATTRIBUTES[e].indexOf(t))&&(this.INHERITABLE_ATTRIBUTES[e].splice(t,1),!0)},isInheritable(e){e=this._normalizeAttributeName(e);return Object.values(this.INHERITABLE_ATTRIBUTES).flat().includes(e)},findTemplateElementByInstanceName(t){var e;return t.startsWith("#")?(e=t.slice(1),(e=document.getElementById(e))&&this._hasAttribute(e,"template")?e:null):(e=this.findMatchingElements("template"),Array.isArray(e)&&e.find(e=>{return this._getRawAttribute(e,"instance")===t})||null)},findElementByInstanceName(e){if(e.startsWith("#")){var t=e.slice(1);const r=document.getElementById(t);return r}const r=this.findMatchingElements("instance",e,!1,document,!1,!0);return r}};function m(e,t={},r="save"){var a=h(e).useLocalStorage,n="fp_form_"+e.id;if("save"===r)if(a){var i=e.id,l=t,o="form",s=T.getConfig().storage;if(s?.enabled)try{var c=o?`fp_${o}_`+i:"fp_"+i;let e;try{e=JSON.stringify(l,A)}catch(e){return void p.error(`[LocalStorage] Failed to serialize data for key ${c}: `+e.message)}var u={data:e,expiry:-1===s.ttl?null:Date.now()+1e3*s.ttl};p.debug("[LocalStorage] Saving to localStorage:",{key:c,item:u}),localStorage.setItem(c,JSON.stringify(u))}catch(e){p.error(`[LocalStorage] Failed to save to localStorage for key ${i}: `+e.message)}else p.debug("[LocalStorage] Storage is disabled, skipping save for key: "+i)}else sessionStorage.setItem(n,JSON.stringify(t));else if("load"===r){if(!a)return JSON.parse(sessionStorage.getItem(n)||"{}");o=e.id,l="form";try{var f,E,m=l?`fp_${l}_`+o:"fp_"+o,d=localStorage.getItem(m);return d?(f=JSON.parse(d)).expiry&&f.expiry<Date.now()?(p.debug("[LocalStorage] Stored item has expired for key: "+m),localStorage.removeItem(m),null):(E=JSON.parse(f.data,g),p.debug("[LocalStorage] Loaded from localStorage:",{key:m,data:E}),E):(p.debug("[LocalStorage] No stored item found for key: "+m),null)}catch(e){return p.error(`[LocalStorage] Failed to load or parse from localStorage for key ${o}: `+e.message),null}}else"clear"===r&&(a&&localStorage.removeItem(n),sessionStorage.removeItem(n))}function h(e){let t=!1,r=!1;var a;return r=s._hasAttribute(e,"persist")?(t="false"!==s._getRawAttribute(e,"persist"),"true"===s._getRawAttribute(e,"persist")):(a=e.closest("form"))&&s._hasAttribute(a,"persist")?(t="false"!==s._getRawAttribute(a,"persist"),"true"===s._getRawAttribute(a,"persist")):T.getConfig().storage?.enabled&&!T.getConfig().persistForm?t=!1:(t=T.getConfig().persistForm,T.getConfig().storage?.enabled&&T.getConfig().persistForm),e instanceof HTMLFormElement&&Array.from(e.elements).some(e=>"true"===s._getRawAttribute(e,"persist"))&&(r=T.getConfig().storage?.enabled),{shouldPersist:t,useLocalStorage:r&&T.getConfig().storage?.enabled}}return(e={})=>{var t={name:"filter",enabled:r.FILTER.ENABLED,priority:r.FILTER.PRIORITY,version:r.PLUGINS.DEFAULT_VERSION,dependencies:[],optionalDependencies:[],settings:{debug:r.PLUGINS.DEBUG},description:"Filters data based on form inputs",author:"FlowPlater Team"};Object.assign(t,e);const s={instances:new Map,formTemplates:new Map,formObservers:new Map};function f(e,t){return t.split(".").reduce((e,t)=>{if(null!=e)return e[t]},e)}function i(c,e,t){FlowPlater.trigger("filter:beforeDynamicUpdate",c,{path:e,data:t});var r=e.split(".");let a=t;for(let e=0;e<r.length-1;e++)if(!(a=a[r[e]]))return;const u=a[r[r.length-1]];Array.isArray(u)&&(c.querySelectorAll("[fp-filter-key][fp-filter-dynamic]").forEach(r=>{const n=r.getAttribute("fp-filter-key");var e=function(e,t){const r=new Set;return e.forEach(e=>{e=f(e,t);null!=e&&(Array.isArray(e)?e.forEach(e=>r.add(e)):r.add(e))}),Array.from(r).sort()}(u,n||"");if(r instanceof HTMLSelectElement){r.innerHTML='<option value="">Select tags...</option>',e.forEach(e=>{var t=document.createElement("option");t.value=e,t.textContent=e,r.appendChild(t)});const i=m(c,{},"load");i&&r.name&&i[r.name]&&(r.multiple?Array.from(r.options).forEach(e=>{e.selected=Array.isArray(i[r.name])&&i[r.name].includes(e.value)}):r.value=i[r.name])}else{const l=r;if(l){const o=l.children[0];if(o){var t=r.hasAttribute("fp-filter-preserve-default"),a=t?l.children[0].cloneNode(!0):null;l.innerHTML="",t&&a&&((t=a.querySelector("input"))&&"radio"===t.type&&(t.value=""),l.appendChild(a)),e.forEach(e=>{var t=o.cloneNode(!0),r=t.querySelector("input"),r=(r&&(r.value=e,r.id=n+"_"+e,r.name=n||""),t.querySelector("label"));function a(e,t){e.normalize();e=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,{acceptNode:function(e){return e.textContent?.trim()?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}).nextNode();e&&(e.textContent=t)}r&&r.setAttribute("for",n+"_"+e||""),a(r||t,e),l.appendChild(t)});const s=m(c,{},"load");s&&n&&n in s&&l.querySelectorAll("input").forEach(e=>{"radio"===e.type?e.checked=(e.value||"")===(s[n]||""):"checkbox"===e.type&&(e.checked=!0===s[n]||Array.isArray(s[n])&&s[n].includes(e.value))})}}}}),FlowPlater.trigger("filter:dynamicUpdated",c,{path:e,data:t}))}function c(){var e=new URLSearchParams(window.location.search);const r={};return e.forEach((e,t)=>{e.includes(",")?r[t]=e.split(",").filter(Boolean):r[t]=e}),r}function u(e,t){e.hasAttribute("fp-filter-usequery")&&(t=(e=function(e){const r=new URLSearchParams;return Object.entries(e).forEach(([e,t])=>{Array.isArray(t)?0<t.length&&r.set(e,t.join(",")):null!=t&&""!==t&&r.set(e,t)}),r.toString()}(t))?window.location.pathname+"?"+e:window.location.pathname,window.history.replaceState({},"",t))}function l(n,i){if(n&&i){let r;const a=(n.getAttribute("fp-filter-triggers")||"change").split(/[\s,]+/).filter(Boolean),l=e=>{if(e.isTrusted){const a={};n.querySelectorAll("[fp-filter-key]").forEach(e=>{var t,r=e.getAttribute("fp-filter-key");r&&0!==(e=e.matches("input, select, textarea")?[e]:Array.from(e.querySelectorAll("input, select, textarea"))).length&&(e.some(e=>"checkbox"===e.type)?(t=e.filter(e=>e.checked),a[r]=t.map(e=>e.value)):e.some(e=>"radio"===e.type)?(t=e.find(e=>e.checked),a[r]=t&&t.value||""):e.some(e=>e instanceof HTMLSelectElement&&e.multiple)?(t=e.find(e=>e instanceof HTMLSelectElement&&e.multiple),a[r]=t?Array.from(t.selectedOptions).map(e=>e.value):[]):a[r]=e[0].value||"")}),FlowPlater.trigger("filter:beforeApply",n,{formState:a,instanceName:i}),FlowPlater.trigger("formState:beforeCapture",n,{formId:n.id,formElement:n,state:a}),m(n,a,"save"),FlowPlater.trigger("formState:changed",n,{formId:n.id,formElement:n,state:a,changedElement:e.target}),n.hasAttribute("fp-filter-usequery")&&!n.dataset.fpFilterInitialLoad&&u(n,a);var t,e=FlowPlater.getInstance(i);e&&(t=e,clearTimeout(r),r=setTimeout(()=>{t._updateDOM()},25))}};var e;if(a.forEach(e=>{n.addEventListener(e,l)}),s.formObservers.has(i)||((e=new MutationObserver(e=>{let t=!1;e.forEach(e=>{"childList"===e.type&&e.addedNodes.forEach(e=>{e instanceof HTMLElement&&(e.matches("[fp-filter-key]")||e.querySelector("[fp-filter-key]"))&&(t=!0)})}),t&&a.forEach(e=>{n.addEventListener(e,l)})})).observe(n,{childList:!0,subtree:!0}),s.formObservers.set(i,e)),n.hasAttribute("fp-filter-usequery")){const o=c();o&&0<Object.keys(o).length&&(n.querySelectorAll("[fp-filter-key]").forEach(e=>{var t=e.getAttribute("fp-filter-key");if(t&&t in o){e=e.matches("input, select, textarea")?[e]:Array.from(e.querySelectorAll("input, select, textarea"));if(0!==e.length){const r=o[t];e.forEach(e=>{"checkbox"===e.type?Array.isArray(r)?e.checked=r.includes(e.value):e.checked=r:"radio"===e.type?e.checked=(e.value||"")===(r||""):e instanceof HTMLSelectElement&&e.multiple?Array.from(e.options).forEach(e=>{e.selected=Array.isArray(r)?r.includes(e.value):r===e.value}):e.value=r})}}}),n.dataset.fpFilterInitialLoad="true",m(n,o,"save"),setTimeout(()=>{delete n.dataset.fpFilterInitialLoad},100))}}}function E(e){return e?e instanceof Date?e:(e=new Date(e),isNaN(e)?null:e):null}function o(u,e){return Object.entries(e).every(([e,t])=>{if(null==t||""===t||Array.isArray(t)&&0===t.length)return!0;var[e,r]=e.split(":");const a=f(u,e);if(!r)return Array.isArray(t)?0===t.length||(Array.isArray(a)?t.some(t=>a.some(e=>e.toString().toLowerCase()===t.toLowerCase())):t.some(e=>a.toString().toLowerCase()===e.toLowerCase())):"string"!=typeof t||(Array.isArray(a)?a.some(e=>e.toString().toLowerCase().includes(t.toLowerCase())):a.toString().toLowerCase().includes(t.toLowerCase()));var e=a,n=t;if(!n)return!0;if(e instanceof Date||"string"==typeof(o=e)&&(/^\d{4}-\d{2}-\d{2}/.test(o)||/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}/.test(o))){var i=E(e),l=E(n);if(!i||!l)return!0;switch(r){case"min":return l<=i;case"max":return i<=l;default:return!0}}var o,s=parseFloat(n),c=parseFloat(e);if(isNaN(s)||isNaN(c))return!0;switch(r){case"min":return s<=c;case"max":return c<=s;default:return!0}})}return{config:t,state:s,hooks:{updateData:function(n,e){return n&&"system"!==e?.source&&0!==(e=document.querySelectorAll(`[fp-filter-instance="${n.instanceName}"]`)).length&&e.forEach(e=>{var t=e.getAttribute("fp-filter");if(t){s.formTemplates.has(n.instanceName)||(s.formTemplates.set(n.instanceName,{formElement:e,originalHTML:e.innerHTML}),l(e,n.instanceName));var r=n.getData();if(i(e,t,r),e.hasAttribute("fp-filter-usequery")&&h(e).shouldPersist){const a=c();a&&0<Object.keys(a).length&&(e.querySelectorAll("[fp-filter-key]").forEach(e=>{var t=e.getAttribute("fp-filter-key");if(t&&t in a){e=e.matches("input, select, textarea")?[e]:Array.from(e.querySelectorAll("input, select, textarea"));if(0!==e.length){const r=a[t];e.forEach(e=>{"checkbox"===e.type?Array.isArray(r)?e.checked=r.includes(e.value):e.checked=r:"radio"===e.type?e.checked=(e.value||"")===(r||""):e instanceof HTMLSelectElement&&e.multiple?Array.from(e.options).forEach(e=>{e.selected=Array.isArray(r)?r.includes(e.value):r===e.value}):e.value=r})}}}),(t={isTrusted:!0,type:"init",target:e}).isTrusted)&&(t=FlowPlater.getInstance(n.instanceName))&&t.refresh()}}}),n},afterDomUpdate:function(r,e){var t;return r&&0!==(t=document.querySelectorAll(`[fp-filter-instance="${r.instanceName}"]`)).length&&t.forEach(e=>{var t=e.getAttribute("fp-filter");t&&(s.formTemplates.has(r.instanceName)||(s.formTemplates.set(r.instanceName,{formElement:e,originalHTML:e.innerHTML}),l(e,r.instanceName)),i(e,t,r.getData()))}),r},cleanup:function(){s.formObservers.forEach(e=>{e.disconnect()}),s.formObservers.clear(),s.formTemplates.clear()}},transformers:{transformDataBeforeRender:function(e,t,r){if(!t)return t;if("json"!==r)return FlowPlater.log(FlowPlater.logLevels.ERROR,"[FilterPlugin] Data type is not json. Skipping filter."),t;var a=document.querySelectorAll(`[fp-filter-instance="${e.instanceName}"]`);if(0===a.length)return t;let i={...t};e=e.getElements();return e.forEach(e=>{FlowPlater.trigger("filter:beforeTransform",e,{data:t,dataType:r})}),a.forEach(e=>{var r=e.getAttribute("fp-filter");if(r){const n=m(e,{},"load")||{};0===Object.keys(n).length&&e.querySelectorAll("[fp-filter-key]").forEach(e=>{var t,r=e.getAttribute("fp-filter-key");r&&0!==(e=e.matches("input, select, textarea")?[e]:Array.from(e.querySelectorAll("input, select, textarea"))).length&&(e.some(e=>"checkbox"===e.type)?(t=e.filter(e=>e.checked),n[r]=t.map(e=>e.value)):e.some(e=>"radio"===e.type)?(t=e.find(e=>e.checked),n[r]=t&&t.value||""):e.some(e=>e instanceof HTMLSelectElement&&e.multiple)?(t=e.find(e=>e instanceof HTMLSelectElement&&e.multiple),n[r]=t?Array.from(t.selectedOptions).map(e=>e.value):[]):n[r]=e[0].value||"")});e=i[r].filter(e=>o(e,n));if(r.includes(".")){var a=r.split(".");let t=i;for(let e=0;e<a.length-1;e++)t=t[a[e]];t[a[a.length-1]]=e}else i[r]=e}}),e.forEach(e=>{FlowPlater.trigger("filter:transformed",e,{originalData:t,filteredData:i})}),i}}}}}();