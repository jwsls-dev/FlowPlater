var DataExtractorPlugin=function(){"use strict";return()=>{const r={name:"data-extractor",enabled:!0,priority:0,version:"1.0.0",dependencies:[],optionalDependencies:[],settings:{debug:!1},description:"Transforms HTML with fp-data attributes into JSON data",author:"FlowPlater Team"};var t={instances:new Map};const a={processHtml(t){FlowPlater.log(FlowPlater.logLevels.DEBUG,"[DataExtractor] Processing HTML:",t);t=(new DOMParser).parseFromString(t,"text/html"),t=e.extractData(t.body)||{};return FlowPlater.log(FlowPlater.logLevels.DEBUG,"[DataExtractor] Extraction result:",t),t}},e={extractData(t){if(!t)return FlowPlater.log(FlowPlater.logLevels.DEBUG,"[DataExtractor] No element provided"),null;if(t.hasAttribute("fp-data")){var e=t.getAttribute("fp-data"),r=t.querySelectorAll("span[fp-data]");if(0<r.length){const o={};return r.forEach(t=>{var e=t.getAttribute("fp-data");o[e]=t.textContent.trim()}),{[e]:o}}switch(t.tagName){case"IMG":return{[e]:{src:t.src,alt:t.alt,width:t.width,height:t.height}};case"VIDEO":case"AUDIO":var a=Array.from(t.querySelectorAll("source")).map(t=>({src:t.src,type:t.type}));return{[e]:{src:t.src,sources:a}};case"A":case"BUTTON":return{[e]:{href:t.href,text:t.textContent.trim(),target:t.target}};case"INPUT":case"TEXTAREA":return{[e]:{value:t.value,type:t.type,checked:t.checked,placeholder:t.placeholder}};case"SELECT":return{[e]:{value:t.value,options:Array.from(t.querySelectorAll("option")).map(t=>({value:t.value,text:t.textContent.trim()}))}};default:return{[e]:t.textContent.trim()}}}r=t.querySelectorAll("[fp-data]");if(0===r.length)return FlowPlater.log(FlowPlater.logLevels.INFO,"[DataExtractor] No data elements found"),{};const l={};return r.forEach(t=>{t.parentElement.hasAttribute("fp-data")||(t=this.extractData(t))&&Object.assign(l,t)}),l}};return{config:r,state:t,globalMethods:a,instanceMethods:e,hooks:{initComplete:function(t,e){return r.enabled&&r.settings.debug&&FlowPlater.log(FlowPlater.logLevels.INFO,r.name+" plugin initialized"),t}},transformers:{transformResponse:function(t,e,r){return e&&"html"===r&&t.element&&t.element.hasAttribute("fp-extract-data")?a.processHtml(e):e}}}}}();