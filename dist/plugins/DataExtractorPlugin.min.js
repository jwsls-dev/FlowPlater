var DataExtractorPlugin=function(){"use strict";return()=>{const r={name:"data-extractor",enabled:!0,priority:0,version:"1.0.0",dependencies:[],optionalDependencies:[],settings:{debug:!1},description:"Transforms HTML with fp-data attributes into JSON data",author:"FlowPlater Team"};var t={instances:new Map};const a={processHtml(t){t=(new DOMParser).parseFromString(t,"text/html");return e.extractData(t.body)||{}}},e={extractData(t){if(!t)return null;t=Array.from(t.children).filter(t=>t.hasAttribute("fp-data"));if(0===t.length)return null;var e,r,t=t.reduce((t,e)=>{var r=e.getAttribute("fp-data")||"";return t[r]||(t[r]=[]),t[r].push(e),t},{}),a={};for([e,r]of Object.entries(t))if(1===r.length){const t=r[0];0<Array.from(t.children).filter(t=>t.hasAttribute("fp-data")).length?a[e]=this.extractData(t):a[e]=t.textContent.trim()}else a[e]=r.map(t=>{return 0<Array.from(t.children).filter(t=>t.hasAttribute("fp-data")).length?this.extractData(t):t.textContent.trim()});return a}};return{config:r,state:t,globalMethods:a,instanceMethods:e,hooks:{initComplete:function(t,e){return r.enabled&&r.settings.debug&&FlowPlater.log(FlowPlater.logLevels.INFO,r.name+" plugin initialized"),t}},transformers:{transformResponse:function(t,e,r){return e&&"html"===r&&t.element&&t.element.hasAttribute("fp-extract-data")?a.processHtml(e):e}}}}}();